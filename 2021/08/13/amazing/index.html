<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">新鲜玩意 | DarkStrand</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "FLのBlog";
  mashiro_option.author_name = "Blog";
  mashiro_option.site_url = "";
  mashiro_option.v_appId = "zMhFPcMIscDyGbtxHjYFffkx-gzGzoHsz";
  mashiro_option.v_appKey = "c4XBymCm0OmYWLklOAKbUlhE";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/pexels-designecologist-1779487.jpg,https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/pexels-serpstat-572056.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
  
  <!--自定义看板娘-->
  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <script src="/live2d-widget/autoload.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="">
          <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/touxiang.JPG">
        </a>
      </div>
      <div class="header-info">
        <p>Live your life with passion! With some drive!</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://gitee.com/darkstranded" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/github.jpeg">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/wechat.jpeg">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/qrwechat.png">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">FLの</span>
            <span class="shironeko">Blog</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/转载/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/4.jpg);" src="/images/bg1.jpg" data-src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/4.jpg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      新鲜玩意</h1>
      <p class="entry-census">
        <span>
          <a href="DarkStrand.cn">
            <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/avatar.jpg">
          </a>
        </span>
        <span>
          <a href="DarkStrand.cn">DarkStrand</a>
        </span>
        <span class="bull">
        ·</span>
        2021-8-13<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h2 id="页面浮动多边形跟随鼠标移动"><a href="#页面浮动多边形跟随鼠标移动" class="headerlink" title="页面浮动多边形跟随鼠标移动"></a>页面浮动多边形跟随鼠标移动</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e635cd6c5a0d4086ad1c2edefeb44a4e~tplv-k3u1fbpfcp-zoom-1.image" alt="页面浮动多边形跟随鼠标移动"><br><!-- ![页面浮动多边形跟随鼠标移动][img1] --></p>
<pre><code class="javascript">//鼠标绘制多边形
!(function() {
  //封装方法，压缩之后减少文件大小
  function get_attribute(node, attr, default_value) {
    return node.getAttribute(attr) || default_value
  }
  //封装方法，压缩之后减少文件大小
  function get_by_tagname(name) {
    return document.getElementsByTagName(name)
  }
  //获取配置参数
  function get_config_option() {
    var scripts = get_by_tagname(&quot;script&quot;),
      script_len = scripts.length,
      script = scripts[script_len - 1] //当前加载的script
    return {
      l: script_len, //长度，用于生成id用
      z: get_attribute(script, &quot;zIndex&quot;, -1), //z-index
      o: get_attribute(script, &quot;opacity&quot;, 0.5), //opacity
      c: get_attribute(script, &quot;color&quot;, &quot;0,0,0&quot;), //color
      n: get_attribute(script, &quot;count&quot;, 99), //count
    }
  }
  //设置canvas的高宽
  function set_canvas_size() {
    ;(canvas_width = the_canvas.width =
      window.innerWidth ||
      document.documentElement.clientWidth ||
      document.body.clientWidth),
      (canvas_height = the_canvas.height =
        window.innerHeight ||
        document.documentElement.clientHeight ||
        document.body.clientHeight)
  }

  //绘制过程
  function draw_canvas() {
    context.clearRect(0, 0, canvas_width, canvas_height)
    //随机的线条和当前位置联合数组
    var e, i, d, x_dist, y_dist, dist //临时节点
    //遍历处理每一个点
    random_points.forEach(function(r, idx) {
      ;(r.x += r.xa),
        (r.y += r.ya), //移动
        (r.xa *= r.x &gt; canvas_width || r.x &lt; 0 ? -1 : 1),
        (r.ya *= r.y &gt; canvas_height || r.y &lt; 0 ? -1 : 1), //碰到边界，反向反弹
        context.fillRect(r.x - 0.5, r.y - 0.5, 1, 1) //绘制一个宽高为1的点
      //从下一个点开始
      for (i = idx + 1; i &lt; all_array.length; i++) {
        e = all_array[i]
        // 当前点存在
        if (null !== e.x &amp;&amp; null !== e.y) {
          x_dist = r.x - e.x //x轴距离 l
          y_dist = r.y - e.y //y轴距离 n
          dist = x_dist * x_dist + y_dist * y_dist //总距离, m

          dist &lt; e.max &amp;&amp;
            (e === current_point &amp;&amp;
              dist &gt;= e.max / 2 &amp;&amp;
              ((r.x -= 0.03 * x_dist), (r.y -= 0.03 * y_dist)), //靠近的时候加速
            (d = (e.max - dist) / e.max),
            context.beginPath(),
            (context.lineWidth = d / 2),
            (context.strokeStyle = &quot;rgba(&quot; + config.c + &quot;,&quot; + (d + 0.2) + &quot;)&quot;),
            context.moveTo(r.x, r.y),
            context.lineTo(e.x, e.y),
            context.stroke())
        }
      }
    }),
      frame_func(draw_canvas)
  }
  //创建画布，并添加到body中
  var the_canvas = document.createElement(&quot;canvas&quot;), //画布
    config = get_config_option(), //配置
    canvas_id = &quot;c_n&quot; + config.l, //canvas id
    context = the_canvas.getContext(&quot;2d&quot;),
    canvas_width,
    canvas_height,
    frame_func =
      window.requestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.oRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function(func) {
        window.setTimeout(func, 1000 / 45)
      },
    random = Math.random,
    current_point = {
      x: null, //当前鼠标x
      y: null, //当前鼠标y
      max: 20000, // 圈半径的平方
    },
    all_array
  the_canvas.id = canvas_id
  the_canvas.style.cssText =
    &quot;position:fixed;top:0;left:0;z-index:&quot; + config.z + &quot;;opacity:&quot; + config.o
  get_by_tagname(&quot;body&quot;)[0].appendChild(the_canvas)

  //初始化画布大小
  set_canvas_size()
  window.onresize = set_canvas_size
  //当时鼠标位置存储，离开的时候，释放当前位置信息
  ;(window.onmousemove = function(e) {
    e = e || window.event
    current_point.x = e.clientX
    current_point.y = e.clientY
  }),
    (window.onmouseout = function() {
      current_point.x = null
      current_point.y = null
    })
  //随机生成config.n条线位置信息
  for (var random_points = [], i = 0; config.n &gt; i; i++) {
    var x = random() * canvas_width, //随机位置
      y = random() * canvas_height,
      xa = 2 * random() - 1, //随机运动方向
      ya = 2 * random() - 1
    // 随机点
    random_points.push({
      x: x,
      y: y,
      xa: xa,
      ya: ya,
      max: 6000, //沾附距离
    })
  }
  all_array = random_points.concat([current_point])
  //0.1秒后绘制
  setTimeout(function() {
    draw_canvas()
  }, 100)
})()
</code></pre>
<h2 id="每日一言功能"><a href="#每日一言功能" class="headerlink" title="每日一言功能"></a>每日一言功能</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b7a8b1a5b3e4577b1b67efee35b54ba~tplv-k3u1fbpfcp-zoom-1.image" alt="每日一言功能"></p>
<pre><code class="html">&lt;body&gt;
  &lt;strong&gt;&lt;p id=&quot;hitokoto&quot;&gt;每日一言获取中...&lt;/p&gt;&lt;/strong&gt;
  &lt;script&gt;
    //每日一言
    $(function() {
      var xhr = new XMLHttpRequest()
      xhr.open(&quot;get&quot;, &quot;https://v1.hitokoto.cn&quot;)
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          var data = JSON.parse(xhr.responseText)
          var hitokoto = document.getElementById(&quot;hitokoto&quot;)
          hitokoto.innerText = data.hitokoto
        }
      }
      xhr.send()
    })
  &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<h2 id="鼠标点击出现爱心特效"><a href="#鼠标点击出现爱心特效" class="headerlink" title="鼠标点击出现爱心特效"></a>鼠标点击出现爱心特效</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da17b3c0f8374b11bf92938a7cb32031~tplv-k3u1fbpfcp-zoom-1.image" alt="鼠标点击出现不同颜色爱心"></p>
<pre><code class="javascript">//鼠标点击爱心
!(function(e, t, a) {
  function r() {
    for (var e = 0; e &lt; s.length; e++)
      s[e].alpha &lt;= 0
        ? (t.body.removeChild(s[e].el), s.splice(e, 1))
        : (s[e].y--,
          (s[e].scale += 0.004),
          (s[e].alpha -= 0.013),
          (s[e].el.style.cssText =
            &quot;left:&quot; +
            s[e].x +
            &quot;px;top:&quot; +
            s[e].y +
            &quot;px;opacity:&quot; +
            s[e].alpha +
            &quot;;transform:scale(&quot; +
            s[e].scale +
            &quot;,&quot; +
            s[e].scale +
            &quot;) rotate(45deg);background:&quot; +
            s[e].color +
            &quot;;z-index:99999&quot;))
    requestAnimationFrame(r)
  }
  function n() {
    var t = &quot;function&quot; == typeof e.onclick &amp;&amp; e.onclick
    e.onclick = function(e) {
      t &amp;&amp; t(), o(e)
    }
  }
  function o(e) {
    var a = t.createElement(&quot;div&quot;)
    ;(a.className = &quot;heart&quot;),
      s.push({
        el: a,
        x: e.clientX - 5,
        y: e.clientY - 5,
        scale: 1,
        alpha: 1,
        color: c(),
      }),
      t.body.appendChild(a)
  }
  function i(e) {
    var a = t.createElement(&quot;style&quot;)
    a.type = &quot;text/css&quot;
    try {
      a.appendChild(t.createTextNode(e))
    } catch (t) {
      a.styleSheet.cssText = e
    }
    t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)
  }
  function c() {
    return (
      &quot;rgb(&quot; +
      ~~(255 * Math.random()) +
      &quot;,&quot; +
      ~~(255 * Math.random()) +
      &quot;,&quot; +
      ~~(255 * Math.random()) +
      &quot;)&quot;
    )
  }
  var s = []
  ;(e.requestAnimationFrame =
    e.requestAnimationFrame ||
    e.webkitRequestAnimationFrame ||
    e.mozRequestAnimationFrame ||
    e.oRequestAnimationFrame ||
    e.msRequestAnimationFrame ||
    function(e) {
      setTimeout(e, 1e3 / 60)
    }),
    i(
      &quot;.heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: &#39;&#39;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}&quot;
    ),
    n(),
    r()
})(window, document)
</code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5015800b668b4f329c0c414283c79d5a~tplv-k3u1fbpfcp-zoom-1.image" alt="鼠标点击出现‘富强明主’字体"></p>
<pre><code class="javascript">
&lt;script&gt;
    //定义获取词语下标
var a_idx = 0;
jQuery(document).ready(function($) {
        //点击body时触发事件
    $(&quot;body&quot;).click(function(e) {
    //需要显示的词语
    var a = new Array(&quot;富强&quot;,&quot;民主&quot;, &quot;文明&quot;, &quot;和谐&quot;,&quot;自由&quot;, &quot;平等&quot;, &quot;公正&quot;,&quot;法治&quot;, &quot;爱国&quot;, &quot;敬业&quot;,&quot;诚信&quot;, &quot;友善&quot;);
    //设置词语给span标签
    var $i = $(&quot;&lt;span/&gt;&quot;).text(a[a_idx]);
    //下标等于原来下标+1  余 词语总数
    a_idx = (a_idx + 1)% a.length;
    //获取鼠标指针的位置，分别相对于文档的左和右边缘。
    //获取x和y的指针坐标
    var x = e.pageX, y = e.pageY;
    //在鼠标的指针的位置给$i定义的span标签添加css样式
    $i.css({&quot;z-index&quot; : 999999,
        &quot;top&quot; : y - 20,
        &quot;left&quot; : x,
        &quot;position&quot; : &quot;absolute&quot;,
        &quot;font-weight&quot; : &quot;bold&quot;,
        &quot;color&quot; : &quot;#ff6651&quot;
        });
    //在body添加这个标签
    $(&quot;body&quot;).append($i);
        //animate() 方法执行 CSS 属性集的自定义动画。
        //该方法通过CSS样式将元素从一个状态改变为另一个状态。CSS属性值是逐渐改变的，这样就可以创建动画效果。
        //详情请看http://www.w3school.com.cn/jquery/effect_animate.asp
        $i.animate({
        //将原来的位置向上移动180
            &quot;top&quot; : y - 180,
                &quot;opacity&quot; : 0
         //1500动画的速度
        }, 1500, function() {
        //时间到了自动删除
            $i.remove();
        });
    });
});

&lt;/script&gt;

</code></pre>
<h2 id="macOS-Dock-效果"><a href="#macOS-Dock-效果" class="headerlink" title="macOS Dock 效果"></a>macOS Dock 效果</h2><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdcbc5783ecd4331b40b1326ebc0143f~tplv-k3u1fbpfcp-watermark.image" alt="macOS中Dock效果"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;style&gt;
      html {
        font-size: 15px;
      }

      body {
        margin: 0;
        padding: 0;
        display: flex;
        width: 100%;
        min-height: 100vh;
        overflow: hidden;
        align-items: flex-end;
        background-image: linear-gradient(
          109.6deg,
          rgba(25, 170, 209, 1) 11.3%,
          rgba(21, 65, 249, 1) 69.9%
        );
      }

      .glass {
        width: 100%;
        height: 8rem;
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        border: 1px solid rgba(255, 255, 255, 0.18);
        display: flex;
        justify-content: center;
      }

      .dock {
        --scale: 1;

        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .dock li {
        font-size: calc(6rem * var(--scale));
        padding: 0 0.5rem;
        cursor: default;

        position: relative;
        top: calc((6rem * var(--scale) - 6rem) / 2 * -1);

        transition: 15ms all ease-out;
      }

      .dock li.loading {
        animation: 1s loading ease-in infinite;
      }

      @keyframes loading {
        0%,
        100% {
          transform: translateY(0px);
        }
        60% {
          transform: translateY(-40px);
        }
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;glass&quot;&gt;
      &lt;ul class=&quot;dock&quot;&gt;
        &lt;li&gt;😃&lt;/li&gt;
        &lt;li&gt;😊&lt;/li&gt;
        &lt;li&gt;😜&lt;/li&gt;
        &lt;li&gt;😍&lt;/li&gt;
        &lt;li&gt;🤩&lt;/li&gt;
        &lt;li&gt;🥳&lt;/li&gt;
        &lt;li&gt;🥶&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;

    &lt;script&gt;
      document.querySelectorAll(&quot;.dock li&quot;).forEach((li) =&gt; {
        li.addEventListener(&quot;click&quot;, (e) =&gt; {
          e.currentTarget.classList.add(&quot;loading&quot;)
        })

        li.addEventListener(&quot;mousemove&quot;, (e) =&gt; {
          let item = e.target
          let itemRect = item.getBoundingClientRect()
          let offset = Math.abs(e.clientX - itemRect.left) / itemRect.width

          let prev = item.previousElementSibling || null
          let next = item.nextElementSibling || null

          let scale = 0.6

          resetScale()

          if (prev) {
            prev.style.setProperty(&quot;--scale&quot;, 1 + scale * Math.abs(offset - 1))
          }

          item.style.setProperty(&quot;--scale&quot;, 1 + scale)

          if (next) {
            next.style.setProperty(&quot;--scale&quot;, 1 + scale * offset)
          }
        })
      })

      document.querySelector(&quot;.dock&quot;).addEventListener(&quot;mouseleave&quot;, (e) =&gt; {
        resetScale()
      })

      function resetScale() {
        document.querySelectorAll(&quot;.dock li&quot;).forEach((li) =&gt; {
          li.style.setProperty(&quot;--scale&quot;, 1)
        })
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="canvas-实现水印"><a href="#canvas-实现水印" class="headerlink" title="canvas 实现水印"></a>canvas 实现水印</h2><pre><code class="javascript">var watermark = {}

function setWatermark(args) {
  //声明一个怪异一点的变量，确保id的唯一性
  var id = &quot;111.222.333.456&quot;
  var xIndex = 15 //绘制文本的 x 坐标位置
  var yIndex = 65 //绘制文本的 y 坐标位置
  var xInterval = 25 //有多个参数时的行间间隔
  if (document.getElementById(id) !== null) {
    document.body.removeChild(document.getElementById(id))
  }
  //利用canvas绘制水印信息
  var can = document.createElement(&quot;canvas&quot;)
  can.width = 250
  can.height = 150
  var cans = can.getContext(&quot;2d&quot;)
  cans.rotate((-20 * Math.PI) / 180)
  cans.font = &quot;17px Vedana&quot;
  // ziti yanse
  cans.fillStyle = &quot;rgba(200, 200, 200, 0.30)&quot;
  cans.textAlign = &quot;left&quot;
  cans.textBaseline = &quot;Middle&quot;
  for (let i = 0; i &lt; args.length; i++) {
    cans.fillText(args[i], xIndex, yIndex) //绘制水印文案
    yIndex += xInterval //设置每行间隔
  }
  //创建div用于显示
  var div = document.createElement(&quot;div&quot;)
  div.id = id
  div.style.pointerEvents = &quot;none&quot;
  div.style.top = &quot;70px&quot;
  div.style.left = &quot;90px&quot;
  div.style.position = &quot;fixed&quot;
  div.style.zIndex = &quot;100000&quot;
  div.style.width = document.documentElement.clientWidth - 50 + &quot;px&quot;
  div.style.height = document.documentElement.clientHeight - 50 + &quot;px&quot;
  //div承载水印显示
  div.style.background =
    &quot;url(&quot; + can.toDataURL(&quot;image/png&quot;) + &quot;) left top repeat&quot;
  document.body.appendChild(div)
  return id
}

watermark.set = function() {
  let args = Array.prototype.slice.apply(arguments)
  let id = setWatermark(args)
  // 检测如果水印被去掉了，自动给加上
  setInterval(function() {
    if (document.getElementById(id) === null) {
      id = setWatermark(args)
    }
  }, 500)
  //在窗口大小改变之后,自动触发加水印事件
  window.onresize = function() {
    setWatermark(args)
  }
}
window.watermark = watermark

watermark.set(&quot;绝密档案&quot;, &quot;严禁外泄&quot;)
</code></pre>
<h2 id="canvas实现验证码"><a href="#canvas实现验证码" class="headerlink" title="canvas实现验证码"></a>canvas实现验证码</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot; /&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;canvas id=&quot;canvas&quot; width=&quot;120&quot; height=&quot;40&quot;&gt;&lt;/canvas&gt;
  &lt;a href=&quot;#&quot; id=&quot;changeImg&quot;&gt;看不清，换一张&lt;/a&gt;
  &lt;input type=&quot;text&quot; id=&quot;text&quot;&gt;
  &lt;script&gt;
    // 随机数
    function randomNum(min, max) {
      return Math.floor(Math.random() * (max - min) + min);
    }
    /**生成一个随机色**/
    function randomColor(min, max) {
      var r = randomNum(min, max);
      var g = randomNum(min, max);
      var b = randomNum(min, max);
      return &quot;rgb(&quot; + r + &quot;,&quot; + g + &quot;,&quot; + b + &quot;)&quot;;
    }
    drawPic();
    document.getElementById(&quot;changeImg&quot;).onclick = function (e) {
      e.preventDefault();
      drawPic();
    }

    var Vcode = &#39;&#39;

    /**绘制验证码图片**/
    function drawPic() {
      var canvas = document.getElementById(&quot;canvas&quot;);
      var width = canvas.width;
      var height = canvas.height;
      var ctx = canvas.getContext(&#39;2d&#39;);
      ctx.textBaseline = &#39;bottom&#39;;

      /**绘制背景色**/
      ctx.fillStyle = randomColor(180, 240); //颜色若太深可能导致看不清
      ctx.fillRect(0, 0, width, height);
      /**绘制文字**/
      var str = &#39;ABCEFGHJKLMNPQRSTWXY123456789&#39;;
      vCode = &#39;&#39;
      for (var i = 0; i &lt; 4; i++) {
        var txt = str[randomNum(0, str.length)];    // 每次随机生成的数
        vCode += txt
        ctx.fillStyle = randomColor(50, 160);  //随机生成字体颜色
        ctx.font = randomNum(15, 40) + &#39;px SimHei&#39;; //随机生成字体大小
        var x = 10 + i * 25;
        var y = randomNum(25, 45);
        var deg = randomNum(-45, 45);
        //修改坐标原点和旋转角度
        ctx.translate(x, y);
        ctx.rotate(deg * Math.PI / 180);
        ctx.fillText(txt, 0, 0);
        //恢复坐标原点和旋转角度
        ctx.rotate(-deg * Math.PI / 180);
        ctx.translate(-x, -y);
      }
      /* *绘制干扰线* */
      for (var i = 0; i &lt; 4; i++) {
        ctx.strokeStyle = randomColor(40, 180);
        ctx.beginPath();
        ctx.moveTo(randomNum(0, width), randomNum(0, height));
        ctx.lineTo(randomNum(0, width), randomNum(0, height));
        ctx.stroke();
      }
      /**绘制干扰点**/
      for (var i = 0; i &lt; 20; i++) {
        ctx.fillStyle = randomColor(0, 255);
        ctx.beginPath();
        ctx.arc(randomNum(0, width), randomNum(0, height), 1, 0, 2 * Math.PI);
        ctx.fill();
      }
      console.log(&quot;随机生成的验证码是:::&quot;, vCode);
    }
    let text = document.getElementById(&#39;text&#39;)
    text.onblur = function(e) {
      console.log(text.value,&#39;value&#39;)
      if(text.value == vCode) {

      } else {
        alert(&#39;请输入正确的验证码&#39;)
      }
    }
  &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<h2 id="纯css实现霓虹灯效果"><a href="#纯css实现霓虹灯效果" class="headerlink" title="纯css实现霓虹灯效果"></a>纯css实现霓虹灯效果</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
  &lt;style&gt;
    .light {
      position: relative;
      padding: 25px 30px;
      color: #03e9f4;
      font-size: 24px;
      text-transform: uppercase;
      transition: 0.5s;
      letter-spacing: 4px;
      cursor: pointer;
      overflow: hidden;
      width: 200px;
      height: 100px;
    }
    .light:hover {
      background-color: #03e9f4;
      color: #050801;
      box-shadow: 0 0 5px #03e9f4,
                  0 0 25px #03e9f4,
                  0 0 50px #03e9f4,
                  0 0 200px #03e9f4;
    }
    .light div {
      position: absolute;
    }
    .light div:nth-child(1){
      width: 100%;
      height: 2px;
      top: 0;
      left: -100%;
      background: linear-gradient(to right,transparent,#03e9f4);
      animation: animate1 2s linear infinite;
    }
    .light div:nth-child(2){
      width: 2px;
      height: 100%;
      top: -100%;
      right: 0;
      background: linear-gradient(to bottom,transparent,#03e9f4);
      animation: animate2 2s linear infinite;
      animation-delay: 0.5s;
    }
    .light div:nth-child(3){
      width: 100%;
      height: 2px;
      bottom: 0;
      right: -100%;
      background: linear-gradient(to left,transparent,#03e9f4);
      animation: animate3 2s linear infinite;
      animation-delay: 1s;
    }
    .light div:nth-child(4){
      width: 2px;
      height: 100%;
      bottom: -100%;
      left: 0;
      background: linear-gradient(to top,transparent,#03e9f4);
      animation: animate4 2s linear infinite;
      animation-delay: 1.5s;
    }
    @keyframes animate1 {
      0% {
        left: -100%;
      }
      50%,100% {
        left: 100%;
      }
    }
    @keyframes animate2 {
      0% {
        top: -100%;
      }
      50%,100% {
        top: 100%;
      }
    }
    @keyframes animate3 {
      0% {
        right: -100%;
      }
      50%,100% {
        right: 100%;
      }
    }
    @keyframes animate4 {
      0% {
        bottom: -100%;
      }
      50%,100% {
        bottom: 100%;
      }
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;light&quot;&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;div&gt;&lt;/div&gt;
    Neon Button
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="canvas实现刮刮乐"><a href="#canvas实现刮刮乐" class="headerlink" title="canvas实现刮刮乐"></a>canvas实现刮刮乐</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt;
    &lt;title&gt;Document&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;img src=&quot;./男1.jpg&quot; width=&quot;400&quot; id=&quot;img&quot; alt=&quot;&quot; /&gt;
    &lt;input type=&quot;text&quot; name=&quot;&quot; id=&quot;txt&quot; /&gt;
    &lt;!-- &lt;canvas&gt;&lt;/canvas&gt; --&gt;
    &lt;script&gt;
      const oImg = document.getElementById(&quot;img&quot;)
      const txt = document.getElementById(&quot;txt&quot;)
      //oImg.readyState 图片加载状态
      if (oImg.readyState === &quot;complete&quot;) {
        draw() //true表示已经加载完成 执行draw()方法
      } else {
        //图片加载完成执行draw方法
        oImg.onload = draw
      }

      function draw() {
        //等图片加载完成后再添加canvas画布在上面
        let can = document.createElement(&quot;canvas&quot;) //创建一个canvas画布
        can.width = oImg.width //等于图片的宽高
        can.height = oImg.height
        can.style.position = &quot;absolute&quot; //canvas画布设置浮动会漂浮在图片上
        can.style.left = oImg.offsetLeft + &quot;px&quot; //保存与画布位置一致
        can.style.top = oImg.offsetTop + &quot;px&quot;
        //找到图片的父级：parentNode  在oImg子元素前面添加canvas标签：insertBefore
        oImg.parentNode.insertBefore(can, oImg) //在img前面去插入canvas标签
        let ctx = can.getContext(&quot;2d&quot;)
        ctx.fillStyle = &quot;#bbb&quot; //刮刮乐的颜色
        ctx.fillRect(0, 0, oImg.width, oImg.height) //填充宽度

        //合成:处理合成图片的透明样式；
        //拖拽的时候，canvas图层显示透明；destination-out：新图形与原图形重叠部分透明
        ctx.globalCompositeOperation = &quot;destination-out&quot;
        ctx.strokeStyle = &quot;#eee&quot; //触笔的颜色 随便  因为它终究变成透明
        ctx.lineWidth = 30 //拖动时开始画线的线宽
        ctx.lineCap = &quot;round&quot; //这两步是把画笔变成圆形

        //按下，移动，抬起事件
        can.onmousedown = function (e) {
          e = e || window.event //兼容低版本IE浏览器
          //e.pageX距离文档右边缘； offsetLeft：canvas画布距离文档的右边距离
          let x = e.pageX - can.offsetLeft //得到的x是在canvas上的坐标值
          let y = e.pageY - can.offsetTop
          ctx.beginPath()
          // ctx.moveTo(  x,y )//从哪里开始来画
          ctx.arc(x, y, 15, 0, 6.3, false) //点第一下是画一个圆
          ctx.fill()
          //按下后拖拽
          can.onmousemove = function (e) {
            //拖动时一直执行下面
            e = e || window.event //兼容低版本IE浏览器
            ctx.beginPath() //拖动时开始画线
            ctx.moveTo(x, y) //起始点
            ctx.lineTo(e.pageX - can.offsetLeft, e.pageY - can.offsetTop) //移动的过程

            //每次移动的时候，样式所在的坐标；
            x = e.pageX - can.offsetLeft //第二次渲染刮图片效果的起始点应该在上一次的终止点
            y = e.pageY - can.offsetTop
            ctx.stroke() //弹出图形并恢复画布
          }
          document.onmouseup = function () {
            //抬起后将事件注销
            can.onmousemove = null
            this.onmouseup = null
            check() //完成后通过像素计算刮过的的百分比
          }
        }
        function check() {
          //获取画布的像素列表
          let data = ctx.getImageData(0, 0, can.width, can.height).data
          let n = 0 //计算透明像素的个数
          for (let i = 0; i &lt; data.length; i += 4) {
            //感觉这一步比较消耗性能
            //RGBA
            if (
              data[i] == 0 &amp;&amp;
              data[i + 1] == 0 &amp;&amp;
              data[i + 2] == 0 &amp;&amp;
              data[i + 3] == 0
            ) {
              n++
            }
          }
          let f = (n * 100) / (can.width * can.height) //算出所刮的面积的占比；
          txt.value = `刮开面积:${f.toFixed(2)}%`
          //刮开面积的比例
          if (f &gt; 30) {
            //如果所刮的面积大于30%   则将canvas画布整体清除fillRect
            ctx.beginPath()
            ctx.fillRect(0, 0, can.width, can.height)
            txt.value = &quot;刮开面积大于30%，全部显示&quot;
          }
        }
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="swiper轮播图组件"><a href="#swiper轮播图组件" class="headerlink" title="swiper轮播图组件"></a>swiper轮播图组件</h2><blockquote>
<p>拖拽、回弹物料效果是参照开源项目swiper.js做的<br><code>`</code>javascript<br>/**</p>
<ul>
<li>轮播组件</li>
<li>@param {object} params 配置传参</li>
<li>@param {string} params.el 组件节点 class|id|<label></label></li>
<li>@param {number} params.moveTime 过渡时间（毫秒）默认 300</li>
<li>@param {number} params.interval 自动播放间隔（毫秒）默认 3000</li>
<li>@param {boolean} params.loop 是否需要回路</li>
<li>@param {boolean} params.vertical 是否垂直滚动</li>
<li>@param {boolean} params.autoPaly 是否需要自动播放</li>
<li>@param {boolean} params.pagination 是否需要底部圆点</li>
<li>@param {(index: number) =&gt; void} params.slideCallback 滑动/切换结束回调</li>
<li>@author <a href="https://github.com/Hansen-hjs" target="_blank" rel="noopener">https://github.com/Hansen-hjs</a></li>
<li>@description </li>
<li>移动端<code>swiper</code>组件，如果需要兼容<code>pc</code>自行修改对应的<code>touch</code>到<code>mouse</code>事件即可。现成效果预览：<a href="https://huangjingsheng.gitee.io/hjs/cv/demo/face/" target="_blank" rel="noopener">https://huangjingsheng.gitee.io/hjs/cv/demo/face/</a><br>*/<br>function swiper(params) {<br> /**<ul>
<li>css class 命名列表</li>
<li>@dec [&quot;滑动列表&quot;,&quot;滑动item&quot;,&quot;圆点容器&quot;,&quot;底部圆点&quot;,&quot;圆点高亮&quot;]<br><em>/<br>const classNames = [&quot;.swiper_list&quot;, &quot;.swiper_item&quot;, &quot;.swiper_pagination&quot;, &quot;.swiper_dot&quot;, &quot;.swiper_dot_active&quot;];<br>/** 滑动结束函数 </em>/<br>const slideEnd = params.slideCallback || function() {};<br>/**</li>
<li>组件节点</li>
<li>@type {HTMLElement}<br>*/<br>let node = null;<br>/**</li>
<li>item列表容器</li>
<li>@type {HTMLElement}<br>*/<br>let nodeItem = null;<br>/**</li>
<li>item节点列表</li>
<li>@type {Array<htmlelement>}<br>*/<br>let nodeItems = [];<br>/**</htmlelement></li>
<li>圆点容器</li>
<li>@type {HTMLElement}<br>*/<br>let nodePagination = null;<br>/**</li>
<li>圆点节点列表</li>
<li>@type {Array<htmlelement>}<br><em>/<br>let nodePaginationItems = [];<br>/** 是否需要底部圆点 </em>/<br>let pagination = false;<br>/<strong> 是否需要回路 */<br>let isLoop = false;<br>/</strong> 方向 <code>X =&gt; true</code> | <code>Y =&gt; false</code> <em>/<br>let direction = false;<br>/** 是否需要自动播放 </em>/<br>let autoPaly = false;<br>/<strong> 自动播放间隔（毫秒）默认 3000 */<br>let interval = 3000;<br>/</strong> 过渡时间（毫秒）默认 300 */<br>let moveTime = 300;</htmlelement></li>
</ul>
</li>
</ul>
</blockquote>
<pre><code>/** 设置动画 */
function startAnimation() {
    nodeItem.style.transition = `${moveTime / 1000}s all`; 
}

/** 关闭动画 */
function stopAnimation() {
    nodeItem.style.transition = &quot;0s all&quot;;
}

/**
 * 属性样式滑动
 * @param {number} n 移动的距离
 */
function slideStyle(n) {
    let x = 0, y = 0;
    if (direction) {
        y = n;
    } else {
        x = n;
    }
    nodeItem.style.transform = `translate3d(${x}px, ${y}px, 0px)`;
}

/**
 * 事件开始
 * @param {number} width 滚动容器的宽度
 * @param {number} height 滚动容器的高度
 */
function main(width, height) {
    /**
     * 动画帧
     * @type {requestAnimationFrame}
     */
    const animation = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
    /** 触摸开始时间 */
    let startTime = 0;
    /** 触摸结束时间 */
    let endTime = 0;
    /** 开始的距离 */
    let startDistance = 0;
    /** 结束的距离 */
    let endDistance = 0;
    /** 结束距离状态 */
    let endState = 0;
    /** 移动的距离 */
    let moveDistance = 0;
    /** 圆点位置 &amp;&amp; 当前 item 索引 */
    let index = 0;
    /** 动画帧计数 */
    let count = 0;
    /** loop 帧计数 */
    let loopCount = 0;
    /** 移动范围 */
    let range = direction ? height : width;

    /** 获取拖动距离 */
    function getDragDistance() {
        /** 拖动距离 */
        let dragDistance = 0;
        // 默认这个公式
        dragDistance = moveDistance + (endDistance - startDistance);
        // 判断最大正负值
        if ((endDistance - startDistance) &gt;= range) {
            dragDistance = moveDistance + range;
        } else if ((endDistance - startDistance) &lt;= -range) {
            dragDistance = moveDistance - range;
        }
        // 没有 loop 的时候惯性拖拽
        if (!isLoop) {
            if ((endDistance - startDistance) &gt; 0 &amp;&amp; index === 0) {
                // console.log(&quot;到达最初&quot;);
                dragDistance = moveDistance + ((endDistance - startDistance) - ((endDistance - startDistance) * 0.6));
            } else if ((endDistance - startDistance) &lt; 0 &amp;&amp; index === nodeItems.length - 1) {
                // console.log(&quot;到达最后&quot;);
                dragDistance = moveDistance + ((endDistance - startDistance) - ((endDistance - startDistance) * 0.6));
            }
        }
        return dragDistance;
    }

    /**
     * 判断触摸处理函数 
     * @param {number} slideDistance 滑动的距离
     */
    function judgeTouch(slideDistance) {
        //    这里我设置了200毫秒的有效拖拽间隔
        if ((endTime - startTime) &lt; 200) return true;
        // 这里判断方向（正值和负值）
        if (slideDistance &lt; 0) {
            if ((endDistance - startDistance) &lt; (slideDistance / 2)) return true;
            return false;
        } else {
            if ((endDistance - startDistance) &gt; (slideDistance / 2)) return true;
            return false;
        }
    }

    /** 返回原来位置 */
    function backLocation() {
        startAnimation();
        slideStyle(moveDistance);
    }

    /**
     * 滑动
     * @param {number} slideDistance 滑动的距离
     */
    function slideMove(slideDistance) {
        startAnimation();
        slideStyle(slideDistance);
        loopCount = 0;
        // 判断 loop 时回到第一张或最后一张
        if (isLoop &amp;&amp; index &lt; 0) {
            // 我这里是想让滑块过渡完之后再重置位置所以加的延迟 (之前用setTimeout，快速滑动有问题，然后换成 requestAnimationFrame解决了这类问题)
            function loopMoveMin() {
                loopCount += 1;
                if (loopCount &lt; moveTime / 1000 * 60) return animation(loopMoveMin);
                stopAnimation();
                slideStyle(range * -(nodeItems.length - 3));
                // 重置一下位置
                moveDistance = range * -(nodeItems.length - 3);
            }
            loopMoveMin();
            index = nodeItems.length - 3;
        } else if (isLoop &amp;&amp; index &gt; nodeItems.length - 3) {
            function loopMoveMax() {
                loopCount += 1;
                if (loopCount &lt; moveTime / 1000 * 60) return animation(loopMoveMax);
                stopAnimation();
                slideStyle(0);
                moveDistance = 0;
            }
            loopMoveMax();
            index = 0;
        }
        // console.log(`第${ index+1 }张`);    // 这里可以做滑动结束回调
        if (pagination) {
            nodePagination.querySelector(classNames[4]).className = classNames[3].slice(1);
            nodePaginationItems[index].classList.add(classNames[4].slice(1));
        }
    }

    /** 判断移动 */
    function judgeMove() {
        // 判断是否需要执行过渡
        if (endDistance &lt; startDistance) {
            // 往上滑动 or 向左滑动
            if (judgeTouch(-range)) {
                // 判断有loop的时候不需要执行下面的事件
                if (!isLoop &amp;&amp; moveDistance === (-(nodeItems.length - 1) * range)) return backLocation();
                index += 1;
                slideMove(moveDistance - range);
                moveDistance -= range;
                slideEnd(index);
            } else {
                backLocation();
            }
        } else {
            // 往下滑动 or 向右滑动
            if (judgeTouch(range)) {
                if (!isLoop &amp;&amp; moveDistance === 0) return backLocation();
                index -= 1;
                slideMove(moveDistance + range);
                moveDistance += range;
                slideEnd(index)
            } else {
                backLocation();
            }
        }
    }

    /** 自动播放移动 */
    function autoMove() {
        // 这里判断 loop 的自动播放
        if (isLoop) {
            index += 1;
            slideMove(moveDistance - range);
            moveDistance -= range;
        } else {
            if (index &gt;= nodeItems.length - 1) {
                index = 0;
                slideMove(0);
                moveDistance = 0;
            } else {
                index += 1;
                slideMove(moveDistance - range);
                moveDistance -= range;
            }
        }
        slideEnd(index);
    }

    /** 开始自动播放 */
    function startAuto() {
        count += 1;
        if (count &lt; interval / 1000 * 60) return animation(startAuto);
        count = 0;
        autoMove();
        startAuto();
    }

    // 判断是否需要开启自动播放
    if (autoPaly &amp;&amp; nodeItems.length &gt; 1) startAuto();

    // 开始触摸
    nodeItem.addEventListener(&quot;touchstart&quot;, ev =&gt; {
        startTime = Date.now();
        count = 0;
        loopCount = moveTime / 1000 * 60;
        stopAnimation();
        startDistance = direction ? ev.touches[0].clientY : ev.touches[0].clientX;
    });

    // 触摸移动
    nodeItem.addEventListener(&quot;touchmove&quot;, ev =&gt; {
        ev.preventDefault();
        count = 0;
        endDistance = direction ? ev.touches[0].clientY : ev.touches[0].clientX;
        slideStyle(getDragDistance());
    });

    // 触摸离开
    nodeItem.addEventListener(&quot;touchend&quot;, () =&gt; {
        endTime = Date.now();
        // 判断是否点击
        if (endState !== endDistance) {
            judgeMove();
        } else {
            backLocation();
        }
        // 更新位置 
        endState = endDistance;
        // 重新打开自动播
        count = 0;
    });
}

/**
 * 输出回路：如果要回路的话前后增加元素
 * @param {number} width 滚动容器的宽度
 * @param {number} height 滚动容器的高度
 */
function outputLoop(width, height) {
    const first = nodeItems[0].cloneNode(true), last = nodeItems[nodeItems.length - 1].cloneNode(true);
    nodeItem.insertBefore(last, nodeItems[0]);
    nodeItem.appendChild(first);
    nodeItems.unshift(last);
    nodeItems.push(first);
    if (direction) {
        nodeItem.style.top = `${-height}px`;
    } else {
        nodeItem.style.left = `${-width}px`;
    }
}

/**
 * 输出动态布局
 * @param {number} width 滚动容器的宽度
 * @param {number} height 滚动容器的高度
 */
function outputLayout(width, height) {
    if (direction) {
        for (let i = 0; i &lt; nodeItems.length; i++) {
            nodeItems[i].style.height = `${height}px`;
        }
    } else {
        nodeItem.style.width = `${width * nodeItems.length}px`;
        for (let i = 0; i &lt; nodeItems.length; i++) {
            nodeItems[i].style.width = `${width}px`;
        }
    }
}

/** 输出底部圆点 */
function outputPagination() {
    let paginations = &quot;&quot;;
    nodePagination = node.querySelector(classNames[2]);
    // 如果没有找到对应节点则创建一个
    if (!nodePagination) {
        nodePagination = document.createElement(&quot;div&quot;);
        nodePagination.className = classNames[2].slice(1);
        node.appendChild(nodePagination);
    }
    for (let i = 0; i &lt; nodeItems.length; i++) {
        paginations += `&lt;div class=&quot;${classNames[3].slice(1)}&quot;&gt;&lt;/div&gt;`;
    }
    nodePagination.innerHTML = paginations;
    nodePaginationItems = [...nodePagination.querySelectorAll(classNames[3])];
    nodePagination.querySelector(classNames[3]).classList.add(classNames[4].slice(1));
}

/** 初始化动态布局 */
function initLayout() {
    node = document.querySelector(params.el);
    if (!node) return console.warn(&quot;没有可执行的节点！&quot;);
    nodeItem = node.querySelector(classNames[0]);
    if (!nodeItem) return console.warn(`缺少&quot;${classNames[0]}&quot;节点！`);
    nodeItems = [...node.querySelectorAll(classNames[1])];
    if (nodeItems.length == 0) return console.warn(&quot;滑动节点个数必须大于0！&quot;);
    const moveWidth = node.offsetWidth, moveHeight = node.offsetHeight;
    if (pagination) outputPagination();
    if (isLoop) outputLoop(moveWidth, moveHeight);
    outputLayout(moveWidth, moveHeight);
    main(moveWidth, moveHeight);
}

/** 初始化参数 */
function initParams() {
    if (typeof params !== &quot;object&quot;) return console.warn(&quot;传参有误&quot;);
    pagination = params.pagination || false;
    direction = params.vertical || false;
    autoPaly = params.autoPaly || false;
    isLoop = params.loop || false;
    moveTime = params.moveTime || 300;
    interval = params.interval || 3000;
    initLayout();
}
initParams();
</code></pre><p>}</p>
<pre><code>
## 图片懒加载
&gt;非传统实现方式，性能最优
```javascript
/**
 * 懒加载
 * @description 可加载`&lt;img&gt;`、`&lt;video&gt;`、`&lt;audio&gt;`等一些引用资源路径的标签
 * @param {object} params 传参对象
 * @param {string?} params.lazyAttr 自定义加载的属性（可选）
 * @param {&quot;src&quot;|&quot;background&quot;} params.loadType 加载的类型（默认为`src`）
 * @param {string?} params.errorPath 加载失败时显示的资源路径，仅在`loadType`设置为`src`中可用（可选）
 */
function lazyLoad(params) {
    const attr = params.lazyAttr || &quot;lazy&quot;;
    const type = params.loadType || &quot;src&quot;;

    /** 更新整个文档的懒加载节点 */
    function update() {
        const els = document.querySelectorAll(`[${attr}]`);
        for (let i = 0; i &lt; els.length; i++) {
            const el = els[i];
            observer.observe(el);
        }
    }

    /**
     * 加载图片
     * @param {HTMLImageElement} el 图片节点
     */
    function loadImage(el) {
        const cache = el.src; // 缓存当前`src`加载失败时候用
        el.src = el.getAttribute(attr);
        el.onerror = function () {
            el.src = params.errorPath || cache;
        }
    }

    /**
     * 加载单个节点
     * @param {HTMLElement} el 
     */
    function loadElement(el) {
        switch (type) {
            case &quot;src&quot;:
                loadImage(el);
                break;
            case &quot;background&quot;:
                el.style.backgroundImage = `url(${el.getAttribute(attr)})`;
                break;
        }
        el.removeAttribute(attr);
        observer.unobserve(el);
    }

    /** 
     * 监听器 
     * [MDN说明](https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver)
    */
    const observer = new IntersectionObserver(function(entries) {
        for (let i = 0; i &lt; entries.length; i++) {
            const item = entries[i];
            if (item.isIntersecting) {
                loadElement(item.target);
            }
        }
    })

    update();

    return {
        observer,
        update
    }
}

</code></pre><p>在vue中使用指令去使用</p>
<pre><code class="javascript">import Vue from &quot;vue&quot;;

/** 添加一个加载`src`的指令 */
const lazySrc = lazyLoad({
    lazyAttr: &quot;vlazy&quot;,
    errorPath: &quot;./img/error.jpg&quot;
})

Vue.directive(&quot;v-lazy&quot;, {
    inserted(el, binding) {
        el.setAttribute(&quot;vlazy&quot;, binding.value); // 跟上面的对应
        lazySrc.observer.observe(el);
    }
})

/** 添加一个加载`background`的指令 */
const lazyBg = lazyLoad({
    lazyAttr: &quot;vlazybg&quot;,
    loadType: &quot;background&quot;
})

Vue.directive(&quot;v-lazybg&quot;, {
    inserted(el, binding) {
        el.setAttribute(&quot;vlazybg&quot;, binding.value); // 跟上面的对应
        lazyBg.observer.observe(el);
    }
})


</code></pre>
<h2 id="上传图片"><a href="#上传图片" class="headerlink" title="上传图片"></a>上传图片</h2><pre><code class="html">&lt;!-- 先准备好一个input标签，然后设置type=&quot;file&quot;，最后挂载一个onchange事件 --&gt;
&lt;input class=&quot;upload-input&quot; type=&quot;file&quot; name=&quot;picture&quot; onchange=&quot;upLoadImage(this)&quot;&gt;
</code></pre>
<pre><code class="javascript">/**
 * input上传图片
 * @param {HTMLInputElement} el 
 */
function upLoadImage(el) {
    /** 上传文件 */
    const file = el.files[0];
    /** 上传类型数组 */
    const types = [&quot;image/jpg&quot;, &quot;image/png&quot;, &quot;image/jpeg&quot;, &quot;image/gif&quot;];
    // 判断文件类型
    if (types.indexOf(file.type) &lt; 0) {
        file.value = null; // 这里一定要清空当前错误的内容
        return alert(&quot;文件格式只支持：jpg 和 png&quot;);
    }
    // 判断大小
    if (file.size &gt; 2 * 1024 * 1024) {
        file.value = null;
        return alert(&quot;上传的文件不能大于2M&quot;);
    }

    const formData = new FormData();    // 这个是传给后台的数据
    formData.append(&quot;img&quot;, file);       // 这里`img`是跟后台约定好的`key`字段
    console.log(formData, file);
    // 最后POST给后台，这里我用上面的方法
    ajax({
        url: &quot;http://xxx.com/uploadImg&quot;,
        method: &quot;POST&quot;,
        data: {},
        formData: formData,
        overtime: 5000,
        success(res) {
            console.log(&quot;上传成功&quot;, res);
        },
        fail(err) {
            console.log(&quot;上传失败&quot;, err);
        },
        timeout() {
            console.warn(&quot;XMLHttpRequest 请求超时 !!!&quot;);
        }
    });
}

</code></pre>
<p><a href="https://github.com/Hansen-hjs/my-note/blob/master/JavaScript/upload-img.html" target="_blank" rel="noopener">base64转换和静态预览</a></p>
<h2 id="下拉刷新组件"><a href="#下拉刷新组件" class="headerlink" title="下拉刷新组件"></a>下拉刷新组件</h2><blockquote>
<p>拖拽效果参考上面swiper的实现方式，下拉中的效果是可以自己定义的<br><code>`</code>javascript<br>// 这里我做的不是用 window 的滚动事件，而是用最外层的绑定触摸下拉事件去实现<br>// 好处是我用在Vue这类单页应用的时候，组件销毁时不用去解绑 window 的 scroll 事件<br>// 但是滑动到底部事件就必须要用 window 的 scroll 事件，这点需要注意</p>
</blockquote>
<p>/**</p>
<ul>
<li>下拉刷新组件</li>
<li>@param {object} option 配置</li>
<li>@param {HTMLElement} option.el 下拉元素（必选）</li>
<li>@param {number} option.distance 下拉距离[px]（可选）</li>
<li>@param {number} option.deviation 顶部往下偏移量[px]（可选）</li>
<li><p>@param {string} option.loadIcon 下拉中的 icon html（可选）<br><em>/<br>function dropDownRefresh(option) {<br> const doc = document;<br> /** 整体节点 </em>/<br> const page = option.el;<br> /<strong> 下拉距离 */<br> const distance = option.distance || 88;<br> /</strong> 顶部往下偏移量 <em>/<br> const deviation = option.deviation || 0;<br> /** 顶层节点 </em>/<br> const topNode = doc.createElement(&quot;div&quot;);<br> /*<em> 下拉时遮罩 </em>/<br> const maskNode = doc.createElement(&quot;div&quot;);</p>
<p> topNode.innerHTML = <code>&lt;div refresh-icon style=&quot;transition: .2s all;&quot;&gt;&lt;svg style=&quot;transform: rotate(90deg); display: block;&quot; t=&quot;1570593064555&quot; viewBox=&quot;0 0 1575 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;26089&quot; width=&quot;48&quot; height=&quot;48&quot;&gt;&lt;path d=&quot;M1013.76 0v339.968H484.115692V679.778462h529.644308v339.968l529.644308-485.612308v-48.600616L1013.76 0zM243.396923 679.857231h144.462769V339.968H243.396923V679.778462z m-240.797538 0h144.462769V339.968H2.599385V679.778462z&quot; fill=&quot;#000000&quot; fill-opacity=&quot;.203&quot; p-id=&quot;26090&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div refresh-loading style=&quot;display: none; animation: refresh-loading 1s linear infinite;&quot;&gt;${option.loadIcon || &#39;&lt;p style=&quot;font-size: 15px; color: #666;&quot;&gt;loading...&lt;/p&gt;&#39;}&lt;/div&gt;</code>;<br> topNode.style.cssText = <code>width: 100%; height: ${distance}px; position: fixed; top: ${-distance + deviation}px; left: 0; z-index: 10; display: flex; flex-wrap: wrap; align-items: center; justify-content: center; box-sizing: border-box; margin: 0; padding: 0;</code>;<br> maskNode.style.cssText = &quot;position: fixed; top: 0; left: 0; width: 100%; height: 100vh; box-sizing: border-box; margin: 0; padding: 0; background-color: rgba(0,0,0,0); z-index: 999;&quot;;<br> page.parentNode.insertBefore(topNode, page);</p>
<p> /**</p>
<ul>
<li>设置动画时间</li>
<li><p>@param {number} n 秒数<br>*/<br>function setAnimation(n) {<br> page.style.transition = topNode.style.transition = n + &quot;s all&quot;;<br>}</p>
<p>/**</p>
</li>
<li>设置滑动距离</li>
<li><p>@param {number} n 滑动的距离（像素）<br>*/<br>function setSlide(n) {<br> page.style.transform = topNode.style.transform = <code>translate3d(0px, ${n}px, 0px)</code>;<br>}</p>
<p>/<strong> 下拉提示 icon */<br>const icon = topNode.querySelector(&quot;[refresh-icon]&quot;);<br>/</strong> 下拉 loading 动画 */<br>const loading = topNode.querySelector(&quot;[refresh-loading]&quot;);</p>
<p>return {<br> /**</p>
<ul>
<li>监听开始刷新</li>
<li>@param {Function} callback 下拉结束回调</li>
<li><p>@param {(n: number) =&gt; void} rangeCallback 下拉状态回调<br><em>/<br>onRefresh(callback, rangeCallback = null) {<br> /** 顶部距离 </em>/<br> let scrollTop = 0;<br> /<strong> 开始距离 */<br> let startDistance = 0;<br> /</strong> 结束距离 <em>/<br> let endDistance = 0;<br> /** 最后移动的距离 </em>/<br> let range = 0;</p>
<p> // 触摸开始<br> page.addEventListener(&quot;touchstart&quot;, function (e) {</p>
<pre><code> startDistance = e.touches[0].pageY;
 scrollTop = 1;
 setAnimation(0);
</code></pre><p> });</p>
<p> // 触摸移动<br> page.addEventListener(&quot;touchmove&quot;, function (e) {</p>
<pre><code> scrollTop = doc.documentElement.scrollTop === 0 ? doc.body.scrollTop : doc.documentElement.scrollTop;
 // 没到达顶部就停止
 if (scrollTop != 0) return;
 endDistance = e.touches[0].pageY;
 range = Math.floor(endDistance - startDistance);
 // 判断如果是下滑才执行
 if (range &gt; 0) {
     // 阻止浏览自带的下拉效果
     e.preventDefault();
     // 物理回弹公式计算距离
     range = range - (range * 0.5);
     // 下拉时icon旋转
     if (range &gt; distance) {
         icon.style.transform = &quot;rotate(180deg)&quot;;
     } else {
         icon.style.transform = &quot;rotate(0deg)&quot;;
     }
     setSlide(range);
     // 回调距离函数 如果有需要
     if (typeof rangeCallback === &quot;function&quot;) rangeCallback(range);
 }
</code></pre><p> });</p>
<p> // 触摸结束<br> page.addEventListener(&quot;touchend&quot;, function () {</p>
<pre><code> setAnimation(0.3);
 // console.log(`移动的距离：${range}, 最大距离：${distance}`);
 if (range &gt; distance &amp;&amp; range &gt; 1 &amp;&amp; scrollTop === 0) {
     setSlide(distance);
     doc.body.appendChild(maskNode);
     // 阻止往上滑动
     maskNode.ontouchmove = e =&gt; e.preventDefault();
     // 回调成功下拉到最大距离并松开函数
     if (typeof callback === &quot;function&quot;) callback();
     icon.style.display = &quot;none&quot;;
     loading.style.display = &quot;block&quot;;
 } else {
     setSlide(0);
 }
</code></pre><p> });</p>
<p>},<br>/*<em> 结束下拉 </em>/<br>end() {<br> maskNode.parentNode.removeChild(maskNode);<br> setAnimation(0.3);<br> setSlide(0);<br> icon.style.display = &quot;block&quot;;<br> loading.style.display = &quot;none&quot;;<br>}<br>}<br>}</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>
## 监听滚动到底部
```javascript
/**
 * 监听滚动到底部
 * @param {object} options 传参对象
 * @param {number} options.distance 距离底部多少像素触发（px）
 * @param {boolean} options.once 是否为一次性（防止重复用）
 * @param {() =&gt; void} options.callback 到达底部回调函数
 */
function onScrollToBottom(options) {
    const { distance = 0, once = false, callback = null } = options;
    const doc = document;
    /** 滚动事件 */
    function onScroll() {
        /** 滚动的高度 */
        let scrollTop = doc.documentElement.scrollTop === 0 ? doc.body.scrollTop : doc.documentElement.scrollTop;
        /** 滚动条高度 */
        let scrollHeight = doc.documentElement.scrollTop === 0 ? doc.body.scrollHeight : doc.documentElement.scrollHeight;
        if (scrollHeight - scrollTop - distance &lt;= window.innerHeight) {
            if (typeof callback === &quot;function&quot;) callback();
            if (once) window.removeEventListener(&quot;scroll&quot;, onScroll);
        }
    }
    window.addEventListener(&quot;scroll&quot;, onScroll);
    // 必要时先执行一次
    // onScroll(); 
}

</code></pre><h2 id="音频播放组件"><a href="#音频播放组件" class="headerlink" title="音频播放组件"></a>音频播放组件</h2><pre><code class="javascript">/**
 * `AudioContext`音频组件 
 * [资料参考](https://www.cnblogs.com/Wayou/p/html5_audio_api_visualizer.html)
 * @description 解决在移动端网页上标签播放音频延迟的方案 貌似`H5`游戏引擎也是使用这个实现
 */
function audioComponent() {
    /**
     * 音频上下文
     * @type {AudioContext}
     */
    const context = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext)();
    /** 
     * @type {AnalyserNode} 
     */
    const analyser = context.createAnalyser();;
    /**
     * @type {AudioBufferSourceNode}
     */
    let bufferNode = null;
    /**
     * @type {AudioBuffer}
     */
    let buffer = null;
    /** 是否加载完成 */
    let loaded = false;

    analyser.fftSize = 256;

    return {
        /**
         * 加载路径音频文件
         * @param {string} url 音频路径
         * @param {(res: AnalyserNode) =&gt; void} callback 加载完成回调
         */
        loadPath(url, callback) {
            const XHR = new XMLHttpRequest(); 
            XHR.open(&quot;GET&quot;, url, true); 
            XHR.responseType = &quot;arraybuffer&quot;; 
            // 先加载音频文件
            XHR.onload = () =&gt; {
                context.decodeAudioData(XHR.response, audioBuffer =&gt; {
                    // 最后缓存音频资源
                    buffer = audioBuffer;
                    loaded = true;
                    typeof callback === &quot;function&quot; &amp;&amp; callback(analyser);
                });
            }
            XHR.send(null);
        },

        /** 
         * 加载 input 音频文件
         * @param {File} file 音频文件
         * @param {(res: AnalyserNode) =&gt; void} callback 加载完成回调
         */
        loadFile(file, callback) {
            const FR = new FileReader();
            // 先加载音频文件
            FR.onload = e =&gt; {
                const res = e.target.result;
                // 然后解码
                context.decodeAudioData(res, audioBuffer =&gt; {
                    // 最后缓存音频资源
                    buffer = audioBuffer;
                    loaded = true;
                    typeof callback === &quot;function&quot; &amp;&amp; callback(analyser);
                });
            }
            FR.readAsArrayBuffer(file);
        },

        /** 播放音频 */
        play() {
            if (!loaded) return console.warn(&quot;音频未加载完成 !!!&quot;);
            // 这里有个问题，就是创建的音频对象不能缓存下来然后多次执行 start , 所以每次都要创建然后 start()
            bufferNode = context.createBufferSource();
            bufferNode.connect(analyser);
            analyser.connect(context.destination);
            bufferNode.buffer = buffer;
            bufferNode.start(0);
        },

        /** 停止播放 */
        stop() {
            if (!bufferNode) return console.warn(&quot;音频未播放 !!!&quot;);
            bufferNode.stop();
        }
    }
}

</code></pre>
<h2 id="全局监听图片错误并替换到默认图片"><a href="#全局监听图片错误并替换到默认图片" class="headerlink" title="全局监听图片错误并替换到默认图片"></a>全局监听图片错误并替换到默认图片</h2><pre><code class="javascript">window.addEventListener(&quot;error&quot;, e =&gt; {
    /** 默认`base64`图片 */
    const defaultImg = &#39;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAACACAYAAADzsnDqAAANXElEQVR4Xu2dDYxcVRXHz3mz0FgjICBSgkZAQD5CwQ+Qz4BBBUEkUJpK0FAUYmms2O47d7oSmYbYnXfeLIXl01ojBAnSokRQQIWAIvEjkfBhUZGPEkMFDajgbjdu5x1zYVpmd2d25r1335uZzrkJIenec869//ubO/Pux3kIWlSBHBTAHGJoCFUAFDSFIBcFFLRcZNYgCpoykIsCClouMmsQBU0ZyEUBBS0XmTWIgqYM5KKAgpaLzBpEQVMGclFAQctFZg2ioCkDuSigoOUiswbJHLTR0dE5W7ZsWQAAB6rcnVMAETcj4vO+7z/QiVZkCtrIyMhB1Wr12wBwcic6pzFnKiAiq4wxpby1yRS0IAhuR8RFeXdK47VUYCERbWhZy2GFzEBbs2bNvMnJyc0O26qu3CnwJBHNd+eutafMQBseHj65UCg81LoJWqMTChBRZmPfqD+ZBVPQOoFP+zEVtPa10popFFDQUoinpu0r0E+gPVytVle1L43WjKNAoVC4YrZlpb4CjYhOiSOe1m1fAWa2D2JN1y8VtPa11JqzKKCgvS3OwzqjZfdZUdAUtOzoqvOsoCloCppLBdpYsNWvTpeCT/OlM5rOaBni9bZrBU1BU9BcKqBfnS7VjO9LZzSd0eJTk8BCQVPQEmAT30RBU9DiU5PAQkFT0BJgE99EQVPQ4lOTwEJBU9ASYBPfREFT0OJTk8BCQVPQEmAT30RBU9DiU5PAQkFT0BJgE99EQesgaMy8NxG9HH/Yes9CQesQaOVy+f2e560koiW9h038FitoHQKNmb8LABeJSNEYE8Qfut6yUNA6ABozfwoAfmZDi8gEIl5IRHf0FjrxWqugdQC0MAwfFZHj6obqT4i42Pf938Ubvt6praDlDFoQBMsQ8ZrpiCDifWNjYwtKpdJ47+DTfksVtBxBC8NwLxH5MwC8u8kQ3UhEl7Y/fL1TU0HLF7TrRaQVSIaIuHcQaq+lClpOoJXL5ZM8z/tlG8MyHkXR4mKxuL6Nuj1TRUHLCTRmfhAAPtEmGU9v3br13KGhIfs1u0MUBS0H0Jj5EgCwSZrjlHuJ6Iw4Bt1cV0HLGLTR0dFdtmzZ8gwivjcuCCJygzFmaVy7bqyvoGUMWhiGIyKyPMXg+0RUSWHfFabMfJ6IHIaIhwKA/e+w+oZp2qoUwxQEwdGImHYRdgwAziGin6doSteZhmF4eBRFi2rp+A9Q0FIMETP/FAA+k8LFNtONY2Njx61atep1B766zgUzn0tEP8yzYZ3Myu00yQszfxEAbnEo3k+I6LMO/fW1qx0CtFKptPPcuXOfBYD3uRxNRLzO9/2vuvTZr752CNCY+VsAMJTRIF5MROsy8h3b7erVq/fwPG8fz/PmAcA+iDhPRP4LAPZA58sDAwN/nzNnzstLly61/9Y1pedBC8PwCBF5IitF7SB6nnes7/t/zCrGbH5rs7X9Cj8TAOz/92izHRtF5E7P8+7rhlMqPQ8aM98FAGe3KX7Sak8R0RFJjZPYMfNpAHABAJwOALsn8VFnsxEAHkDEdZ36wPQ0aOVyeaHneXkdYLyHiM5KOeAtzZn5wwDwNQCwDzeui126ucYem/J9/x+unc/mr6dBY2b7AHBAXoKJyJXGmG9mES8Ign0R0QK2DAB2ziJGnc8XLHBENOOcXlZxexY0ZrYD3ok3r5xBRPe6HJBKpXJSFEVrAeBgl37b8PXAwMDAkuXLl9sPbKalJ0FbvXr1QQMDA3/JVJkmzhHx9UKhsN/y5ctfcxE/DMOFIpLX13+jJr8aRdEXisXifS7608xHT4IWBMEdiLgwS2Fa+HbyYlVmvgoAvt7BftSHXkZE12bVlp4DLQiCsxDxx1kJ0q5fRLzF9/0L260/vR4z311brkjqwrkdIn7e9/0fOHcMAD0HGjM/DQCHZCFGXJ8issQYc1NcuyAIRhAxzQmTuCHbrl8oFI5csWKF83XJngKNmQkAuu3y71FE9Hi7I8nMdhb8Xrv1O1DvbwBwtOvUET0DWi2lwYsdEL5VyP8Q0W6tKtm/l8vl+Z7n2eNHe7VTv0Udg4j3FwqFvyLibpOTk/sDQAgAxzrw7XzNsGdAY+ZbayvlDnR07uIhImp5P4GZ7ekSFwuxixrdtC+VSnPnzp17m6OdkstcrrP1BGj1KQ2cI+LIISIO+77fdGO/tqWUegkBEa/2fb/pkyozHwkA9qWwbc2ys3T/BUT8uKsdhJ4ALQiCxxFxviMmMnMjIp8zxtinyRmFmS1kdv8yVfE875DBwcFZb2sxs/0NmPiJuK6Bq4noG6kaXDPuetDCMLxMRNa46GzWPkTkVGOMveY3pTg8lPkcEX2wVT+Y+csA8J1W9dr4+1htVkt9cqWrQbMpDQBgs4gU2hCl01VeJ6Jdm8xmvwWAYxw0cBMR7dfKj+Mn22uJyO6/pipdDdq2nGapepif8c1EtHh6OHspRESectUMEdnFGPPGbP7CMFwrIhe7iCkizxpjDkzrq2tBi5HSIK0GTuyb/T5jZnsi42onQd7K79bw67nefxiGj4uIs9+01Wr1lJUrVz6cpg9dCxoz/x4APpamcznaVolooMnXpn0CPNlVW0RkyBgz3Mzf6OjonImJiQlX8Wp+RohoMI3PrgQtCIJLEfH6NB3L01ZEfmGMsVklp5Ra2qxXHLflLiI6p5nPSqVyQhRFj7iMKSLPGGNSHWHqOtBsSoOJiQl70eIdLsXK0peI3GaMsceupxRmtuf873Ec+yUi2reZzzAMl4vIiOOY9iu75W/D2WJ2HWjMfCMAfMW1UFn6E5GrjDErGoCWJNlMy6Yi4v6+79tTsjNKEAS3126jt/QTp0KhUDh4xYoVz8Sxqa/bVaCFYXiMiNilgJ4qzTJ9h2F4hYiUXHdGRM4zxtzZyG9Wp1vSPhB0G2iPiMgJrgcma38icpExZsaJDGa2qbPsrOa0NNvuqlQqe0ZR9E+nwd52dj4R3Z7Ud9eA5nA1O6kWie2iKDqzWCzavB9TShiGd4tIFmkVHiSiUxt8Vdu8IzPakbhjdYYiMmiMSfzbrytAq12Stde/Gq6suxAqYx8NL6wws30QsA8Erssb4+Pju5dKpa31jpn5cgC40nUw62+HAC0IAnvXMPU2RxYCt+lzMRHd3GCGsfuNdt/ReRGRY4wxdq1xewmCYAMiLnAe7C3QLjDG2CNIiUrHZ7SRkZGjqtXqY4la3yVGIkLGGHvocEphZju72Fkmi3IpEdkn9O2Fme1TYertokaNbWdHYrZOdhy0MAwfFJGWhwazGClXPhEx9H3fHjOfUjJeeF5HRNv3M8Mw3E9EnnfVp+l+PM87bHBw0N7XSFQ6Clrt7LzLnGaJRHBg1HBDPQiCcxAxq4R3jxHRR7a1vVKpnB1Fkc1DkkkZGBjYI81d1k6DZvOqvicTZfJ12jCjd6VSOTSKIptgJZNSv7YVBEEJEa/IJBDAq0S0ZxrfnQbN2WZzGhHS2orIK8aYvRv5YWZ7aHBKouK08ers38yaOTIyclC1WrW33e0x7ixKwxk7TqBOghannV1fN4qiE4vF4q+nNzTjmcaG2wQANtV9lnvDC9LmvFXQ3CFcISJ/ujtmPhEAfuUuTO6eXhsfH59XKpX+lyaygpZGvam2Tc/zM7O9TJLqmI27Zsb2dBsRzTiZEteLghZXsVnqR1F0WrFYfPNNx/UlCAJ72bfsMFSerj7t4p0LCprbIbuJiJZMd7l+/frCpk2bHnV0QWWbe3u0+nIReRIR7SWeczNIF9GwP0kkU9CSqNbERkTGd9ppp/mNEtsFQbAAETc4CreRiA6f7mt4ePgDhUKh4Tm1uHHtkzQiHk9Ez8W1bVRfQXOhYp2P2dKPMrPdKzw/bUhEPM73/d808sPMNqWXi1y7Tt+JpaClHfWZ9i+Oj48fWSqV/j39T66SvMz2HidHyyk7VJIX90PcPR6bZk90cbnXpofwff/JJjOafZPyeSmk2OHSVqXQortNEfGJycnJTw4NDTU87eogEd8GIpqRWjUMw3eKyGYA2CWpQr2YiG//QqHg5IdkUtE6bDfrtk3a1KIissoYs/0+QrlcPh0RRxGxZW6OZrr0ZGpR2xlmtlsyx3d4wDsWXkSWGmNuaNaAIAjWIeKXUjTwXwDwvIjsmgYwG7/ZBZsUbZtimtnDgI1SS2z8fQB4l6sG95ifLQBwAhE1PdjJzPbV2td1sl+IeInv+y6yDzXtRqag1WD7aO1T+6FOitnJ2PaExWzxXTwgJOzfSyKyzBjzo4T2bZtlDlrbLenzivZWu51ZMro11UjdtTbtRLOnV9fDoaC5VjSlvxyAW+t53trBwcE/pGxqLHMFLZZc+VWu5e1Y5PI1ip7n3Zo3YNsUU9DyYydRpDQvhq3trd6/Q78YNpGqatRSAX3VdUuJtEI/K6Bfnf08+jn2XUHLUex+DqWg9fPo59h3BS1Hsfs5lILWz6OfY98VtBzF7udQClo/j36OfVfQchS7n0MpaP08+jn2XUHLUex+DqWg9fPo59h3BS1Hsfs5lILWz6OfY98VtBzF7udQClo/j36OfVfQchS7n0P9H/gjHdvP/Qy/AAAAAElFTkSuQmCC&#39;;
    /**
     * @type {HTMLImageElement}
     */
    const node = e.target;
    if (node.nodeName &amp;&amp; node.nodeName.toLocaleLowerCase() === &quot;img&quot;) {     
        node.style.objectFit = &quot;cover&quot;;
        node.src = defaultImg;
    }
}, true);

</code></pre>
<h2 id="复制功能"><a href="#复制功能" class="headerlink" title="复制功能"></a>复制功能</h2><p>翻 <code>Clipboard.js</code> 这个插件库源码的时候找到核心代码 <code>setSelectionRange(start: number, end: number)</code>，百度上搜到的复制功能全部都少了这个操作，所以搜到的复制文本代码在 ios 和 IE 等一些浏览器上复制不了。</p>
<pre><code class="javascript">/**
 * 复制文本
 * @param {string} text 复制的内容
 * @param {() =&gt; void} success 成功回调
 * @param {(tip: string) =&gt; void} fail 出错回调
 */
function copyText(text, success = null, fail = null) {
    text = text.replace(/(^\s*)|(\s*$)/g, &quot;&quot;);
    if (!text) {
        typeof fail === &quot;function&quot; &amp;&amp; fail(&quot;复制的内容不能为空！&quot;);
        return;
    }
    const id = &quot;the-clipboard&quot;;
    /**
     * 粘贴板节点
     * @type {HTMLTextAreaElement}
     */
    let clipboard = document.getElementById(id);
    if (!clipboard) {
        clipboard = document.createElement(&quot;textarea&quot;);
        clipboard.id = id;
        clipboard.readOnly = true
        clipboard.style.cssText = &quot;font-size: 15px; position: fixed; top: -1000%; left: -1000%;&quot;;
        document.body.appendChild(clipboard);
    }
    clipboard.value = text;
    clipboard.select();
    clipboard.setSelectionRange(0, text.length);
    const state = document.execCommand(&quot;copy&quot;);
    if (state) {
        typeof success === &quot;function&quot; &amp;&amp; success();
    } else {
        typeof fail === &quot;function&quot; &amp;&amp; fail(&quot;复制失败&quot;);
    }
}

</code></pre>
<h2 id="检测类型"><a href="#检测类型" class="headerlink" title="检测类型"></a>检测类型</h2><pre><code class="javascript">/**
 * 检测类型
 * @param {any} target 检测的目标
 * @returns {&quot;string&quot;|&quot;number&quot;|&quot;array&quot;|&quot;object&quot;|&quot;function&quot;|&quot;null&quot;|&quot;undefined&quot;} 只枚举一些常用的类型
 */
function checkType(target) {
    /** @type {string} */
    const value = Object.prototype.toString.call(target);
    const result = value.match(/\[object (\S*)\]/)[1];
    return result.toLocaleLowerCase();
}

</code></pre>
<h2 id="格式化日期（代码极少版）"><a href="#格式化日期（代码极少版）" class="headerlink" title="格式化日期（代码极少版）"></a>格式化日期（代码极少版）</h2><pre><code class="javascript">/**
 * 获取指定日期时间戳
 * @param {number} time 毫秒数
 */
function getDateFormat(time = Date.now()) {
    const date = new Date(time);
    return `${date.toLocaleDateString()} ${date.toTimeString().slice(0, 8)}`;
}

</code></pre>
<h2 id="js小数精度计算"><a href="#js小数精度计算" class="headerlink" title="js小数精度计算"></a>js小数精度计算</h2><pre><code class="javascript">/**
 * 数字运算（主要用于小数点精度问题）
 * @param {number} a 前面的值
 * @param {&quot;+&quot;|&quot;-&quot;|&quot;*&quot;|&quot;/&quot;} type 计算方式
 * @param {number} b 后面的值
 * @example 
 * ```js
 * // 可链式调用
 * const res = computeNumber(1.3, &quot;-&quot;, 1.2).next(&quot;+&quot;, 1.5).next(&quot;*&quot;, 2.3).next(&quot;/&quot;, 0.2).result;
 * console.log(res);
 *
</code></pre>
<p> */<br>function computeNumber(a, type, b) {<br>    /**</p>
<pre><code> * 获取数字小数点的长度
 * @param {number} n 数字
 */
function getDecimalLength(n) {
    const decimal = n.toString().split(&quot;.&quot;)[1];
    return decimal ? decimal.length : 0;
}
/**
 * 修正小数点
 * @description 防止出现 `33.33333*100000 = 3333332.9999999995` &amp;&amp; `33.33*10 = 333.29999999999995` 这类情况做的处理
 * @param {number} n
 */
const amend = (n, precision = 15) =&gt; parseFloat(Number(n).toPrecision(precision));
const power = Math.pow(10, Math.max(getDecimalLength(a), getDecimalLength(b)));
let result = 0;

a = amend(a * power);
b = amend(b * power);

switch (type) {
    case &quot;+&quot;:
        result = (a + b) / power;
        break;
    case &quot;-&quot;:
        result = (a - b) / power;
        break;
    case &quot;*&quot;:
        result = (a * b) / (power * power);
        break;
    case &quot;/&quot;:
        result = a / b;
        break;
}

result = amend(result);

return {
    /** 计算结果 */
    result,
    /**
     * 继续计算
     * @param {&quot;+&quot;|&quot;-&quot;|&quot;*&quot;|&quot;/&quot;} nextType 继续计算方式
     * @param {number} nextValue 继续计算的值
     */
    next(nextType, nextValue) {
        return computeNumber(result, nextType, nextValue);
    }
};
</code></pre><p>}</p>
<pre><code>
## 一行css适配rem
750是设计稿的宽度：之后的单位直接1:1使用设计稿的大小，单位是rem
```javascript
html{ font-size: calc(100vw / 750); }
</code></pre><h2 id="好用的格式化日期方法"><a href="#好用的格式化日期方法" class="headerlink" title="好用的格式化日期方法"></a>好用的格式化日期方法</h2><pre><code class="javascript">/**
 * 格式化日期
 * @param {string | number | Date} value 指定日期
 * @param {string} format 格式化的规则
 * @example
 * ```js
 * formatDate();
 * formatDate(1603264465956);
 * formatDate(1603264465956, &quot;h:m:s&quot;);
 * formatDate(1603264465956, &quot;Y年M月D日&quot;);
 *
</code></pre>
<p> */<br>function formatDate(value = Date.now(), format = &quot;Y-M-D h:m:s&quot;) {<br>    const formatNumber = n =&gt; <code>0${n}</code>.slice(-2);<br>    const date = new Date(value);<br>    const formatList = [&quot;Y&quot;, &quot;M&quot;, &quot;D&quot;, &quot;h&quot;, &quot;m&quot;, &quot;s&quot;];<br>    const resultList = [];<br>    resultList.push(date.getFullYear().toString());<br>    resultList.push(formatNumber(date.getMonth() + 1));<br>    resultList.push(formatNumber(date.getDate()));<br>    resultList.push(formatNumber(date.getHours()));<br>    resultList.push(formatNumber(date.getMinutes()));<br>    resultList.push(formatNumber(date.getSeconds()));<br>    for (let i = 0; i &lt; resultList.length; i++) {<br>        format = format.replace(formatList[i], resultList[i]);<br>    }<br>    return format;<br>}</p>
<pre><code>
## 网页定位
这里使用百度定位，无论代码封装、调用方式还是位置准确性都比微信sdk那个好用太多了，包括在任何网页端；
[文档说明](http://lbsyun.baidu.com/index.php?title=jspopularGL/guide/getkey)
[获取百度地图key](http://lbsyun.baidu.com/apiconsole/key#/home)
```javascript
/**
 * 插入脚本
 * @param {string} link 脚本路径
 * @param {Function} callback 脚本加载完成回调
 */
function insertScript(link, callback) {
    const label = document.createElement(&quot;script&quot;);
    label.src = link;
    label.onload = function () {
        if (label.parentNode) label.parentNode.removeChild(label);
        if (typeof callback === &quot;function&quot;) callback();
    }
    document.body.appendChild(label);
}

/**
 * 获取定位信息 
 * @returns {Promise&lt;{ city: string, districtName: string, province: string, longitude: number, latitude: number }&gt;}
*/
function getLocationInfo() {
    /**
     * 使用百度定位
     * @param {(value: any) =&gt; void} callback
     */
    function useBaiduLocation(callback) {
        const geolocation = new BMap.Geolocation({
            maximumAge: 10
        })
        geolocation.getCurrentPosition(function(res) {
            console.log(&quot;%c 使用百度定位 &gt;&gt;&quot;, &quot;background-color: #4e6ef2; padding: 2px 6px; color: #fff; border-radius: 2px&quot;, res);
            callback({
                city: res.address.city,
                districtName: res.address.district,
                province: res.address.province,
                longitude: Number(res.longitude),
                latitude: Number(res.latitude)
            })
        })
    }

    return new Promise(function (resolve, reject) {
        if (!window._baiduLocation) {
            window._baiduLocation = function () {
                useBaiduLocation(resolve);
            }
            // ak=你自己的key
            insertScript(&quot;https://api.map.baidu.com/api?v=2.0&amp;ak=66vCKv7PtNlOprFEe9kneTHEHl8DY1mR&amp;callback=_baiduLocation&quot;);
        } else {
            useBaiduLocation(resolve);
        }
    })
}

</code></pre><h2 id="输入保留数字-lt-input-type-quot-text-quot-gt"><a href="#输入保留数字-lt-input-type-quot-text-quot-gt" class="headerlink" title="输入保留数字&lt;input type=&quot;text&quot;&gt;"></a>输入保留数字<code>&lt;input type=&quot;text&quot;&gt;</code></h2><p>使用场景：用户在输入框输入内容时，实时过滤保持数字值显示；</p>
<p>tips：在Firefox中设置 <code>&lt;input type=&quot;number&quot;&gt;</code> 会有样式 bug</p>
<pre><code class="javascript">/**
 * 输入只能是数字
 * @param {string | number} value 输入的值
 * @param {boolean} decimal 是否要保留小数
 * @param {boolean} negative 是否可以为负数
 */
function inputOnlyNumber(value, decimal, negative) {
    let result = value.toString().trim();
    if (result.length === 0) return &quot;&quot;;
    const minus = (negative &amp;&amp; result[0] == &quot;-&quot;) ? &quot;-&quot; : &quot;&quot;;
    if (decimal) {
        result = result.replace(/[^0-9.]+/ig, &quot;&quot;);
        let array = result.split(&quot;.&quot;);
        if (array.length &gt; 1) {
            result = array[0] + &quot;.&quot; + array[1];
        }
    } else {
        result = result.replace(/[^0-9]+/ig, &quot;&quot;);
    }
    return minus + result;
}

</code></pre>
<h2 id="Intl-NumberFormat（格式化数字）"><a href="#Intl-NumberFormat（格式化数字）" class="headerlink" title="Intl.NumberFormat（格式化数字）"></a>Intl.NumberFormat（格式化数字）</h2><ul>
<li>现在JS提供了一个更加可用和规范化的API——Intl.NumberFormat。对于常用的货币格式化都有良好的支持。<blockquote>
<p>推荐使用</p>
<pre><code class="javascript">new Intl.NumberFormat().format(123456.789);
// 显示结果为：123,456.789
</code></pre>
</blockquote>
</li>
</ul>
<pre><code class="javascript">new Intl.NumberFormat(&#39;ja-JP&#39;, { style: &#39;currency&#39;, currency: &#39;JPY&#39; }).format(12345.678);
// 结果显示为：&quot;￥12,346&quot;
</code></pre>
<ul>
<li><p>正则表达式 （古早的做法）</p>
<pre><code class="javascript">const number = 1234567;
number.toString().replace(/(\d)(?=(?:\d{3})+$)/g, &#39;$1,&#39;);
// 结果为：1,234,567
</code></pre>
</li>
<li><p>Date API</p>
<pre><code class="javascript">const number = 123456.789;
number.toLocaleString();// 结果为：123,456.789
</code></pre>
</li>
</ul>
<h2 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h2><h3 id="base64加密"><a href="#base64加密" class="headerlink" title="base64加密"></a>base64加密</h3><pre><code class="javascript">var str = &#39;hello&#39;;
var str64 = window.btoa(str);
console.log(&#39;经base64编码后：&#39;+ str64); // 经base64编码后：aGVsbG8=
console.log(&#39;经base64解码后：&#39; + window.atob(str64)); // 经base64解码后：hello

</code></pre>
<h3 id="编码和解码字符串"><a href="#编码和解码字符串" class="headerlink" title="编码和解码字符串"></a>编码和解码字符串</h3><p>使用JS函数的<code>escape()</code>和<code>unescape()</code>，分别是编码和解码字符串</p>
<pre><code class="javascript">var escape1 = escape(&#39;我的名字是：Neo&#39;); // 编码
var unescape1 = unescape(escape1); // 解码
console.log(escape1) // %u6211%u7684%u540D%u5B57%u662F%uFF1ANeo
console.log(unescape1) // &quot;我的名字是：Neo&quot;
</code></pre>
<h2 id="lucky-canvas【大转盘-九宫格】抽奖"><a href="#lucky-canvas【大转盘-九宫格】抽奖" class="headerlink" title="lucky-canvas【大转盘/九宫格】抽奖"></a>lucky-canvas【大转盘/九宫格】抽奖</h2><p><a href="https://100px.net/" target="_blank" rel="noopener">lucky-canvas【大转盘/九宫格】抽奖</a></p>
<h2 id="FineBI大屏"><a href="#FineBI大屏" class="headerlink" title="FineBI大屏"></a>FineBI大屏</h2><p><a href="https://help.fanruan.com/finebi/" target="_blank" rel="noopener">FineBI大屏</a></p>
<h2 id="大屏数据展示模板"><a href="#大屏数据展示模板" class="headerlink" title="大屏数据展示模板"></a>大屏数据展示模板</h2><p><a href="https://gitee.com/lvyeyou/DaShuJuZhiDaPingZhanShi" target="_blank" rel="noopener">大屏数据展示模板</a></p>
<h2 id="js拖动滑块验证功能"><a href="#js拖动滑块验证功能" class="headerlink" title="js拖动滑块验证功能"></a>js拖动滑块验证功能</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;滑块解锁封装js方法&lt;/title&gt;
    &lt;!--注：这里首次用到了iconfont的语法，即矢量图标--&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;font/iconfont.css&quot; /&gt;
    &lt;style&gt;
      * {
        padding: 0;
        margin: 0;
      }
      #box {
        position: relative;
        width: 300px;
        height: 40px;
        margin: 0 auto;
        margin-top: 10px;
        background-color: #e8e8e8;
        box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
      }
      .bgColor {
        position: absolute;
        left: 0;
        top: 0;
        width: 40px;
        height: 40px;
        background-color: lightblue;
      }
      .txt {
        position: absolute;
        width: 100%;
        height: 40px;
        line-height: 40px;
        font-size: 14px;
        color: #000;
        text-align: center;
      }
      .slider {
        position: absolute;
        left: 0;
        top: 0;
        width: 50px;
        height: 38px;
        border: 1px solid #ccc;
        background: #fff;
        text-align: center;
        cursor: move;
      }
      .slider &gt; i {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .slider.active &gt; i {
        color: green;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;box&quot; onselectstart=&quot;return false;&quot;&gt;
      &lt;div class=&quot;bgColor&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;txt&quot;&gt;滑动解锁&lt;/div&gt;
      &lt;!--给i标签添加上相应字体图标的类名即可--&gt;
      &lt;div class=&quot;slider&quot;&gt;&lt;i class=&quot;iconfont icon-double-right&quot;&gt;&lt;/i&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;script&gt;
      //一、定义了一个获取元素的方法
      function getEle(selector) {
        return document.querySelector(selector)
      }
      //二、获取到需要用到的DOM元素
      var box = getEle(&quot;#box&quot;), //容器
        bgColor = getEle(&quot;.bgColor&quot;), //背景色
        txt = getEle(&quot;.txt&quot;), //文本
        slider = getEle(&quot;.slider&quot;), //滑块
        icon = getEle(&quot;.slider&gt;i&quot;),
        successMoveDistance = box.offsetWidth - slider.offsetWidth, //解锁需要滑动的距离
        downX, //用于存放鼠标按下时的位置
        isSuccess = false //是否解锁成功的标志，默认不成功

      //三、给滑块添加鼠标按下事件
      slider.onmousedown = mousedownHandler

      //3.1鼠标按下事件的方法实现
      function mousedownHandler(e) {
        bgColor.style.transition = &quot;&quot;
        slider.style.transition = &quot;&quot;
        var e = e || window.event || e.which
        downX = e.clientX
        //在鼠标按下时，分别给鼠标添加移动和松开事件
        document.onmousemove = mousemoveHandler
        document.onmouseup = mouseupHandler
      }

      //四、定义一个获取鼠标当前需要移动多少距离的方法
      function getOffsetX(offset, min, max) {
        if (offset &lt; min) {
          offset = min
        } else if (offset &gt; max) {
          offset = max
        }
        return offset
      }

      //3.1.1鼠标移动事件的方法实现
      function mousemoveHandler(e) {
        var e = e || window.event || e.which
        var moveX = e.clientX
        var offsetX = getOffsetX(moveX - downX, 0, successMoveDistance)
        bgColor.style.width = offsetX + &quot;px&quot;
        slider.style.left = offsetX + &quot;px&quot;

        if (offsetX == successMoveDistance) {
          success()
        }
        //如果不设置滑块滑动时会出现问题（目前还不知道为什么）
        e.preventDefault()
      }

      //3.1.2鼠标松开事件的方法实现
      function mouseupHandler(e) {
        if (!isSuccess) {
          bgColor.style.width = 0 + &quot;px&quot;
          slider.style.left = 0 + &quot;px&quot;
          bgColor.style.transition = &quot;width 0.8s linear&quot;
          slider.style.transition = &quot;left 0.8s linear&quot;
        }
        document.onmousemove = null
        document.onmouseup = null
      }

      //五、定义一个滑块解锁成功的方法
      function success() {
        isSuccess = true
        txt.innerHTML = &quot;解锁成功&quot;
        bgColor.style.backgroundColor = &quot;lightgreen&quot;
        slider.className = &quot;slider active&quot;
        icon.className = &quot;iconfont icon-xuanzhong&quot;
        //滑动成功时，移除鼠标按下事件和鼠标移动事件
        slider.onmousedown = null
        document.onmousemove = null
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<h2 id="canvas实现贪吃蛇"><a href="#canvas实现贪吃蛇" class="headerlink" title="canvas实现贪吃蛇"></a>canvas实现贪吃蛇</h2><p><a href="https://juejin.cn/post/6959789039566192654#heading-14" target="_blank" rel="noopener">原文</a></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;贪吃蛇&lt;/title&gt;
  &lt;style&gt;
    body {
      background-color: #eee;
    }
    .container {
      text-align: center;
    }
    .top {
      margin: 20px auto;
      width: 640px;
    }
    #score {
      float: left;
    }
    .main {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 642px;
      height: 402px;
    }
    #snake {
      border: 1px solid #000;
      width: 640px;
      height: 400px;
      display: inline-block;
      z-index: 99;
      background-color: rgba(0, 0, 0, .1);
    }
    #mask {
      background-color: rgba(0, 0, 0, .5);
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      z-index: 100;
      display: block;
      color: #fff;
      line-height: 400px;
      text-align: center;
      font-size: 30px;
      cursor: pointer;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;top&quot;&gt;
      &lt;span id=&quot;score&quot;&gt;Score: 0&lt;/span&gt;
      &lt;button id=&quot;restart&quot;&gt;重新开始&lt;/button&gt;
      &lt;button id=&quot;stop&quot;&gt;暂停&lt;/button&gt;
      &lt;button id=&quot;continue&quot;&gt;继续&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class=&quot;main&quot;&gt;
      &lt;canvas id=&quot;snake&quot; width=&quot;640&quot; height=&quot;400&quot;&gt;&lt;/canvas&gt;
      &lt;div id=&quot;mask&quot;&gt;开始&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

&lt;script&gt;
  let greedySnake = null
  let score = document.querySelector(&#39;#score&#39;)
  let restart = document.querySelector(&#39;#restart&#39;)
  let stop = document.querySelector(&#39;#stop&#39;)
  let conti = document.querySelector(&#39;#continue&#39;)
  let mask = document.querySelector(&#39;#mask&#39;)

  restart.onclick = () =&gt; {
    if (!greedySnake.isStart) return
    greedySnake.start()
  }
  stop.onclick = () =&gt; {
    if (greedySnake.isStop || !greedySnake.isStart) return
    greedySnake.stop()
  }
  conti.onclick = () =&gt; {
    if (!greedySnake.isStop || !greedySnake.isStart) return
    greedySnake.continue()
  }
  mask.onclick = () =&gt; {
    if (!greedySnake.isStart) {
      greedySnake.start()
    } else {
      greedySnake.continue()
    }
  }

  // 大小为64 * 40
  class GreedySnake {
    constructor() {
      this.canvas = document.querySelector(&#39;#snake&#39;)
      this.ctx = this.canvas.getContext(&#39;2d&#39;)
      this.maxX = 64          // 最大行
      this.maxY = 40          // 最大列
      this.itemWidth = 10     // 每个点的大小
      this.direction = &#39;right&#39;// up down right left 方向
      this.speed = 150        // ms 速度
      this.isStop = false     // 是否暂停
      this.isOver = false     // 是否结束
      this.isStart = false    // 是否开始
      this.score = 0          // 分数
      this.timer = null       // 移动定时器
      this.j = 1
      this.canChange = true

      this.grid = new Array()

      for (let i = 0; i &lt; this.maxX; i++) {
        for (let j = 0; j &lt; this.maxY; j++) {
          this.grid.push([i, j])
        } 
      }

      this.drawGridLine()
      this.getDirection()
    }

    // 开始
    start() {
      if (this.timer) {
        clearTimeout(this.timer)
      }
      if (!this.isStart) {
        this.isStart = true
      }
      this.score = 0
      this.speed = 150
      this.isStop = false
      this.isOver = false
      this.direction = &#39;right&#39;
      this.createSnake()
      this.createFood()
      this.draw()
      this.move()
      mask.style.display = &#39;none&#39;
    }

    // 创建蛇主体
    createSnake() {
      this.snake = [
        [4, 25],
        [3, 25],
        [2, 25],
        [1, 25],
        [0, 25]
      ]
    }

    // 移动
    move() {
      if (this.isStop) return

      let [x, y] = this.snake[0]
      switch(this.direction) {
        case &#39;left&#39;:
          x--
          break
        case &#39;right&#39;:
          x++
          break
        case &#39;up&#39;:
          y--
          break
        case &#39;down&#39;:
          y++
          break
      }

      // 如果下一步不是食物的位置
      if (x !== this.food[0] || y !== this.food[1]) {
        this.snake.pop()
      } else {
        this.createFood()
      }

      if (this.over([x, y])) {
        this.isOver = true
        mask.style.display = &#39;block&#39;
        mask.innerHTML = &#39;结束&#39;
        return
      }
      if (this.completed()) {
        mask.style.display = &#39;block&#39;
        mask.innerHTML = &#39;恭喜您，游戏通关&#39;
        return
      }

      this.snake.unshift([x, y])

      this.draw()
      this.canChange = true
      this.timer = setTimeout(() =&gt; this.move(), this.speed)
    }

    // 暂停游戏
    stop() {
      if (this.isOver) return
      this.isStop = true
      mask.style.display = &#39;block&#39;
      mask.innerHTML = &#39;暂停&#39;
    }

    // 继续游戏
    continue() {
      if (this.isOver) return
      this.isStop = false
      this.move()
      mask.style.display = &#39;none&#39;
    }

    getDirection() {
      // 上38 下40 左37 右39 不能往相反的方向走
      document.onkeydown = (e) =&gt; {
        // 在贪吃蛇移动的间隔内不能连续改变两次方向
        if (!this.canChange) return
        switch(e.keyCode) {
          case 37:
            if (this.direction !== &#39;right&#39;) {
              this.direction = &#39;left&#39;
              this.canChange = false
            }
            break
          case 38:
            if (this.direction !== &#39;down&#39;) {
              this.direction = &#39;up&#39;
              this.canChange = false
            }
            break
          case 39:
            if (this.direction !== &#39;left&#39;) {
              this.direction = &#39;right&#39;
              this.canChange = false
            }
            break
          case 40:
            if (this.direction !== &#39;up&#39;) {
              this.direction = &#39;down&#39;
              this.canChange = false
            }
            break
          case 32:
            // 空格暂停与继续
            if (!this.isStop) {
              this.stop()
            } else {
              this.continue()
            }
            break
        }
      }
    }
    createPos() {
      let [x, y] = this.grid[(Math.random() * this.grid.length) | 0]

      for (let i = 0; i &lt; this.snake.length; i++) {
        if (this.snake[i][0] == x &amp;&amp; this.snake[i][1] == y) {
          return this.createPos()
        }
      }

      return [x, y]
    }
    // 生成食物
    createFood() {
      this.food = this.createPos()

      // 更新分数
      score.innerHTML = &#39;Score: &#39;+ this.score++

      if (this.speed &gt; 50) {
        this.speed--
      }
    }

    // 结束
    over([x, y]) {
      if (x &lt; 0 || x &gt;= this.maxX || y &lt; 0 || y &gt;= this.maxY) {
        return true
      }

      if (this.snake.some(v =&gt; v[0] === x &amp;&amp; v[1] === y)) {
        return true
      }
    }

    // 完成
    completed() {
      if (this.snake.length == this.maxX * this.maxY) {
        return true
      }
    }

    // 网格线
    drawGridLine() {
      for (let i = 1; i &lt; this.maxY; i++) {
        this.ctx.moveTo(0, i * this.itemWidth)
        this.ctx.lineTo(this.canvas.width, i * this.itemWidth)
      }

      for (let i = 1; i &lt; this.maxX; i++) {
        this.ctx.moveTo(i * this.itemWidth, 0)
        this.ctx.lineTo(i * this.itemWidth, this.canvas.height)
      }
      this.ctx.lineWidth = 1
      this.ctx.strokeStyle = &#39;#ddd&#39;
      this.ctx.stroke()
    }

    // 绘制
    draw() {
      // 清空画布
      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)

      this.drawGridLine()

      this.ctx.fillStyle=&quot;#000&quot;
      this.ctx.fillRect(
        this.food[0] * this.itemWidth + this.j,
        this.food[1] * this.itemWidth + this.j,
        this.itemWidth - this.j * 2,
        this.itemWidth -  + this.j * 2
      )
      this.j ^= 1

      this.ctx.fillStyle=&quot;green&quot;
      this.ctx.fillRect(
        this.snake[0][0] * this.itemWidth + 0.5,
        this.snake[0][1] * this.itemWidth + 0.5,
        this.itemWidth - 1,
        this.itemWidth - 1
      )
      this.ctx.fillStyle=&quot;red&quot;
      for (let i = 1; i &lt; this.snake.length; i++) {
        this.ctx.fillRect(
          this.snake[i][0] * this.itemWidth + 0.5,
          this.snake[i][1] * this.itemWidth + 0.5,
          this.itemWidth - 1,
          this.itemWidth - 1
        )
      }
    }
  }
  greedySnake = new GreedySnake()
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>
<h2 id="canvas实现带笔锋手写笔记"><a href="#canvas实现带笔锋手写笔记" class="headerlink" title="canvas实现带笔锋手写笔记"></a>canvas实现带笔锋手写笔记</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;
    &lt;title&gt;canvas 手写毛笔字效果&lt;/title&gt;
    &lt;style type=&quot;text/css&quot;&gt;
      #canvasId {
        background-color: #ffffcc;
      }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body style=&quot;touch-action: none&quot;&gt;
    &lt;canvas id=&quot;canvasId&quot; width=&quot;800&quot; height=&quot;720&quot;&gt;&lt;/canvas&gt;&lt;br /&gt;
    &lt;script&gt;
      Array.prototype.clone = function () {
        return [].concat(this)
        //或者 return this.concat();
      }
      class Point {
        constructor(x, y, time) {
          this.x = x
          this.y = y
          this.isControl = false
          this.time = Date.now()
          this.lineWidth = 0
          this.isAdd = false
        }
      }

      class Line {
        constructor() {
          this.points = new Array()
          this.changeWidthCount = 0
          this.lineWidth = 10
        }
      }
      class HandwritingSelf {
        constructor(canvas) {
          this.canvas = canvas
          this.ctx = canvas.getContext(&quot;2d&quot;)
          // this.points = new Array();
          this.line = new Line()
          this.pointLines = new Array() //Line数组
          this.k = 0.5
          this.begin = null
          this.middle = null
          this.end = null
          this.preTime = null
          this.lineWidth = 8
          this.isDown = false
        }
        down(x, y) {
          this.isDown = true
          this.line = new Line()
          this.line.lineWidth = this.lineWidth
          let currentPoint = new Point(x, y, Date.now())
          this.addPoint(currentPoint)

          this.preTime = Date.now()
        }
        move(x, y) {
          // console.log(&quot;move:&quot;,x,y)
          if (this.isDown) {
            let currentPoint = new Point(x, y, Date.now())
            this.addPoint(currentPoint)
            this.draw()
          }
        }
        up(x, y) {
          // if (e.touches.length &gt; 0) {
          let currentPoint = new Point(x, y, Date.now())
          this.addPoint(currentPoint)
          // }
          this.draw(true)

          this.pointLines.push(this.line)

          this.begin = null
          this.middle = null
          this.end = null
          this.isDown = false
        }
        draw(isUp = false) {
          this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)
          this.ctx.strokeStyle = &quot;rgba(255,20,87,1)&quot;

          //绘制不包含this.line的线条
          this.pointLines.forEach((line, index) =&gt; {
            let points = line.points
            this.ctx.beginPath()
            this.ctx.ellipse(
              points[0].x - 1.5,
              points[0].y,
              6,
              3,
              Math.PI / 4,
              0,
              Math.PI * 2
            )
            this.ctx.fill()
            this.ctx.beginPath()
            this.ctx.moveTo(points[0].x, points[0].y)
            let lastW = line.lineWidth
            this.ctx.lineWidth = line.lineWidth
            this.ctx.lineJoin = &quot;round&quot;
            this.ctx.lineCap = &quot;round&quot;
            let minLineW = line.lineWidth / 4
            let isChangeW = false

            let changeWidthCount = line.changeWidthCount
            for (let i = 1; i &lt;= points.length; i++) {
              if (i == points.length) {
                this.ctx.stroke()
                break
              }
              if (i &gt; points.length - changeWidthCount) {
                if (!isChangeW) {
                  this.ctx.stroke() //将之前的线条不变的path绘制完
                  isChangeW = true
                  if (i &gt; 1 &amp;&amp; points[i - 1].isControl) continue
                }
                let w =
                  ((lastW - minLineW) / changeWidthCount) *
                    (points.length - i) +
                  minLineW
                points[i - 1].lineWidth = w
                this.ctx.beginPath() //为了开启新的路径 否则每次stroke 都会把之前的路径在描一遍
                // this.ctx.strokeStyle = &quot;rgba(&quot;+Math.random()*255+&quot;,&quot;+Math.random()*255+&quot;,&quot;+Math.random()*255+&quot;,1)&quot;;
                this.ctx.lineWidth = w
                this.ctx.moveTo(points[i - 1].x, points[i - 1].y) //移动到之前的点
                this.ctx.lineTo(points[i].x, points[i].y)
                this.ctx.stroke() //将之前的线条不变的path绘制完
              } else {
                if (points[i].isControl &amp;&amp; points[i + 1]) {
                  this.ctx.quadraticCurveTo(
                    points[i].x,
                    points[i].y,
                    points[i + 1].x,
                    points[i + 1].y
                  )
                } else if (i &gt;= 1 &amp;&amp; points[i - 1].isControl) {
                  //上一个是控制点 当前点已经被绘制
                } else this.ctx.lineTo(points[i].x, points[i].y)
              }
            }
          })

          //绘制this.line线条
          let points
          if (isUp) points = this.line.points
          else points = this.line.points.clone()
          //当前绘制的线条最后几个补点 贝塞尔方式增加点
          let count = 0
          let insertCount = 0
          let i = points.length - 1
          let endPoint = points[i]
          let controlPoint
          let startPoint
          while (i &gt;= 0) {
            if (points[i].isControl == true) {
              controlPoint = points[i]
              count++
            } else {
              startPoint = points[i]
            }
            if (startPoint &amp;&amp; controlPoint &amp;&amp; endPoint) {
              //使用贝塞尔计算补点
              let dis =
                this.z_distance(startPoint, controlPoint) +
                this.z_distance(controlPoint, endPoint)
              let insertPoints = this.BezierCalculate(
                [startPoint, controlPoint, endPoint],
                Math.floor(dis / 6) + 1
              )
              insertCount += insertPoints.length
              var index = i //插入位置
              // 把insertPoints 变成一个适合splice的数组（包含splice前2个参数的数组）
              insertPoints.unshift(index, 1)
              Array.prototype.splice.apply(points, insertPoints)

              //补完点后
              endPoint = startPoint
              startPoint = null
            }
            if (count &gt;= 6) break
            i--
          }
          //确定最后线宽变化的点数
          let changeWidthCount = count + insertCount
          if (isUp) this.line.changeWidthCount = changeWidthCount

          //制造椭圆头
          this.ctx.fillStyle = &quot;rgba(255,20,87,1)&quot;
          this.ctx.beginPath()
          this.ctx.ellipse(
            points[0].x - 1.5,
            points[0].y,
            6,
            3,
            Math.PI / 4,
            0,
            Math.PI * 2
          )
          this.ctx.fill()

          this.ctx.beginPath()
          this.ctx.moveTo(points[0].x, points[0].y)
          let lastW = this.line.lineWidth
          this.ctx.lineWidth = this.line.lineWidth
          this.ctx.lineJoin = &quot;round&quot;
          this.ctx.lineCap = &quot;round&quot;
          let minLineW = this.line.lineWidth / 4
          let isChangeW = false
          for (let i = 1; i &lt;= points.length; i++) {
            if (i == points.length) {
              this.ctx.stroke()
              break
            }
            //最后的一些点线宽变细
            if (i &gt; points.length - changeWidthCount) {
              if (!isChangeW) {
                this.ctx.stroke() //将之前的线条不变的path绘制完
                isChangeW = true
                if (i &gt; 1 &amp;&amp; points[i - 1].isControl) continue
              }

              //计算线宽
              let w =
                ((lastW - minLineW) / changeWidthCount) * (points.length - i) +
                minLineW
              points[i - 1].lineWidth = w
              this.ctx.beginPath() //为了开启新的路径 否则每次stroke 都会把之前的路径在描一遍
              // this.ctx.strokeStyle = &quot;rgba(&quot; + Math.random() * 255 + &quot;,&quot; + Math.random() * 255 + &quot;,&quot; + Math.random() * 255 + &quot;,0.5)&quot;;
              this.ctx.lineWidth = w
              this.ctx.moveTo(points[i - 1].x, points[i - 1].y) //移动到之前的点
              this.ctx.lineTo(points[i].x, points[i].y)
              this.ctx.stroke() //将之前的线条不变的path绘制完
            } else {
              if (points[i].isControl &amp;&amp; points[i + 1]) {
                this.ctx.quadraticCurveTo(
                  points[i].x,
                  points[i].y,
                  points[i + 1].x,
                  points[i + 1].y
                )
              } else if (i &gt;= 1 &amp;&amp; points[i - 1].isControl) {
                //上一个是控制点 当前点已经被绘制
              } else this.ctx.lineTo(points[i].x, points[i].y)
            }
          }
        }

        addPoint(p) {
          if (this.line.points.length &gt;= 1) {
            let last_point = this.line.points[this.line.points.length - 1]
            let distance = this.z_distance(p, last_point)
            if (distance &lt; 10) {
              return
            }
          }

          if (this.line.points.length == 0) {
            this.begin = p
            p.isControl = true
            this.pushPoint(p)
          } else {
            this.middle = p
            let controlPs = this.computeControlPoints(
              this.k,
              this.begin,
              this.middle,
              null
            )
            this.pushPoint(controlPs.first)
            this.pushPoint(p)
            p.isControl = true

            this.begin = this.middle
          }
        }

        addOtherPoint(p1, p2, w1, w2) {
          let otherPoints = new Array()
          let dis = this.z_distance(p1, p2)
          if (dis &gt;= 25) {
            otherPoints.push(p1)
            let insertPCount = Math.floor(dis / 20)
            for (let j = 0; j &lt; insertPCount; j++) {
              let insertP = new Point(
                p1.x + ((j + 1) / (insertPCount + 1)) * (p2.x - p1.x),
                p1.y + ((j + 1) / (insertPCount + 1)) * (p2.y - p1.y)
              )
              insertP.isAdd = true
              otherPoints.push(insertP)
            }
            otherPoints.push(p2)
          }
          let count = otherPoints.length
          if (count &gt; 0) {
            console.log(&quot;addOtherPoint&quot;)
            debugger
            let diffW = (w2 - w1) / (count - 1)
            for (let i = 1; i &lt; count; i++) {
              let w = w1 + diffW * i
              this.ctx.beginPath()
              this.ctx.lineWidth = w
              this.ctx.moveTo(otherPoints[i - 1].x, otherPoints[i - 1].y)
              this.ctx.lineTo(otherPoints[i].x, otherPoints[i].y)
              this.ctx.stroke()
            }
          }
          return otherPoints
        }
        pushPoint(p) {
          //排除重复点
          if (
            this.line.points.length &gt;= 1 &amp;&amp;
            this.line.points[this.line.points.length - 1].x == p.x &amp;&amp;
            this.line.points[this.line.points.length - 1].y == p.y
          )
            return
          this.line.points.push(p)
        }
        computeControlPoints(k, begin, middle, end) {
          if (k &gt; 0.5 || k &lt;= 0) return

          let diff1 = new Point(middle.x - begin.x, middle.y - begin.y)
          let diff2 = null
          if (end) diff2 = new Point(end.x - middle.x, end.y - middle.y)

          // let l1 = (diff1.x ** 2 + diff1.y ** 2) ** (1 / 2)
          // let l2 = (diff2.x ** 2 + diff2.y ** 2) ** (1 / 2)

          let first = new Point(middle.x - k * diff1.x, middle.y - k * diff1.y)
          let second = null
          if (diff2)
            second = new Point(middle.x + k * diff2.x, middle.y + k * diff2.y)
          return { first: first, second: second }
        }
        // W_current =
        // 　　W_previous + min( abs(k*s - W_previous), distance * K_width_unit_change) (k * s-W_previous) &gt;= 0
        // 　　W_previous - min( abs(k*s - W_previous), distance * K_width_unit_change) (k * s-W_previous) &lt; 0
        // 　　W_current 　　　　  当前线段的宽度
        // 　　W_previous　　　　与当前线条相邻的前一条线段的宽度
        // 　　distance 　　    　　    当前线条的长度
        // 　　w_k 　　　　　　　    设定的一个固定阈值,表示:单位距离内, 笔迹的线条宽度可以变化的最大量.
        // 　　distance * w_k 　　  即为当前线段的长度内, 笔宽可以相对于前一条线段笔宽的基础上, 最多能够变宽或者可以变窄多少.
        z_linewidth(b, e, bwidth, step) {
          if (e.time == b.time) return bwidth

          let max_speed = 2.0
          let d = this.z_distance(b, e)
          let s = d / (e.time - b.time) //计算速度
          console.log(&quot;s&quot;, e.time - b.time, s)
          s = s &gt; max_speed ? max_speed : s

          // let w = (max_speed - s) / max_speed;
          let w = 0.5 / s

          let max_dif = d * step
          console.log(w, bwidth, max_dif)
          if (w &lt; 0.05) w = 0.05
          if (Math.abs(w - bwidth) &gt; max_dif) {
            if (w &gt; bwidth) w = bwidth + max_dif
            else w = bwidth - max_dif
          }
          // printf(&quot;d:%.4f, time_diff:%lld, speed:%.4f, width:%.4f\n&quot;, d, e.t-b.t, s, w);
          return w
        }
        z_distance(b, e) {
          return Math.sqrt(Math.pow(e.x - b.x, 2) + Math.pow(e.y - b.y, 2))
        }
        BezierCalculate(poss, precision) {
          //维度，坐标轴数（二维坐标，三维坐标...）
          let dimersion = 2

          //贝塞尔曲线控制点数（阶数）
          let number = poss.length

          //控制点数不小于 2 ，至少为二维坐标系
          if (number &lt; 2 || dimersion &lt; 2) return null

          let result = new Array()

          //计算杨辉三角
          let mi = new Array()
          mi[0] = mi[1] = 1
          for (let i = 3; i &lt;= number; i++) {
            let t = new Array()
            for (let j = 0; j &lt; i - 1; j++) {
              t[j] = mi[j]
            }

            mi[0] = mi[i - 1] = 1
            for (let j = 0; j &lt; i - 2; j++) {
              mi[j + 1] = t[j] + t[j + 1]
            }
          }

          //计算坐标点
          for (let i = 0; i &lt; precision; i++) {
            let t = i / precision
            let p = new Point(0, 0)
            p.isAdd = true
            result.push(p)
            for (let j = 0; j &lt; dimersion; j++) {
              let temp = 0.0
              for (let k = 0; k &lt; number; k++) {
                temp +=
                  Math.pow(1 - t, number - k - 1) *
                  (j == 0 ? poss[k].x : poss[k].y) *
                  Math.pow(t, k) *
                  mi[k]
              }
              j == 0 ? (p.x = temp) : (p.y = temp)
            }
          }

          return result
        }
      }

      //以下代码为鼠标移动事件部分
      let handwriting = new HandwritingSelf(document.getElementById(&quot;canvasId&quot;))
      // document.ontouchstart = document.onmousedown
      document.onpointerdown = function (e) {
        if (e.type == &quot;touchstart&quot;)
          handwriting.down(e.touches[0].pageX, e.touches[0].pageY)
        else handwriting.down(e.x, e.y)
      }
      // document.ontouchmove = document.onmousemove
      document.onpointermove = function (e) {
        if (e.type == &quot;touchmove&quot;)
          handwriting.move(e.touches[0].pageX, e.touches[0].pageY)
        else handwriting.move(e.x, e.y)
      }
      // document.ontouchend = document.onmouseup
      document.onpointerup = function (e) {
        if (e.type == &quot;touchend&quot;)
          handwriting.up(e.touches[0].pageX, e.touches[0].pageY)
        else handwriting.up(e.x, e.y)
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<h2 id="代码雨"><a href="#代码雨" class="headerlink" title="代码雨"></a>代码雨</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Code&lt;/title&gt;
    &lt;style&gt;
      body {
        margin: 0;
        overflow: hidden;
      }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;canvas id=&quot;myCanvas&quot;&gt;&lt;/canvas&gt;
    &lt;script&gt;
      const width = (document.getElementById(&quot;myCanvas&quot;).width = 1920) //screen.availWidth;
      const height = (document.getElementById(&quot;myCanvas&quot;).height = 1080) //screen.availHeight;
      const ctx = document.getElementById(&quot;myCanvas&quot;).getContext(&quot;2d&quot;)
      const arr = Array(Math.ceil(width / 10)).fill(0)
      const str = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;.split(&quot;&quot;)

      function rain() {
        ctx.fillStyle = &quot;rgba(0,0,0,0.05)&quot;
        ctx.fillRect(0, 0, width, height)
        ctx.fillStyle = &quot;#0f0&quot;
        arr.forEach(function (value, index) {
          ctx.fillText(
            str[Math.floor(Math.random() * str.length)],
            index * 10,
            value + 10
          )
          arr[index] =
            value &gt;= height || value &gt; 8888 * Math.random() ? 0 : value + 10
        })
      }

      setInterval(rain, 30)
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>
<h2 id="qq企鹅"><a href="#qq企鹅" class="headerlink" title="qq企鹅"></a>qq企鹅</h2><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;style&gt;
      html,
      body,
      div,
      strong {
        margin: 0;
        padding: 0;
      }
      body {
        overflow: hidden;
      }
      .wrap {
        width: 600px;
        margin: 50px auto 0;
        position: relative;
      }
      /* ……………………………………………………………………企鹅头部…………………………………………………………………… */

      /* 上半部分黑色头部 */
      .headtop {
        width: 240px;
        height: 110px;
        background: #000;
        margin: 0 auto;
        border-top-left-radius: 120px 110px;
        border-top-right-radius: 120px 110px;
        position: relative;
        z-index: 999;
      }
      /* 下半部分黑色头部 */
      .headbottom {
        width: 240px;
        height: 90px;
        background: #000;
        border-bottom-left-radius: 120px 90px;
        border-bottom-right-radius: 120px 90px;
        position: absolute;
        top: 110px;
        z-index: 1;
      }

      h1 {
        position: absolute;
      }
      /* 左眼部分 */
      .lefteye {
        width: 46px;
        height: 70px;
        background: #fff;
        border-radius: 50% 50%;
        position: absolute;

        top: 30px;
        left: 64px;
        z-index: 2;
      }
      .lefteye_in {
        width: 20px;
        height: 30px;
        background: #000;
        border-radius: 50% 50%;
        margin-left: 23px;
        margin-top: 20px;
      }
      .eyeshow {
        display: block;
        width: 8px;
        height: 10px;
        border-radius: 50% 50%;
        background: #fff;
        position: absolute;
        top: 26px;
        left: 32px;
      }

      /*右眼部分 */
      .righteye {
        width: 46px;
        height: 70px;
        background: #fff;
        border-radius: 50% 50%;
        position: absolute;
        top: 30px;
        left: 130px;
        z-index: 2;
      }
      .righteye_in {
        width: 19px;
        height: 23px;
        background: #000;
        border-top-left-radius: 17px 30px;
        border-top-right-radius: 17px 30px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        border: 1px solid #000;
        margin-left: 7px;
        margin-top: 16px;
      }
      .eyebai {
        display: block;
        width: 12px;
        height: 19px;
        border-top-left-radius: 5px 14px;
        border-top-right-radius: 8px 14px;
        background: #fff;
        margin-top: 10px;
        margin-left: 4px;
      }
      /*右眼部分 */

      /*嘴巴*/
      .mouth {
        width: 158px;
        height: 56px;
        background: #ffa600;
        border-radius: 50%;
        position: absolute;
        top: 106px;
        left: 42px;
        z-index: 2;
      }
      .mouth_bar {
        width: 126px;
        height: 30px;
        background: #000;
        position: absolute;
        top: 142px;
        left: 55px;
        z-index: 2;
        border-bottom-left-radius: 76px 96px;
        border-bottom-right-radius: 76px 96px;
      }
      .mouth_bar1 {
        width: 126px;
        height: 20px;
        background: #ffa600;
        position: absolute;
        z-index: 3;
        border-bottom-left-radius: 104px 32px;
        border-bottom-right-radius: 104px 32px;
      }
      /*嘴巴*/
      /* ……………………………………………………………………end  企鹅头部…………………………………………………………………… */

      /* ……………………………………………………………………star 企鹅身体…………………………………………………………………… */

      /* 企鹅身体黑色部分 */
      .body {
        width: 276px;
        height: 260px;
        background: #000;
        position: absolute;
        top: 142px;
        left: 167px;
        border-top-left-radius: 160px 140px;
        border-bottom-left-radius: 160px 140px;
        border-top-right-radius: 160px 140px;
        border-bottom-right-radius: 160px 140px;
        z-index: 2;
      }
      /* 企鹅身体黑色部分 */

      /* 红色围脖 */
      .body_1 {
        width: 264px;
        height: 137px;
        background: #ff0000;
        border: 5px solid #000;
        border-top-left-radius: 195px 100px;
        border-bottom-left-radius: 237px 146px;
        border-top-right-radius: 195px 100px;
        border-bottom-right-radius: 269px 146px;
        position: absolute;
        bottom: 159px;
        left: 0px;
      }

      .body_2 {
        width: 249px;
        height: 139px;
        position: absolute;
        background: #000;
        top: -33px;
        left: 7px;
        border-radius: 50%;
        border: 1px #000 solid;
      }

      .body_3 {
        width: 241px;
        height: 145px;
        position: absolute;
        background: red;
        top: 0px;
        left: 5px;
        border-radius: 50%;
      }
      /* 红色围脖 */

      /* 白色企鹅肚子 */
      .tummy {
        width: 240px;
        height: 240px;
        background: #fff;
        position: absolute;
        top: 11px;
        left: 17px;
        border-radius: 50%;
      }
      /* 白色企鹅肚子 */

      /* 企鹅口袋 */
      .pocket {
        width: 58px;
        height: 78px;
        position: absolute;
        top: 72px;
        left: 19px;
        border: 3px solid #000;
        background: red;
        border-top-left-radius: 20px 52px;
        border-bottom-left-radius: 40px 40px;
        border-top-right-radius: 0px 0px;
        border-bottom-right-radius: 21px 21px;
      }

      .pocket .pocket_line1 {
        width: 11px;
        height: 43px;
        border-bottom-left-radius: 29px 57px;
        border-top-left-radius: 0px 0px;
        border: 9px solid #000;
        border-top: none;
        border-right: none;
        position: absolute;
        top: 0px;
        left: 30px;
        -webkit-transform: rotateZ(10deg);
        -moz-transform: rotateZ(10deg);
        -ms-transform: rotateZ(10deg);
        -o-transform: rotateZ(10deg);
        transform: rotateZ(10deg);
      }

      .pocket .pocket_line2 {
        width: 2px;
        height: 45px;
        border-bottom-left-radius: 11px 24px;
        border-top-left-radius: 10px 15px;
        border: 9px solid red;
        border-top: none;
        border-right: none;
        position: absolute;
        top: 0px;
        left: 2px;
      }

      /* 企鹅左右手 */
      .lefthand,
      .righthand {
        width: 49px;
        height: 160px;
        background: #000;
        position: absolute;
      }

      .lefthand {
        top: 20px;
        left: -29px;
        border-top-left-radius: 89px 166px;
        border-top-right-radius: 6px 63px;
        border-bottom-left-radius: 85px 194px;
        border-bottom-right-radius: 40px 128px;
        -webkit-transform: rotateZ(20deg);
        -moz-transform: rotateZ(20deg);
        -ms-transform: rotateZ(20deg);
        -o-transform: rotateZ(20deg);
        transform: rotateZ(20deg);
        -webkit-animation: left_rotate 0.5s infinite;
        -moz-animation: left_rotate 0.5s infinite;
        -ms-animation: left_rotate 0.5s infinite;
        -o-animation: left_rotate 0.5s infinite;
        animation: left_rotate 0.5s infinite;
        -webkit-animation-direction: alternate;
        -moz-animation-direction: alternate;
        -ms-animation-direction: alternate;
        -o-animation-direction: alternate;
        animation-direction: alternate;
      }
      .righthand {
        top: 20px;
        left: 258px;
        border-top-right-radius: 89px 166px;
        border-bottom-right-radius: 85px 194px;
        border-top-left-radius: 6px 63px;
        border-bottom-left-radius: 40px 128px;
        -webkit-transform: rotateZ(-20deg);
        -moz-transform: rotateZ(-20deg);
        -ms-transform: rotateZ(-20deg);
        -o-transform: rotateZ(-20deg);
        transform: rotateZ(-20deg);
        -webkit-animation: right_rotate 0.5s infinite;
        -moz-animation: right_rotate 0.5s infinite;
        -ms-animation: right_rotate 0.5s infinite;
        -o-animation: right_rotate 0.5s infinite;
        animation: right_rotate 0.5s infinite;
        -webkit-animation-direction: alternate;
        -moz-animation-direction: alternate;
        -ms-animation-direction: alternate;
        -o-animation-direction: alternate;
        animation-direction: alternate;
      }
      /* 企鹅左右手 */
      /* ……………………………………………………………………end 企鹅身体…………………………………………………………………… */

      /* ……………………………………………………………………star 企鹅脚部…………………………………………………………………… */
      .footer .left_footer,
      .footer .right_footer {
        width: 134px;
        height: 74px;
        position: absolute;
        background: #ffa600;
        border: 3px solid #000;
        border-radius: 50%;
        z-index: 1;
      }

      .footer .left_footer {
        top: 347px;
        left: 163px;
      }

      .footer .right_footer {
        top: 347px;
        left: 320px;
      }
      /* ……………………………………………………………………end 企鹅脚部…………………………………………………………………… */

      @keyframes left_rotate {
        from {
          -webkit-transform-origin: right 30%;
          -webkit-transform: rotateZ(60deg);
        }

        to {
          -webkit-transform-origin: right 30%;
          -webkit-transform: rotateZ(30deg);
        }
      }

      @keyframes right_rotate {
        from {
          -webkit-transform-origin: left 30%;
          -webkit-transform: rotateZ(-60deg);
        }

        to {
          -webkit-transform-origin: left 30%;
          -webkit-transform: rotateZ(-30deg);
        }
      }

      @-webkit-keyframes left_rotate {
        from {
          -webkit-transform-origin: right 30%;
          -webkit-transform: rotateZ(60deg);
        }

        to {
          -webkit-transform-origin: right 30%;
          -webkit-transform: rotateZ(30deg);
        }
      }

      @-webkit-keyframes right_rotate {
        from {
          -webkit-transform-origin: left 30%;
          -webkit-transform: rotateZ(-60deg);
        }

        to {
          -webkit-transform-origin: left 30%;
          -webkit-transform: rotateZ(-30deg);
        }
      }
      @-moz-keyframes left_rotate {
        from {
          transform-origin: right 30%;
          transform: rotateZ(60deg);
        }

        to {
          transform-origin: right 30%;
          transform: rotateZ(30deg);
        }
      }

      @-moz-keyframes right_rotate {
        from {
          transform-origin: left 30%;
          transform: rotateZ(-60deg);
        }

        to {
          transform-origin: left 30%;
          transform: rotateZ(-30deg);
        }
      }
      @-ms-keyframes left_rotate {
        from {
          transform-origin: right 30%;
          transform: rotateZ(60deg);
        }

        to {
          transform-origin: right 30%;
          transform: rotateZ(30deg);
        }
      }

      @-ms-keyframes right_rotate {
        from {
          transform-origin: left 30%;
          transform: rotateZ(-60deg);
        }

        to {
          transform-origin: left 30%;
          transform: rotateZ(-30deg);
        }
      }
      @-o-keyframes left_rotate {
        from {
          transform-origin: right 30%;
          transform: rotateZ(60deg);
        }

        to {
          transform-origin: right 30%;
          transform: rotateZ(30deg);
        }
      }

      @-o-keyframes right_rotate {
        from {
          transform-origin: left 30%;
          transform: rotateZ(-60deg);
        }

        to {
          transform-origin: left 30%;
          transform: rotateZ(-30deg);
        }
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;wrap&quot;&gt;
      &lt;!-- 企鹅头部 --&gt;
      &lt;div class=&quot;headtop&quot;&gt;
        &lt;div class=&quot;headbottom&quot;&gt;&lt;/div&gt;
        &lt;!-- 眼睛部分 --&gt;
        &lt;h1 class=&quot;lefteye&quot;&gt;
          &lt;p class=&quot;lefteye_in&quot;&gt;
            &lt;strong class=&quot;eyeshow&quot;&gt;&lt;/strong&gt;
          &lt;/p&gt;
        &lt;/h1&gt;
        &lt;h1 class=&quot;righteye&quot;&gt;
          &lt;p class=&quot;righteye_in&quot;&gt;
            &lt;strong class=&quot;eyebai&quot;&gt;&lt;/strong&gt;
          &lt;/p&gt;
        &lt;/h1&gt;
        &lt;!-- 嘴巴部分 --&gt;
        &lt;h1 class=&quot;mouth&quot;&gt;&lt;/h1&gt;
        &lt;p class=&quot;mouth_bar&quot;&gt;
          &lt;strong class=&quot;mouth_bar1&quot;&gt;&lt;/strong&gt;
        &lt;/p&gt;
      &lt;/div&gt;

      &lt;!-- 企鹅头部 --&gt;

      &lt;!-- 企鹅身体 --&gt;
      &lt;div class=&quot;body&quot;&gt;
        &lt;div class=&quot;tummy&quot;&gt;
          &lt;div class=&quot;pocket&quot;&gt;
            &lt;div class=&quot;pocket_line1&quot;&gt;
              &lt;div class=&quot;pocket_line2&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;hand&quot;&gt;
          &lt;div class=&quot;lefthand&quot;&gt;&lt;/div&gt;
          &lt;div class=&quot;righthand&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;body_1&quot;&gt;
          &lt;div class=&quot;body_2&quot;&gt;
            &lt;div class=&quot;body_3&quot;&gt;&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 企鹅身体 --&gt;

      &lt;!-- 企鹅脚丫 --&gt;
      &lt;div class=&quot;footer&quot;&gt;
        &lt;div class=&quot;left_footer&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;right_footer&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 企鹅脚丫 --&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>

        </div>
        <!-- .entry-content -->
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2021/08/13/canvas/" rel="prev">
              <div class="background">
                <img class="lazyload" src="/images/bg1.jpg" data-src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/3.jpeg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/3.jpeg">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                canvas</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2021/08/13/nodejs/" rel="next">
              <div class="background">
                <img class="lazyload" src="/images/bg1.jpg" data-src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/5.jpeg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/5.jpeg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                Nodejs</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "zMhFPcMIscDyGbtxHjYFffkx-gzGzoHsz",
        appKey: "c4XBymCm0OmYWLklOAKbUlhE",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="DarkStrand.cn" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/avatar.jpg" itemprop="image" alt="DarkStrand" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="DarkStrand.cn" itemprop="url" rel="author">DarkStrand</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>一个神奇的小伙</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 DarkStrand<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2021</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by &<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">DarkStrand</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2/Bazinga.mp4","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2/Bazinga.mp4","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/Darkstranded/CDN/images/touxiang.JPG">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">FLのBlog</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="https://gitee.com/darkstranded" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/转载/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>
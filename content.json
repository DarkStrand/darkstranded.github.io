{"meta":{"title":"DarkStrand","subtitle":null,"description":"everything will be ok","author":"DarkStrand","url":""},"pages":[{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2021-08-12T02:40:48.567Z","comments":false,"path":"about/index.html","permalink":"/about/index.html","excerpt":"","text":"[ã•ãã‚‰è˜ã®hojun] ä¸&nbsp; Mashiro&nbsp; ï¼ˆ çœŸï¼ˆã¾ï¼‰ç™½ï¼ˆã—ã‚ï¼‰ ï¼‰ å¯¹è¯ä¸­... bot_ui_ini()","keywords":"å…³äº"},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2021-08-12T02:40:48.568Z","comments":false,"path":"client/index.html","permalink":"/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2021-08-12T02:40:48.568Z","comments":false,"path":"bangumi/index.html","permalink":"/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2021-08-12T02:40:48.570Z","comments":false,"path":"donate/index.html","permalink":"/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2021-08-12T02:40:48.569Z","comments":true,"path":"comment/index.html","permalink":"/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯— å™åˆ«æ¢¦ã€æ‰¬å·ä¸€è§‰ã€‚ ã€å®‹ä»£ã€‘å´æ–‡è‹±ã€Šå¤œæ¸¸å®«Â·äººå»è¥¿æ¥¼é›æ³ã€‹","keywords":"ç•™è¨€æ¿"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2021-08-12T02:40:48.571Z","comments":true,"path":"links/index.html","permalink":"/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2021-08-12T12:54:52.145Z","comments":false,"path":"music/index.html","permalink":"/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2021-08-12T02:40:48.571Z","comments":false,"path":"lab/index.html","permalink":"/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2021-08-12T02:40:48.573Z","comments":true,"path":"tags/index.html","permalink":"/tags/index.html","excerpt":"","text":""},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2021-08-12T02:40:48.572Z","comments":true,"path":"rss/index.html","permalink":"/rss/index.html","excerpt":"","text":""},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2021-08-12T02:40:48.573Z","comments":false,"path":"theme-sakura/index.html","permalink":"/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2021-08-12T02:40:48.574Z","comments":false,"path":"video/index.html","permalink":"/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"}],"posts":[{"title":"canvas","slug":"canvas","date":"2021-08-13T08:00:45.558Z","updated":"2021-08-13T08:08:32.209Z","comments":true,"path":"2021/08/13/canvas/","link":"","permalink":"/2021/08/13/canvas/","excerpt":"","text":"ä¸€ã€canvasç®€ä»‹canvasæ˜¯HTML5æ–°å¢çš„ï¼Œä¸€ä¸ªå¯ä»¥ä½¿ç”¨è„šæœ¬ï¼ˆé€šå¸¸ä¸ºJavaScriptï¼‰åœ¨å…¶ä¸­ç»˜åˆ¶å›¾åƒçš„HTMLå…ƒç´ ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ¶ä½œç…§ç‰‡æˆ–è€…åˆ¶ä½œç®€å•ï¼ˆä¹Ÿä¸æ˜¯é‚£ä¹ˆç®€å•ï¼‰çš„åŠ¨ç”»ï¼Œç”šè‡³å¯ä»¥è¿›è¡Œå®æ—¶è§†é¢‘å¤„ç†å’Œæ¸²æŸ“ã€‚ å®ƒæœ€åˆç”±è‹¹æœå†…éƒ¨ä½¿ç”¨è‡ªå·±MacOS X Webkitæ¨å‡ºï¼Œä¾›åº”ç”¨ç¨‹åºä½¿ç”¨åƒä»ªè¡¨ç›˜çš„æ„ä»¶å’ŒSafariæµè§ˆå™¨ä½¿ç”¨ã€‚åæ¥ï¼Œæœ‰äººé€šè¿‡Geckoå†…æ ¸çš„æµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯Mozillaå’ŒFirefoxï¼‰ï¼ŒOperaå’ŒChromeå’Œè¶…æ–‡æœ¬ç½‘ç»œåº”ç”¨æŠ€æœ¯å·¥ä½œç»„å»ºè®®ä¸ºä¸‹ä¸€ä»£çš„ç½‘ç»œæŠ€æœ¯ä½¿ç”¨è¯¥å…ƒç´ ã€‚ Canvasæ˜¯ç”±HTMLä»£ç é…åˆé«˜åº¦å’Œå®½åº¦å±æ€§è€Œå®šä¹‰å‡ºçš„å¯ç»˜åˆ¶åŒºåŸŸã€‚JavaScriptä»£ç å¯ä»¥è®¿é—®è¯¥åŒºåŸŸï¼Œç±»ä¼¼äºå…¶ä»–é€šç”¨çš„äºŒç»´APIï¼Œé€šè¿‡ä¸€å¥—å®Œæ•´çš„ç»˜å›¾å‡½æ•°æ¥åŠ¨æ€ç”Ÿæˆå›¾å½¢ã€‚ Mozillaç¨‹åºä»Geko1.8ï¼ˆFirefox1.5ï¼‰å¼€å§‹æ”¯æŒcanvasï¼ŒInternet Explorerä»IE9å¼€å§‹canvasã€‚Chromeå’ŒOpera9+ä¹Ÿæ”¯æŒcanvasã€‚ äºŒã€CanvasåŸºæœ¬ä½¿ç”¨2.1canvaså…ƒç´ canvasçœ‹èµ·æ¥å’Œ&lt;img&gt;æ ‡ç­¾ä¸€æ ·ï¼Œåªæ˜¯canvasåªæœ‰ä¸¤ä¸ªå¯é€‰çš„å±æ€§widthã€heightå±æ€§ï¼Œè€Œæ²¡æœ‰srcã€altå±æ€§ã€‚ å¦‚æœä¸ç»™canvasè®¾ç½®widthã€heightå±æ€§æ—¶ï¼Œåˆ™é»˜è®¤widthä¸º300ã€heightä¸º150ï¼Œå•ä½éƒ½æ˜¯pxã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨csså±æ€§æ¥è®¾ç½®å®½é«˜ï¼Œä½†æ˜¯å¦‚å®½é«˜å±æ€§å’Œåˆå§‹æ¯”ä¾‹ä¸ä¸€è‡´ï¼Œä»–ä¼šå‡ºç°æ‰­æ›²ã€‚æ‰€ä»¥ï¼Œå»ºè®®æ°¸è¿œä¸è¦ä½¿ç”¨csså±æ€§æ¥è®¾ç½®canvasçš„å®½é«˜ã€‚ æ›¿æ¢å†…å®¹ ç”±äºæŸäº›è¾ƒè€çš„æµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯IE9ä¹‹å‰çš„IEæµè§ˆå™¨ï¼‰æˆ–è€…æµè§ˆå™¨ä¸æ”¯æŒHTMLå…ƒç´ canvasï¼Œåœ¨è¿™äº›æµè§ˆå™¨ä¸Šä½ åº”è¯¥æ€»æ˜¯èƒ½å±•ç¤ºæ›¿ä»£å†…å®¹ã€‚ æ”¯æŒcanvasçš„æµè§ˆå™¨ä¼šåªæ¸²æŸ“canvasæ ‡ç­¾ï¼Œè€Œå¿½ç•¥å…¶ä¸­çš„æ›¿ä»£å†…å®¹ã€‚ä¸æ”¯æŒcanvasçš„æµè§ˆå™¨ä¼šç›´æ¥æ¸²æŸ“æ›¿ä»£å†…å®¹ã€‚ ç”¨æ–‡æœ¬æ›¿æ¢ï¼š &lt;canvas&gt; ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒcanvasï¼Œè¯·å‡çº§ä½ çš„æµè§ˆå™¨ã€‚ &lt;/canvas&gt; ç”¨&lt;img&gt;æ›¿æ¢ï¼š &lt;canvas&gt; &lt;img src=&quot;./ç¾å¥³.jgp&quot; alt=&quot;&quot;&gt; &lt;/canvas&gt; ç»“æŸæ ‡ç­¾ä¸å¯çœç•¥ ä¸&lt;img&gt;å…ƒç´ ä¸åŒï¼Œcanvaså…ƒç´ éœ€è¦ç»“æŸæ ‡ç­¾ï¼ˆï¼‰ã€‚å¦‚æœç»“æŸæ ‡ç­¾ä¸å­˜åœ¨ï¼Œåˆ™æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ä¼šè¢«è®¤ä¸ºæ˜¯æ›¿ä»£å†…å®¹ï¼Œå°†ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ ##2.2æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆThre Rending Contextï¼‰ canvasä¼šåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„ç”»å¸ƒï¼Œä¼šå…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡(ç”»ç¬”)ï¼Œä½¿ç”¨æ¸²æŸ“ä¸Šä¸‹æ–‡æ¥ç»˜åˆ¶å’Œå¤„ç†è¦å±•ç¤ºçš„å†…å®¹ã€‚ æˆ‘ä»¬é‡ç‚¹ç ”ç©¶2Dæ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚å…¶ä»–çš„ä¸Šä¸‹æ–‡æˆ‘ä»¬æš‚ä¸ç ”ç©¶ï¼Œæ¯”å¦‚ï¼ŒWebGLä½¿ç”¨äº†åŸºäºOpenGLESçš„3Dä¸Šä¸‹æ–‡ã€‚ var canvas = document.getElementById(&#39;tutorial&#39;); //è·å¾—2dä¸Šä¸‹æ–‡å¯¹è±¡ var ctx = canvas.getContext(&#39;2d&#39;) 2.3æ£€æµ‹æ”¯æŒæ€§var canvas = document.getElementById(&#39;tutorial&#39;); if(canvas.getContext) { var ctx = canvas.getContext(&#39;2d&#39;) // drawing code here } else { // canvas-unsupported code here } 2.4ä»£ç æ¨¡æ¿&lt;canvas id=&quot;tutorial&quot; width=&quot;300&quot; height=&quot;300&quot;&gt;&lt;/canvas&gt; &lt;script type=&quot;text/javascript&quot;&gt; function draw() { var canvas = document.getElementById(&#39;tutorial&#39;); if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) //å¼€å§‹å†™ä»£ç  } &lt;/script&gt; 2.5ä¸€ä¸ªç®€å•çš„ä¾‹å­ä»¥ä¸‹å®ä¾‹ç»˜åˆ¶ä¸¤ä¸ªé•¿æ–¹å½¢ &lt;canvas id=&quot;tutorial&quot; width=&quot;300&quot; height=&quot;300&quot;&gt;&lt;/canvas&gt; &lt;script type=&quot;text/javascript&quot;&gt; function draw() { var canvas = document.getElementById(&#39;tutorial&#39;); if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.fillStyle = &quot;rgb(200,0,0)&quot; //ç»˜åˆ¶çŸ©å½¢ ctx.fillRect (10,10,55,50) ctx.fillStyle = &quot;rgb(0,0,200,0.5)&quot; ctx.fillRect (30,30,55,50) } draw() &lt;/script&gt; ä¸‰ã€ç»˜åˆ¶å½¢çŠ¶3.1æ …æ ¼(grid)å’Œåæ ‡ç©ºé—´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œcanvaså…ƒç´ é»˜è®¤è¢«ç½‘æ ¼æ‰€è¦†ç›–ã€‚é€šå¸¸æ¥è¯´ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå•å…ƒ ç›¸å½“äºcanvaså…ƒç´ ä¸­çš„ä¸€åƒç´ ã€‚æ …æ ¼çš„èµ·ç‚¹ä¸ºå·¦ä¸Šè§’ï¼Œåæ ‡ä¸º(0,0)ã€‚æ‰€æœ‰å…ƒç´ çš„ä½ç½®éƒ½ç›¸å¯¹äºåŸç‚¹æ¥å®šä½ã€‚æ‰€ä»¥å›¾ä¸­è“è‰²æ–¹å½¢å·¦ä¸Šè§’çš„åæ ‡ä¸ºè·ç¦»å·¦è¾¹ï¼ˆXè½´ï¼‰xåƒç´ ï¼Œè·ç¦»ä¸Šè¾¹ï¼ˆYè½´ï¼‰yåƒç´ ï¼Œåæ ‡ä¸º(x,y)ã€‚ åé¢æˆ‘ä»¬ä¼šæ¶‰åŠåˆ°åæ ‡åŸç‚¹çš„å¹³ç§»ã€ç½‘æ ¼çš„æ—‹è½¬ä»¥åŠç¼©æ”¾ç­‰ã€‚ 3.2ç»˜åˆ¶çŸ©å½¢canvasåªæ”¯æŒä¸€ç§åŸç”Ÿçš„å›¾å½¢ç»˜åˆ¶ï¼šçŸ©å½¢ã€‚æ‰€æœ‰å…¶ä»–å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„(path)ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬æ‹¥æœ‰ä¼—å¤šè·¯å¾„ç”Ÿæˆçš„æ–¹æ³•è®©å¤æ‚å›¾å½¢çš„ç»˜åˆ¶æˆä¸ºäº†å¯èƒ½ã€‚ canvasæä¾›äº†ä¸‰ç§æ–¹æ³•ç»˜åˆ¶çŸ©å½¢ï¼š fillRect(x, y, width, height)ï¼šç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢ã€‚ strokeRect(x, y, width, height)ï¼šç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡†ã€‚ clearRect(x, y, width, height)ï¼šæ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸï¼Œç„¶åè¿™å—åŒºåŸŸä¼šå˜çš„å®Œå…¨é€æ˜ã€‚ è¯´æ˜ï¼šè¿™3ä¸ªæ–¹æ³•å…·æœ‰ç›¸åŒçš„å‚æ•°ã€‚ x,yï¼šæŒ‡çš„æ˜¯çŸ©å½¢çš„å·¦ä¸Šè§’çš„åæ ‡ã€‚(ç›¸å¯¹äºcanvasçš„åæ ‡åŸç‚¹) width,heightï¼šæŒ‡çš„æ˜¯ç»˜åˆ¶çš„çŸ©å½¢çš„å®½å’Œé«˜ã€‚ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.fillRect(10,10,100,50) //ç»˜åˆ¶çŸ©å½¢ï¼Œå¡«å……çš„é»˜è®¤é¢œè‰²ä¸ºé»‘è‰² ctx.strokeRect(10, 70, 100 ,50) //ç»˜åˆ¶çŸ©å½¢è¾¹æ¡† } draw() ctx.clearRect(15, 15, 50, 25) å››ã€ç»˜åˆ¶è·¯å¾„(path)å›¾å½¢çš„åŸºæœ¬å…ƒç´ æ˜¯è·¯å¾„ã€‚ è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆã€‚ ä¸€ä¸ªè·¯å¾„ï¼Œç”šè‡³ä¸€ä¸ªå­è·¯å¾„ï¼Œéƒ½æ˜¯é—­åˆçš„ã€‚ ä½¿ç”¨è·¯å¾„ç»˜åˆ¶å›¾å½¢éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼š åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹ è°ƒç”¨ç»˜åˆ¶æ–¹æ³•å»ç»˜åˆ¶å‡ºè·¯å¾„ æŠŠè·¯å¾„å°é—­ ä¸€æ—¦è·¯å¾„ç”Ÿæˆï¼Œé€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢ ä¸‹é¢æ˜¯éœ€è¦ç”¨åˆ°çš„æ–¹æ³•ï¼š beginPath() â€‹ æ–°å»ºä¸€æ¡è·¯å¾„ï¼Œè·¯å¾„ä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šç”Ÿæˆè·¯å¾„ moveTo(x, y) æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡(x, y)ã€‚ç›¸å½“äºè®¾ç½®è·¯å¾„çš„èµ·å§‹ç‚¹åæ ‡ã€‚ closePath() é—­åˆè·¯å¾„ä¹‹åï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­ stroke() é€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾å½¢è½®å»“ fill() é€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾å½¢ 4.1ç»˜åˆ¶çº¿æ®µfunction draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() //æ–°å»ºä¸€æ¡path ctx.moveTo(50,50) // æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ ctx.lineTo(200,50) //ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡(200,50)çš„ç›´çº¿ ctx.closePath() //é—­åˆè·¯å¾„ã€‚ä¼šæ‹‰ä¸€æ¡ä»å½“å‰ç‚¹åˆ°pathèµ·å§‹ç‚¹çš„ç›´çº¿ã€‚å¦‚æœå½“å‰ç‚¹ä¸èµ·å§‹ç‚¹é‡åˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åš ctx.stroke() //ç»˜åˆ¶è·¯å¾„ } draw() 4.2ç»˜åˆ¶ä¸‰è§’å½¢è¾¹æ¡†function draw() { var canvas = document.getElmentById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.moveTo(50,50) ctx.lineTo(200,50) ctx.lineTo(200,200) ctx.closePath() //è™½ç„¶æˆ‘ä»¬åªç»˜åˆ¶äº†ä¸¤æ¡çº¿æ®µï¼Œä½†æ˜¯closePathä¼šclosePathï¼Œä»ç„¶æ˜¯ä¸€ä¸ªä¸‰è§’å½¢ ctx.stroke() //æè¾¹ã€‚strokeä¸ä¼šè‡ªåŠ¨closePath() } draw() 4.3å¡«å……ä¸‰è§’å½¢function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.moveTo(50,50) ctx.lineTo(200,50) ctx.lineTo(200,200) ctx.fill() //å¡«å……é—­åˆåŒºåŸŸã€‚å¦‚æœpathæ²¡æœ‰é—­åˆï¼Œåˆ™fill()ä¼šè‡ªåŠ¨é—­åˆè·¯å¾„ } 4.4ç»˜åˆ¶åœ†å¼§æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ç»˜åˆ¶åœ†å¼§ï¼š arc(x, y, r, startAngle, endAngle, anticlockwise): ä»¥(x,y) ä¸ºåœ†å¿ƒï¼Œä»¥rä¸ºåŠå¾„ï¼Œä»startAngleå¼§åº¦å¼€å§‹åˆ°endAngleå¼§åº¦ç»“æŸã€‚anticlosewiseæ˜¯å¸ƒå°”å€¼ï¼Œtrueè¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalseè¡¨ç¤ºé¡ºæ—¶é’ˆ(é»˜è®¤æ˜¯é¡ºæ—¶é’ˆ)ã€‚ è¿™é‡Œçš„åº¦æ•°éƒ½æ˜¯å¼§åº¦ã€‚ 0å¼§åº¦æ˜¯æŒ‡çš„xè½´æ­£æ–¹å‘ã€‚ radians = (Math.PI/180)*degrees //è§’åº¦è½¬æ¢æˆå¼§åº¦ arcTo(x1,y1,x2,y2,radius): æ ¹æ®ç»™å®šçš„æ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»ä¸€æ®µåœ†å¼§ï¼Œæœ€åå†ä»¥ç›´çº¿è¿æ¥ä¸¤ä¸ªæ§åˆ¶ç‚¹ã€‚ //åœ†å¼§æ¡ˆä¾‹1 function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.arc(50,50,40,0,Math.PI /2, false) ctx.stroke() } draw() //åœ†å¼§æ¡ˆä¾‹2 funcion draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.arc(50,50,50,0,Math.PI/2,false) ctx.stroke() ctx.beginPath() ctx.arc(150,50,40,0,-Math.PI/2,true) ctx.closePath() ctx.stroke() ctx.beginPath() ctx.arc(50,150,40,-Math.PI/2,Math.PI/2,false) ctx.fill() ctx.beginPath() ctx.arc(150,150,40,0,Math.PI,false) ctx.fill() } draw() //åœ†å¼§æ¡ˆä¾‹3 function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.moveTo(50,50) //å‚æ•°1ã€2ï¼šæ§åˆ¶ç‚¹1åæ ‡ //å‚æ•°3ã€4ï¼šæ§åˆ¶ç‚¹2åæ ‡ //å‚æ•°5ï¼šåœ†å¼§åŠå¾„ ctx.arcTo(200,50,200,200,100) ctx.lineTo(200,200) ctx.stroke() ctx.beginPath() ctx.rect(50,50,10,10) ctx.rect(200,50,10,10) ctx.rect(200,200,10,10) ctx.fill() } arcToæ–¹æ³•çš„è¯´æ˜ï¼š è¿™ä¸ªæ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ã€‚ç»˜åˆ¶çš„å¼§å½¢æ˜¯ç”±ä¸¤æ¡åˆ‡çº¿æ‰€å†³å®šã€‚ ç¬¬1æ¡åˆ‡çº¿ï¼šèµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹1å†³å®šçš„ç›´çº¿ã€‚ ç¬¬2æ¡åˆ‡çº¿ï¼šæ§åˆ¶ç‚¹1å’Œæ§åˆ¶ç‚¹2å†³å®šçš„ç›´çº¿ã€‚ å…¶å®ç»˜åˆ¶çš„åœ†å¼§å°±æ˜¯ä¸è¿™ä¸¤æ¡ç›´çº¿ç›¸åˆ‡çš„åœ†å¼§ã€‚ 4.5ç»˜åˆ¶è´å¡å°”æ›²çº¿4.5.1ä»€ä¹ˆæ˜¯è´å¡å°”æ›²çº¿è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿æ˜¯ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹ï¼Œæˆ‘ä»¬åœ¨ç»˜å›¾å·¥å…·ä¸Šçœ‹åˆ°çš„é’¢ç¬”å·¥å…·å°±æ˜¯æ¥åšè¿™ç§çŸ¢é‡æ›²çº¿çš„ã€‚ è´å¡å°”æ›²çº¿æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­ç›¸å½“é‡è¦çš„å‚æ•°æ›²çº¿ï¼Œåœ¨ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„ä½å›¾è½¯ä»¶ä¸­ä¹Ÿæœ‰è´å¡å°”æ›²çº¿å·¥å…·å…¥PhotoShopç­‰ã€‚åœ¨Flash4ä¸­è¿˜æ²¡æœ‰å®Œæ•´çš„æ›²çº¿å·¥å…·ï¼Œè€Œåœ¨Flash5é‡Œé¢å·²ç»æä¾›å‡ºè´å¡å°”æ›²çº¿å·¥å…·ã€‚ è´å¡å°”æ›²çº¿äº1962ï¼Œç”±æ³•å›½å·¥ç¨‹å¸ˆçš®åŸƒå°”Â·è´å¡å°”ï¼ˆPierre BÃ©zierï¼‰æ‰€å¹¿æ³›å‘è¡¨ï¼Œä»–è¿ç”¨è´å¡å°”æ›²çº¿æ¥ä¸ºæ±½è½¦çš„ä¸»ä½“è¿›è¡Œè®¾è®¡ã€‚è´å¡å°”æ›²çº¿æœ€åˆç”±Paul de Casteljau äº 1959 å¹´è¿ç”¨ de Casteljau æ¼”ç®—æ³•å¼€å‘ï¼Œä»¥ç¨³å®šæ•°å€¼çš„æ–¹æ³•æ±‚å‡ºè´å…¹æ›²çº¿ã€‚ ä¸€æ¬¡è´å¡å°”æ›²çº¿å…¶å®æ˜¯ä¸€æ¡ç›´çº¿ äºŒæ¬¡è´å¡å°”æ›²çº¿ ä¸‰æ¬¡è´å¡å°”æ›²çº¿ 4.5.2ç»˜åˆ¶è´å¡å°”æ›²çº¿ ç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼š/kwÉ’â€™drÃ¦tÉªk/ quadraticCurveTo(cp1x,cp1y,x,y) è¯´æ˜ï¼š å‚æ•°1å’Œ2ï¼šæ§åˆ¶ç‚¹åæ ‡ å‚æ•°3å’Œ4ï¼šç»“æŸç‚¹åæ ‡ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.moveTo(10,200) //èµ·å§‹ç‚¹ var cp1x = 40, cp1y = 100 //æ§åˆ¶ç‚¹ var x = 200, y = 200 //ç»“æŸç‚¹ //ç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿ ctx.quadraticCurveTo(cp1x, cp1y, x, y) ctx.stroke() ctx.beginPath() ctx.rect(10,200,10,10) ctx.rect(cp1x,cp1y,10,10) ctx.rect(x,y,10,10) ctx.fill() } draw() ç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿: bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) è¯´æ˜ï¼š å‚æ•°1å’Œ2ï¼šæ§åˆ¶ç‚¹1çš„åæ ‡ å‚æ•°3å’Œ4ï¼šæ§åˆ¶ç‚¹2çš„åæ ‡ å‚æ•°5å’Œ6ï¼šç»“æŸç‚¹çš„åæ ‡ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.beginPath() ctx.moveTo(40,200) //èµ·å§‹ç‚¹ var cp1x = 20, cp1y = 100 //æ§åˆ¶ç‚¹1 var cp2x = 100, cp2y = 120 //æ§åˆ¶ç‚¹2 var x = 200, y = 200 //ç»“æŸç‚¹ //ç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿ ctx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y) ctx.stroke() ctx.beginPath(); ctx.rect(40, 200, 10, 10); ctx.rect(cp1x, cp1y, 10, 10); ctx.rect(cp2x, cp2y, 10, 10); ctx.rect(x, y, 10, 10); ctx.fill(); } draw() äº”ã€æ·»åŠ æ ·å¼å’Œé¢œè‰²åœ¨å‰é¢çš„ç»˜åˆ¶çŸ©å½¢ç« èŠ‚ä¸­ï¼Œåªç”¨åˆ°äº†é»˜è®¤çš„çº¿æ¡å’Œé¢œè‰²ã€‚ å¦‚æœæƒ³è¦ç»™å›¾å½¢ä¸Šè‰²ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§å¯ä»¥åšåˆ°ã€‚ fillStyle = color è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰² strokeStyle = color è®¾ç½®å›¾å½¢è½®å»“çš„é¢œè‰² å¤‡æ³¨ï¼š colorå¯ä»¥æ˜¯è¡¨è¾¾cssé¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–è€…å›¾æ¡ˆå¯¹è±¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ¡å’Œå¡«å……é¢œè‰²éƒ½æ˜¯é»‘è‰² ä¸€æ—¦æ‚¨è®¾ç½®äº†strokeStyleæˆ–è€…fillStyleçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å€¼å°±ä¼šæˆä¸ºæ–°ç»˜åˆ¶çš„å›¾å½¢çš„é»˜è®¤å€¼ã€‚å¦‚æœä½ è¦ç»™æ¯ä¸ªå›¾å½¢ä¸Šä¸åŒçš„é¢œè‰²ï¼Œä½ éœ€è¦é‡æ–°è®¾ç½®fillStyleæˆ–strokeStyleçš„å€¼ fillStylefunction draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) for(var i = 0; i &lt; 6; i++) { for(var j = 0; j &lt; 6; j++) { ctx.fillStyle = &#39;rgb(&#39; + Math.floor(255 - 42.5 * i) + &#39;,&#39; + Math.floor(255 - 42.5 * j) + &#39;,0)&#39; ctx.fillRect(j * 50, i * 50, 50, 50) } } } draw() strokeStylefunction draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) for(var i = 0; i &lt; 6; i++) { for(var j = 0;j &lt; 6;j++) { ctx.strokeStyle = `rgb(${randomInt(0,255)}, ${randomInt(0,255)}, ${randomInt(0,255)})` ctx.strokeRect(j*50,i*50,40,40) } } } draw() //è¿”å›éšæœºçš„[from,to]ä¹‹é—´çš„æ•´æ•°(åŒ…æ‹¬fromï¼Œä¹ŸåŒ…æ‹¬to) function randomInt(from,to) { return parseInt(Math.random() * (to-from +1) + from) } Transparency(é€æ˜åº¦)globalAlpha = transparencyValue:è¿™ä¸ªå±æ€§å½±å“åˆ°canvasé‡Œæ‰€æœ‰å›¾å½¢çš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯0.0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ°1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯1.0 globalAlphaå±æ€§åœ¨éœ€è¦ç»˜åˆ¶å¤§é‡æ‹¥æœ‰ç›¸åŒé€æ˜åº¦çš„å›¾å½¢æ—¶å€™ç›¸å½“é«˜æ•ˆã€‚ä¸è¿‡ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨rgba()è®¾ç½®é€æ˜åº¦æ›´å¥½ä¸€äº›ã€‚ 1. line style çº¿å®½ã€‚åªèƒ½æ˜¯æ­£å€¼ã€‚é»˜è®¤æ˜¯1.0 èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„è¿çº¿ä¸ºä¸­å¿ƒï¼Œä¸Šä¸‹å„å çº¿å®½çš„ä¸€åŠã€‚ ctx.beginPath() ctx.moveTo(10,10) ctx.lineTo(100,10) ctx.lineWidth = 10 ctx.stroke() ctx.beginPath() ctx.moveTo(110,10) ctx.lineTo(160,10) ctx.lineWidth = 20 ctx.stroke() 2. lineCap = type çº¿æ¡æœ«ç«¯æ ·å¼ã€‚ å…±æœ‰ä¸‰ä¸ªå€¼ï¼š buttï¼š çº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸ roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸ squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€èˆ¬çš„çŸ©å½¢åŒºåŸŸ var lineCaps = [&#39;butt&#39;, &#39;round&#39;, &#39;square&#39;] for(var i = 0;i&lt;3;i++) { ctx.beginPath() ctx.moveTo(20+30*i,30) ctx.lineTo(20+30*i,100) ctx.lineWidth = 20 ctx.lineCap = lineCaps[i] ctx.stroke() } ctx.beginPath() ctx.moveTo(0,30) ctx.lineTo(300,30) ctx.moveTo(0,100) ctx.lineTo(300,100) ctx.strokeStyle = &#39;red&#39; ctx.lineWidth = 1 ctx.stroke() 3. lineJoin = type åŒä¸€ä¸ªpathå†…ï¼Œè®¾å®šçº¿æ¡ä¸çº¿æ¡é—´æ¥åˆå¤„çš„æ ·å¼ã€‚ å…±æœ‰ä¸‰ä¸ªå€¼round,bevelå’Œmiterï¼š roundé€šè¿‡å¡«å……ä¸€ä¸ªé¢å¤–çš„ï¼Œåœ†å¿ƒåœ¨ç›¸è¿éƒ¨åˆ†æœ«ç«¯çš„æ‰‡å½¢ï¼Œç»˜åˆ¶æ‹è§’çš„å½¢çŠ¶ã€‚åœ†è§’çš„åŠå¾„æ˜¯çº¿æ®µçš„å®½åº¦ã€‚ bevelåœ¨ç›¸è¿éƒ¨åˆ†çš„æœ«ç«¯å¡«å……ä¸€ä¸ªé¢å¤–çš„ä»¥ä¸‰è§’å½¢ä¸ºåº•çš„åŒºåŸŸï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„çŸ©å½¢æ‹è§’ã€‚ miter(é»˜è®¤)é€šè¿‡å»¶ä¼¸ç›¸è¿éƒ¨åˆ†çš„å¤–è¾¹ç¼˜ï¼Œä½¿å…¶ç›¸äº¤äºä¸€ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé¢å¤–çš„è±å½¢åŒºåŸŸã€‚ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) var lineJoin = [&#39;round&#39;,&#39;bevel&#39;, &#39;miter&#39;] ctx.lineWidth = 20 for(var i =0; i&lt; lineJoin.length;i++) { ctx.lineJoin = lineJoin[i] ctx.beginPath() ctx.moveTo(50,50+i*50) ctx.lineTo(100,100+i*50) ctx.lineTo(150,50+i*50) ctx.lineTo(200,100+i*50) ctx.lineTo(250,50+i*50) ctx.stroke() } } draw() 4. è™šçº¿ ç”¨setLineDashæ–¹æ³•å’ŒlineDashOffsetå±æ€§æ¥æŒ‡å®šè™šçº¿æ ·å¼ã€‚ setLineDashæ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æŒ‡å®šçº¿æ®µä¸é—´éš™çš„äº¤æ›¿ï¼› lineDashOffsetå±æ€§è®¾ç½®èµ·å§‹åç§»é‡ã€‚ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.setLineDash([20,5]) //[å®çº¿é•¿åº¦ï¼Œé—´éš™é•¿åº¦] ctx.lineDashOffset = -0 ctx.strokeRect(50,50,210,210) } draw() å¤‡æ³¨ï¼šgetLineDash()è¿”å›ä¸€ä¸ªåŒ…å«å½“å‰è™šçº¿æ ·å¼ï¼Œé•¿åº¦ä¸ºéå¶æ•°çš„æ•°ç»„ã€‚ å…­ã€ç»˜åˆ¶æ–‡æœ¬ç»˜åˆ¶æ–‡æœ¬çš„ä¸¤ä¸ªæ–¹æ³• canvasæä¾›äº†ä¸¤ç§æ–¹æ³•æ¥æ¸²æŸ“æ–‡æœ¬ï¼š fillText(text, x, y, [, maxWidth])åœ¨æŒ‡å®šçš„(x,y)ä½ç½®å¡«å……æŒ‡å®šçš„æ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„ã€‚ strokeText(text, x, y, [, maxWidth])åœ¨æŒ‡å®šçš„(x,y)ä½ç½®ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡†ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„ã€‚ var ctx; function draw() { var canvas = document.getELementById(&#39;tutorial&#39;) if(!canvas.getContext) return ctx = canvas.getContext(&#39;2d&#39;) ctx.font = &#39;100px sans-serif&#39; ctx.fillText(&#39;å¤©è‹¥æœ‰æƒ…&#39;,10,100) ctx.strokeText(&#39;å¤©è‹¥æœ‰æƒ…&#39;,10,200) } draw() ç»™æ–‡æœ¬æ·»åŠ æ ·å¼ font = value å½“å‰æˆ‘ä»¬ç”¨æ¥ç»˜åˆ¶æ–‡æœ¬çš„æ ·å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨å’Œcss fontå±æ€§ç›¸åŒçš„è¯­æ³•ã€‚é»˜è®¤çš„å­—ä½“æ˜¯10px sans-serifã€‚ textAlign = value æ–‡æœ¬å¯¹é½é€‰é¡¹ã€‚å¯é€‰çš„å€¼åŒ…æ‹¬ï¼šstartï¼Œendï¼Œleftï¼Œrightï¼Œcenterã€‚é»˜è®¤æ˜¯startã€‚ textBaseline = value åŸºçº¿å¯¹é½é€‰é¡¹ï¼Œå¯é€‰çš„å€¼åŒ…æ‹¬ï¼štopï¼Œhangingï¼Œmiddleï¼Œalphabeticï¼Œideographicï¼Œbottomã€‚é»˜è®¤å€¼æ˜¯alphabeticã€‚ direction = value æ–‡æœ¬æ–¹å‘ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼šltrï¼Œrtlï¼Œinheritã€‚é»˜è®¤å€¼æ˜¯inheritã€‚ ä¸ƒã€ç»˜åˆ¶å›¾ç‰‡æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨canvasä¸Šç›´æ¥ç»˜åˆ¶å›¾ç‰‡ã€‚ 7.1ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡var img = new Image() //åˆ›å»ºä¸€ä¸ª&lt;img&gt;å…ƒç´  img.src = &#39;myImage.png&#39; //è®¾ç½®å›¾ç‰‡åŸåœ°å€ ç»˜åˆ¶img //å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img //å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ ctx.drawImage(img,0,0) æ³¨æ„ï¼šè€ƒè™‘åˆ°å›¾ç‰‡æ˜¯ä»ç½‘ç»œåŠ è½½ï¼Œå¦‚æœdrawImageçš„æ—¶å€™å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨åŠ è½½å®Œæˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸ªåˆ«æµè§ˆå™¨ä¼šæŠ›å¼‚å¸¸ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¿è¯åœ¨imgç»˜åˆ¶å®Œæˆä¹‹åå†drawImageã€‚ var img = new Image() //åˆ›å»ºimgå…ƒç´  img.onload = function() { ctx.drawImage(img, 0, 0) } img.src = &#39;myImage.png&#39; //è®¾ç½®å›¾ç‰‡cåœ°å€ 7.2 ç»˜åˆ¶imgæ ‡ç­¾å…ƒç´ ä¸­çš„å›¾ç‰‡imgå¯ä»¥newï¼Œä¹Ÿå¯ä»¥æ¥æºäºæˆ‘ä»¬é¡µé¢ä¸­çš„æ ‡ç­¾ã€‚ &lt;img src=&quot;./ç¾å¥³.jpg&quot; alt=&quot;&quot; width=&quot;300&quot;&gt;&lt;br&gt; &lt;canvas id=&quot;tutorial&quot; width=&quot;600&quot; height=&quot;400&quot;&gt;&lt;/canvas&gt; function draw() { var canvas = document.getElementById(&#39;tutorial) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) var img = document.querySelector(&#39;img&#39;) ctx.drawImg(img,0,0) } document.querySelector(&#39;img&#39;).onclick = function() { draw() } ç¬¬ä¸€å¼ å›¾ç‰‡å°±æ˜¯é¡µé¢ä¸­çš„ &lt;img&gt; æ ‡ç­¾ï¼š 7.3 ç¼©æ”¾å›¾ç‰‡drawImage()å¯ä»¥å†æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼š drawImage(image,x,y,width,height) è¿™ä¸ªæ–¹æ³•å¤šäº†ä¸¤ä¸ªå‚æ•°ï¼šwidthå’Œheightï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç”¨æ¥æ§åˆ¶ å½“åƒcanvasç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ ctx.drawImage(img,0,0,400,200) ##7.4 åˆ‡ç‰‡(slice) drawImage(image,sx,sy,sWidth,sHeight,dx,dy,dWidth,dHeight) ç¬¬ä¸€ä¸ªå‚æ•°å’Œå…¶ä»–çš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªå›¾åƒæˆ–è€…å¦ä¸€ä¸ªcanvasçš„å¼•ç”¨ã€‚ å…¶ä»–8ä¸ªå‚æ•°ï¼šå‰4ä¸ªäº‹å®šä¹‰å›¾åƒæºçš„åˆ‡ç‰‡ä½ç½®å’Œå¤§å°ï¼Œåå››ä¸ªåˆ™æ˜¯å®šä¹‰åˆ‡ç‰‡çš„ç›®æ ‡æ˜¾ç¤ºä½ç½®å’Œå¤§å°ã€‚ å…«ã€çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤Saving and restoring stateæ˜¯ç»˜åˆ¶å¤æ‚å›¾å½¢æ—¶å¿…ä¸å¯å°‘çš„æ“ä½œã€‚ save()å’Œrestore() saveå’Œrestoreæ–¹æ³•æ˜¯ç”¨æ¥ä¿å­˜å’Œæ¢å¤canvasçŠ¶æ€çš„ï¼Œéƒ½æ²¡æœ‰å‚æ•°ã€‚ Canvasçš„çŠ¶æ€å°±æ˜¯å½“å‰ç”»é¢åº”ç”¨çš„æ‰€æœ‰æ ·å¼å’Œå˜å½¢çš„ä¸€ä¸ªå¿«ç…§ã€‚ 8.1 å…³äºsave() CanvasçŠ¶æ€å­˜å‚¨åœ¨æ ˆä¸­ï¼Œæ¯å½“save()æ–¹æ³•è¢«è°ƒç”¨åï¼Œå½“å‰çš„çŠ¶æ€å°±è¢«æ¨é€åˆ°æ ˆä¸­ä¿å­˜ã€‚ ä¸€ä¸ªç»˜ç”»çŠ¶æ€åŒ…æ‹¬: å½“å‰åº”ç”¨çš„å˜å½¢ï¼ˆå³ç§»åŠ¨ï¼Œæ—‹è½¬å’Œç¼©æ”¾ï¼‰ strokeStyle,fillStyle,globalAlpha,lineWidth,lineCap,lineJoin,miterLimit,shadowOffsetX,shadowOffsetY,shadowBlur,shadowColor,globalCompositeOperationçš„å€¼ å½“å‰çš„è£åˆ‡è·¯å¾„ï¼ˆclipping path) å¯ä»¥è°ƒç”¨ä»»æ„å¤šæ¬¡saveæ–¹æ³•ï¼ˆç±»ä¼¼æ•°ç»„çš„push()ï¼‰ 8.2å…³äºresotre() æ¯ä¸€æ¬¡è°ƒç”¨restoreæ–¹æ³•ï¼Œä¸Šä¸€ä¸ªä¿å­˜çš„çŠ¶æ€å°±ä»æ ˆä¸­å¼¹å‡ºï¼Œæ‰€æœ‰è®¾å®šéƒ½æ¢å¤ï¼ˆç±»ä¼¼æ•°ç»„pop()ï¼‰ var ctx; function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.fillRect(0,0,150,150) //ä½¿ç”¨é»˜è®¤è®¾ç½®ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ ctx.save() //ä¿å­˜é»˜è®¤çŠ¶æ€ ctx.fillStyle = &#39;red&#39; //åœ¨åŸæœ‰é…ç½®åŸºç¡€ä¸Šå¯¹é¢œè‰²åšæ”¹å˜ ctx.fillRect(15,15,120,120) //ä½¿ç”¨å¿ƒå¾—è®¾ç½®ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ ctx.save() //ä¿å­˜å½“å‰çŠ¶æ€ ctx.fillStyle = &#39;#FFF&#39; //å†æ¬¡æ”¹å˜é¢œè‰²çŠ¶æ€ ctx.fillRect(30,30,90,90) //ä½¿ç”¨å¿ƒå¾—é…ç½®ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ ctx.restore() //é‡æ–°åŠ è½½ä¹‹å‰çš„é¢œè‰²çŠ¶æ€ ctx.fillRect(45,45,60,60) //ä½¿ç”¨ä¸Šä¸€æ¬¡çš„é…ç½®ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ ctx.restore() //åŠ è½½é»˜è®¤é¢œè‰²é…ç½® ctx.fillRect(60,60,30,30) //ä½¿ç”¨åŠ è½½çš„é…ç½®ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ } draw() ä¹ã€å˜å½¢9.1translatetranslate(x,y) ç”¨æ¥ç§»åŠ¨canvasçš„åŸç‚¹åˆ°æŒ‡å®šçš„ä½ç½® translateæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚xæ˜¯å·¦å³åç§»é‡ï¼Œyæ˜¯ä¸Šä¸‹åç§»é‡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ åœ¨åšå˜å½¢ä¹‹å‰å…ˆä¿å­˜çŠ¶æ€æ˜¯ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè°ƒç”¨restoreæ–¹æ³•æ¯”æ‰‹åŠ¨æ¢å¤åŸå½¢çš„çŠ¶æ€è¦ç®€å•å¾—å¤šã€‚åˆå¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ªå¾ªç¯ä¸­åšä½ç§»ä½†æ²¡æœ‰ä¿å­˜å’Œæ¢å¤canvasçš„çŠ¶æ€ï¼Œå¾ˆå¯èƒ½åˆ°æœ€åä¼šå‘ç°æ€ä¹ˆæœ‰äº›ä¸œè¥¿ä¸è§äº†ï¼Œé‚£æ˜¯å› ä¸ºå®ƒå¾ˆå¯èƒ½å·²ç»è¶…å‡ºcanvasèŒƒå›´ä»¥å¤–äº†ã€‚æ³¨æ„ï¼štranslateç§»åŠ¨çš„æ˜¯canvasçš„åæ ‡åŸç‚¹(åæ ‡å˜æ¢)ã€‚ var ctx; function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.save() //ä¿å­˜åæ ‡åŸç‚¹å¹³ç§»ä¹‹å‰çš„çŠ¶æ€ ctx.translate(100,100) ctx.strokeRect(0,0,100,100) ctx.restore() ctx.translate(220,200) ctx.fillRect(0,0,100,100) } draw() 9.2 rotaterotate(angle) æ—‹è½¬åæ ‡è½´ã€‚ è¿™ä¸ªæ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼šæ—‹è½¬çš„è§’åº¦ï¼ˆangleï¼‰ï¼Œå®ƒæ˜¯é¡ºæ—¶é’ˆæ–¹å‘çš„ï¼Œä»¥å¼§åº¦ä¸ºå•ä½çš„å€¼ã€‚æ—‹è½¬çš„ä¸­å¿ƒæ˜¯åæ ‡åŸç‚¹ã€‚ function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvs.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.fillStyle = &#39;red&#39; ctx.save() ctx.translate(100,100) ctx.rotate(Math.PI/180*45) ctx.fillStyle = &#39;blue&#39; ctx.fillRect(0,0,100,100) ctx.restore() ctx.save() ctx.translate(0,0) ctx.fillRect(0,0,50,50) ctx.restore() } draw() 9.3 scalescale(x,y) æˆ‘ä»¬ç”¨å®ƒæ¥å¢å‡å›¾å½¢åœ¨canvasä¸­çš„åƒç´ æ•°ç›®ï¼Œå¯¹å½¢çŠ¶ã€ä½å›¾è¿›è¡Œç¼©å°æˆ–è€…æ”¾å¤§ã€‚ scaleæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚x,yåˆ†åˆ«æ˜¯æ¨ªè½´å’Œçºµè½´çš„ç¼©æ”¾å› å­ï¼Œå®ƒä»¬éƒ½å¿…é¡»æ˜¯æ­£å€¼ã€‚å€¼æ¯”1.0å°è¡¨ç¤ºç¼©å°ï¼Œæ¯”1.0å¤§è¡¨ç¤ºæ”¾å¤§ï¼Œå€¼ä¸º1.0æ—¶ä»€ä¹ˆæ•ˆæœéƒ½æ²¡æœ‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œcanvasçš„1å•ä½å°±æ˜¯1ä¸ªåƒç´ ã€‚ä¸¾ä¾‹è¯´ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®ç¼©æ”¾å› å­æ˜¯0.5ï¼Œ1ä¸ªå•ä½å°±å˜æˆå¯¹åº”0.5ä¸ªåƒç´ ï¼Œè¿™æ ·ç»˜åˆ¶å‡ºæ¥çš„å½¢çŠ¶å°±ä¼šæ˜¯åŸå…ˆçš„ä¸€åŠã€‚åŒç†ï¼Œè®¾ç½®ä¸º2.0æ—¶ï¼Œ1ä¸ªå•ä½å°±å¯¹åº”å˜æˆäº†2åƒç´ ï¼Œç»˜åˆ¶çš„ç»“æœå°±æ˜¯å›¾å½¢æ”¾å¤§äº†2å€ã€‚ 9.4 transform(å˜å½¢çŸ©é˜µ)transform(a,b,c,d,e,f) a (m11): Horizontal scaling. b (m12): Horizontal skewing. c (m21): Vertical skewing. d (m22): Vertical scaling. e (dx): Horizontal moving. f (dy): Vertical moving. function draw() { var canvas = document.getElementById(&#39;tutorial&#39;) if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.transform(1,1,0,1,0,0) ctx.fillRect(0,0,100,100) } draw() åã€åˆæˆåœ¨å‰é¢çš„æ‰€æœ‰ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯å°†ä¸€ä¸ªå›¾å½¢ç”»åœ¨å¦ä¸€ä¸ªä¹‹ä¸Šï¼Œå¯¹äºå…¶ä»–æ›´å¤šçš„æƒ…å†µï¼Œä»…ä»…è¿™æ ·æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚æ¯”å¦‚ï¼Œå¯¹åˆæˆçš„å›¾å½¢æ¥è¯´ï¼Œç»˜åˆ¶é¡ºåºä¼šæœ‰é™åˆ¶ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨globalCompositeOperationå±æ€§æ¥æ”¹å˜è¿™ç§æƒ…å†µã€‚ globalCompositeOperation = type var ctx; function draw() { var canvas = document.getElementById(&#39;tutorial&#39;); if(!canvas.getContext) return var ctx = canvas.getContext(&#39;2d&#39;) ctx.fillStyle = &#39;blue&#39; ctx.fillRect(0,0,200,200) ctx.globalCompositeOperation = &#39;source-over&#39; //å…¨å±€åˆæˆæ“ä½œ ctx.fillStyle = &#39;red&#39; ctx.fillRect(100,100,200,200) } æ³¨ï¼šä¸‹é¢çš„å±•ç¤ºä¸­ï¼Œè“è‰²æ˜¯åŸæœ‰çš„ï¼Œçº¢è‰²æ˜¯æ–°çš„ã€‚ typeæ˜¯ä¸‹é¢13ä¸­å­—ç¬¦ä¸²å€¼ä¹‹ä¸€: è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œæ–°å›¾åƒä¼šè¦†ç›–åœ¨åŸæœ‰å›¾åƒã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}],"tags":[{"name":"web","slug":"web","permalink":"/tags/web/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}]},{"title":"æ–°é²œç©æ„","slug":"amazing","date":"2021-08-13T00:36:56.751Z","updated":"2021-08-13T01:25:34.880Z","comments":true,"path":"2021/08/13/amazing/","link":"","permalink":"/2021/08/13/amazing/","excerpt":"","text":"é¡µé¢æµ®åŠ¨å¤šè¾¹å½¢è·Ÿéšé¼ æ ‡ç§»åŠ¨ //é¼ æ ‡ç»˜åˆ¶å¤šè¾¹å½¢ !(function() { //å°è£…æ–¹æ³•ï¼Œå‹ç¼©ä¹‹åå‡å°‘æ–‡ä»¶å¤§å° function get_attribute(node, attr, default_value) { return node.getAttribute(attr) || default_value } //å°è£…æ–¹æ³•ï¼Œå‹ç¼©ä¹‹åå‡å°‘æ–‡ä»¶å¤§å° function get_by_tagname(name) { return document.getElementsByTagName(name) } //è·å–é…ç½®å‚æ•° function get_config_option() { var scripts = get_by_tagname(&quot;script&quot;), script_len = scripts.length, script = scripts[script_len - 1] //å½“å‰åŠ è½½çš„script return { l: script_len, //é•¿åº¦ï¼Œç”¨äºç”Ÿæˆidç”¨ z: get_attribute(script, &quot;zIndex&quot;, -1), //z-index o: get_attribute(script, &quot;opacity&quot;, 0.5), //opacity c: get_attribute(script, &quot;color&quot;, &quot;0,0,0&quot;), //color n: get_attribute(script, &quot;count&quot;, 99), //count } } //è®¾ç½®canvasçš„é«˜å®½ function set_canvas_size() { ;(canvas_width = the_canvas.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth), (canvas_height = the_canvas.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight) } //ç»˜åˆ¶è¿‡ç¨‹ function draw_canvas() { context.clearRect(0, 0, canvas_width, canvas_height) //éšæœºçš„çº¿æ¡å’Œå½“å‰ä½ç½®è”åˆæ•°ç»„ var e, i, d, x_dist, y_dist, dist //ä¸´æ—¶èŠ‚ç‚¹ //éå†å¤„ç†æ¯ä¸€ä¸ªç‚¹ random_points.forEach(function(r, idx) { ;(r.x += r.xa), (r.y += r.ya), //ç§»åŠ¨ (r.xa *= r.x &gt; canvas_width || r.x &lt; 0 ? -1 : 1), (r.ya *= r.y &gt; canvas_height || r.y &lt; 0 ? -1 : 1), //ç¢°åˆ°è¾¹ç•Œï¼Œåå‘åå¼¹ context.fillRect(r.x - 0.5, r.y - 0.5, 1, 1) //ç»˜åˆ¶ä¸€ä¸ªå®½é«˜ä¸º1çš„ç‚¹ //ä»ä¸‹ä¸€ä¸ªç‚¹å¼€å§‹ for (i = idx + 1; i &lt; all_array.length; i++) { e = all_array[i] // å½“å‰ç‚¹å­˜åœ¨ if (null !== e.x &amp;&amp; null !== e.y) { x_dist = r.x - e.x //xè½´è·ç¦» l y_dist = r.y - e.y //yè½´è·ç¦» n dist = x_dist * x_dist + y_dist * y_dist //æ€»è·ç¦», m dist &lt; e.max &amp;&amp; (e === current_point &amp;&amp; dist &gt;= e.max / 2 &amp;&amp; ((r.x -= 0.03 * x_dist), (r.y -= 0.03 * y_dist)), //é è¿‘çš„æ—¶å€™åŠ é€Ÿ (d = (e.max - dist) / e.max), context.beginPath(), (context.lineWidth = d / 2), (context.strokeStyle = &quot;rgba(&quot; + config.c + &quot;,&quot; + (d + 0.2) + &quot;)&quot;), context.moveTo(r.x, r.y), context.lineTo(e.x, e.y), context.stroke()) } } }), frame_func(draw_canvas) } //åˆ›å»ºç”»å¸ƒï¼Œå¹¶æ·»åŠ åˆ°bodyä¸­ var the_canvas = document.createElement(&quot;canvas&quot;), //ç”»å¸ƒ config = get_config_option(), //é…ç½® canvas_id = &quot;c_n&quot; + config.l, //canvas id context = the_canvas.getContext(&quot;2d&quot;), canvas_width, canvas_height, frame_func = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(func) { window.setTimeout(func, 1000 / 45) }, random = Math.random, current_point = { x: null, //å½“å‰é¼ æ ‡x y: null, //å½“å‰é¼ æ ‡y max: 20000, // åœˆåŠå¾„çš„å¹³æ–¹ }, all_array the_canvas.id = canvas_id the_canvas.style.cssText = &quot;position:fixed;top:0;left:0;z-index:&quot; + config.z + &quot;;opacity:&quot; + config.o get_by_tagname(&quot;body&quot;)[0].appendChild(the_canvas) //åˆå§‹åŒ–ç”»å¸ƒå¤§å° set_canvas_size() window.onresize = set_canvas_size //å½“æ—¶é¼ æ ‡ä½ç½®å­˜å‚¨ï¼Œç¦»å¼€çš„æ—¶å€™ï¼Œé‡Šæ”¾å½“å‰ä½ç½®ä¿¡æ¯ ;(window.onmousemove = function(e) { e = e || window.event current_point.x = e.clientX current_point.y = e.clientY }), (window.onmouseout = function() { current_point.x = null current_point.y = null }) //éšæœºç”Ÿæˆconfig.næ¡çº¿ä½ç½®ä¿¡æ¯ for (var random_points = [], i = 0; config.n &gt; i; i++) { var x = random() * canvas_width, //éšæœºä½ç½® y = random() * canvas_height, xa = 2 * random() - 1, //éšæœºè¿åŠ¨æ–¹å‘ ya = 2 * random() - 1 // éšæœºç‚¹ random_points.push({ x: x, y: y, xa: xa, ya: ya, max: 6000, //æ²¾é™„è·ç¦» }) } all_array = random_points.concat([current_point]) //0.1ç§’åç»˜åˆ¶ setTimeout(function() { draw_canvas() }, 100) })() æ¯æ—¥ä¸€è¨€åŠŸèƒ½ &lt;body&gt; &lt;strong&gt;&lt;p id=&quot;hitokoto&quot;&gt;æ¯æ—¥ä¸€è¨€è·å–ä¸­...&lt;/p&gt;&lt;/strong&gt; &lt;script&gt; //æ¯æ—¥ä¸€è¨€ $(function() { var xhr = new XMLHttpRequest() xhr.open(&quot;get&quot;, &quot;https://v1.hitokoto.cn&quot;) xhr.onreadystatechange = function() { if (xhr.readyState === 4) { var data = JSON.parse(xhr.responseText) var hitokoto = document.getElementById(&quot;hitokoto&quot;) hitokoto.innerText = data.hitokoto } } xhr.send() }) &lt;/script&gt; &lt;/body&gt; é¼ æ ‡ç‚¹å‡»å‡ºç°çˆ±å¿ƒç‰¹æ•ˆ //é¼ æ ‡ç‚¹å‡»çˆ±å¿ƒ !(function(e, t, a) { function r() { for (var e = 0; e &lt; s.length; e++) s[e].alpha &lt;= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, (s[e].scale += 0.004), (s[e].alpha -= 0.013), (s[e].el.style.cssText = &quot;left:&quot; + s[e].x + &quot;px;top:&quot; + s[e].y + &quot;px;opacity:&quot; + s[e].alpha + &quot;;transform:scale(&quot; + s[e].scale + &quot;,&quot; + s[e].scale + &quot;) rotate(45deg);background:&quot; + s[e].color + &quot;;z-index:99999&quot;)) requestAnimationFrame(r) } function n() { var t = &quot;function&quot; == typeof e.onclick &amp;&amp; e.onclick e.onclick = function(e) { t &amp;&amp; t(), o(e) } } function o(e) { var a = t.createElement(&quot;div&quot;) ;(a.className = &quot;heart&quot;), s.push({ el: a, x: e.clientX - 5, y: e.clientY - 5, scale: 1, alpha: 1, color: c(), }), t.body.appendChild(a) } function i(e) { var a = t.createElement(&quot;style&quot;) a.type = &quot;text/css&quot; try { a.appendChild(t.createTextNode(e)) } catch (t) { a.styleSheet.cssText = e } t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a) } function c() { return ( &quot;rgb(&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;)&quot; ) } var s = [] ;(e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function(e) { setTimeout(e, 1e3 / 60) }), i( &quot;.heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: &#39;&#39;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}&quot; ), n(), r() })(window, document) &lt;script&gt; //å®šä¹‰è·å–è¯è¯­ä¸‹æ ‡ var a_idx = 0; jQuery(document).ready(function($) { //ç‚¹å‡»bodyæ—¶è§¦å‘äº‹ä»¶ $(&quot;body&quot;).click(function(e) { //éœ€è¦æ˜¾ç¤ºçš„è¯è¯­ var a = new Array(&quot;å¯Œå¼º&quot;,&quot;æ°‘ä¸»&quot;, &quot;æ–‡æ˜&quot;, &quot;å’Œè°&quot;,&quot;è‡ªç”±&quot;, &quot;å¹³ç­‰&quot;, &quot;å…¬æ­£&quot;,&quot;æ³•æ²»&quot;, &quot;çˆ±å›½&quot;, &quot;æ•¬ä¸š&quot;,&quot;è¯šä¿¡&quot;, &quot;å‹å–„&quot;); //è®¾ç½®è¯è¯­ç»™spanæ ‡ç­¾ var $i = $(&quot;&lt;span/&gt;&quot;).text(a[a_idx]); //ä¸‹æ ‡ç­‰äºåŸæ¥ä¸‹æ ‡+1 ä½™ è¯è¯­æ€»æ•° a_idx = (a_idx + 1)% a.length; //è·å–é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆ†åˆ«ç›¸å¯¹äºæ–‡æ¡£çš„å·¦å’Œå³è¾¹ç¼˜ã€‚ //è·å–xå’Œyçš„æŒ‡é’ˆåæ ‡ var x = e.pageX, y = e.pageY; //åœ¨é¼ æ ‡çš„æŒ‡é’ˆçš„ä½ç½®ç»™$iå®šä¹‰çš„spanæ ‡ç­¾æ·»åŠ cssæ ·å¼ $i.css({&quot;z-index&quot; : 999999, &quot;top&quot; : y - 20, &quot;left&quot; : x, &quot;position&quot; : &quot;absolute&quot;, &quot;font-weight&quot; : &quot;bold&quot;, &quot;color&quot; : &quot;#ff6651&quot; }); //åœ¨bodyæ·»åŠ è¿™ä¸ªæ ‡ç­¾ $(&quot;body&quot;).append($i); //animate() æ–¹æ³•æ‰§è¡Œ CSS å±æ€§é›†çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚ //è¯¥æ–¹æ³•é€šè¿‡CSSæ ·å¼å°†å…ƒç´ ä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚CSSå±æ€§å€¼æ˜¯é€æ¸æ”¹å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœã€‚ //è¯¦æƒ…è¯·çœ‹http://www.w3school.com.cn/jquery/effect_animate.asp $i.animate({ //å°†åŸæ¥çš„ä½ç½®å‘ä¸Šç§»åŠ¨180 &quot;top&quot; : y - 180, &quot;opacity&quot; : 0 //1500åŠ¨ç”»çš„é€Ÿåº¦ }, 1500, function() { //æ—¶é—´åˆ°äº†è‡ªåŠ¨åˆ é™¤ $i.remove(); }); }); }); &lt;/script&gt; macOS Dock æ•ˆæœ &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; html { font-size: 15px; } body { margin: 0; padding: 0; display: flex; width: 100%; min-height: 100vh; overflow: hidden; align-items: flex-end; background-image: linear-gradient( 109.6deg, rgba(25, 170, 209, 1) 11.3%, rgba(21, 65, 249, 1) 69.9% ); } .glass { width: 100%; height: 8rem; background: rgba(255, 255, 255, 0.25); box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.18); display: flex; justify-content: center; } .dock { --scale: 1; list-style: none; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; } .dock li { font-size: calc(6rem * var(--scale)); padding: 0 0.5rem; cursor: default; position: relative; top: calc((6rem * var(--scale) - 6rem) / 2 * -1); transition: 15ms all ease-out; } .dock li.loading { animation: 1s loading ease-in infinite; } @keyframes loading { 0%, 100% { transform: translateY(0px); } 60% { transform: translateY(-40px); } } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;glass&quot;&gt; &lt;ul class=&quot;dock&quot;&gt; &lt;li&gt;ğŸ˜ƒ&lt;/li&gt; &lt;li&gt;ğŸ˜Š&lt;/li&gt; &lt;li&gt;ğŸ˜œ&lt;/li&gt; &lt;li&gt;ğŸ˜&lt;/li&gt; &lt;li&gt;ğŸ¤©&lt;/li&gt; &lt;li&gt;ğŸ¥³&lt;/li&gt; &lt;li&gt;ğŸ¥¶&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;script&gt; document.querySelectorAll(&quot;.dock li&quot;).forEach((li) =&gt; { li.addEventListener(&quot;click&quot;, (e) =&gt; { e.currentTarget.classList.add(&quot;loading&quot;) }) li.addEventListener(&quot;mousemove&quot;, (e) =&gt; { let item = e.target let itemRect = item.getBoundingClientRect() let offset = Math.abs(e.clientX - itemRect.left) / itemRect.width let prev = item.previousElementSibling || null let next = item.nextElementSibling || null let scale = 0.6 resetScale() if (prev) { prev.style.setProperty(&quot;--scale&quot;, 1 + scale * Math.abs(offset - 1)) } item.style.setProperty(&quot;--scale&quot;, 1 + scale) if (next) { next.style.setProperty(&quot;--scale&quot;, 1 + scale * offset) } }) }) document.querySelector(&quot;.dock&quot;).addEventListener(&quot;mouseleave&quot;, (e) =&gt; { resetScale() }) function resetScale() { document.querySelectorAll(&quot;.dock li&quot;).forEach((li) =&gt; { li.style.setProperty(&quot;--scale&quot;, 1) }) } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; canvas å®ç°æ°´å°var watermark = {} function setWatermark(args) { //å£°æ˜ä¸€ä¸ªæ€ªå¼‚ä¸€ç‚¹çš„å˜é‡ï¼Œç¡®ä¿idçš„å”¯ä¸€æ€§ var id = &quot;111.222.333.456&quot; var xIndex = 15 //ç»˜åˆ¶æ–‡æœ¬çš„ x åæ ‡ä½ç½® var yIndex = 65 //ç»˜åˆ¶æ–‡æœ¬çš„ y åæ ‡ä½ç½® var xInterval = 25 //æœ‰å¤šä¸ªå‚æ•°æ—¶çš„è¡Œé—´é—´éš” if (document.getElementById(id) !== null) { document.body.removeChild(document.getElementById(id)) } //åˆ©ç”¨canvasç»˜åˆ¶æ°´å°ä¿¡æ¯ var can = document.createElement(&quot;canvas&quot;) can.width = 250 can.height = 150 var cans = can.getContext(&quot;2d&quot;) cans.rotate((-20 * Math.PI) / 180) cans.font = &quot;17px Vedana&quot; // ziti yanse cans.fillStyle = &quot;rgba(200, 200, 200, 0.30)&quot; cans.textAlign = &quot;left&quot; cans.textBaseline = &quot;Middle&quot; for (let i = 0; i &lt; args.length; i++) { cans.fillText(args[i], xIndex, yIndex) //ç»˜åˆ¶æ°´å°æ–‡æ¡ˆ yIndex += xInterval //è®¾ç½®æ¯è¡Œé—´éš” } //åˆ›å»ºdivç”¨äºæ˜¾ç¤º var div = document.createElement(&quot;div&quot;) div.id = id div.style.pointerEvents = &quot;none&quot; div.style.top = &quot;70px&quot; div.style.left = &quot;90px&quot; div.style.position = &quot;fixed&quot; div.style.zIndex = &quot;100000&quot; div.style.width = document.documentElement.clientWidth - 50 + &quot;px&quot; div.style.height = document.documentElement.clientHeight - 50 + &quot;px&quot; //divæ‰¿è½½æ°´å°æ˜¾ç¤º div.style.background = &quot;url(&quot; + can.toDataURL(&quot;image/png&quot;) + &quot;) left top repeat&quot; document.body.appendChild(div) return id } watermark.set = function() { let args = Array.prototype.slice.apply(arguments) let id = setWatermark(args) // æ£€æµ‹å¦‚æœæ°´å°è¢«å»æ‰äº†ï¼Œè‡ªåŠ¨ç»™åŠ ä¸Š setInterval(function() { if (document.getElementById(id) === null) { id = setWatermark(args) } }, 500) //åœ¨çª—å£å¤§å°æ”¹å˜ä¹‹å,è‡ªåŠ¨è§¦å‘åŠ æ°´å°äº‹ä»¶ window.onresize = function() { setWatermark(args) } } window.watermark = watermark watermark.set(&quot;ç»å¯†æ¡£æ¡ˆ&quot;, &quot;ä¸¥ç¦å¤–æ³„&quot;) canvaså®ç°éªŒè¯ç &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;120&quot; height=&quot;40&quot;&gt;&lt;/canvas&gt; &lt;a href=&quot;#&quot; id=&quot;changeImg&quot;&gt;çœ‹ä¸æ¸…ï¼Œæ¢ä¸€å¼ &lt;/a&gt; &lt;input type=&quot;text&quot; id=&quot;text&quot;&gt; &lt;script&gt; // éšæœºæ•° function randomNum(min, max) { return Math.floor(Math.random() * (max - min) + min); } /**ç”Ÿæˆä¸€ä¸ªéšæœºè‰²**/ function randomColor(min, max) { var r = randomNum(min, max); var g = randomNum(min, max); var b = randomNum(min, max); return &quot;rgb(&quot; + r + &quot;,&quot; + g + &quot;,&quot; + b + &quot;)&quot;; } drawPic(); document.getElementById(&quot;changeImg&quot;).onclick = function (e) { e.preventDefault(); drawPic(); } var Vcode = &#39;&#39; /**ç»˜åˆ¶éªŒè¯ç å›¾ç‰‡**/ function drawPic() { var canvas = document.getElementById(&quot;canvas&quot;); var width = canvas.width; var height = canvas.height; var ctx = canvas.getContext(&#39;2d&#39;); ctx.textBaseline = &#39;bottom&#39;; /**ç»˜åˆ¶èƒŒæ™¯è‰²**/ ctx.fillStyle = randomColor(180, 240); //é¢œè‰²è‹¥å¤ªæ·±å¯èƒ½å¯¼è‡´çœ‹ä¸æ¸… ctx.fillRect(0, 0, width, height); /**ç»˜åˆ¶æ–‡å­—**/ var str = &#39;ABCEFGHJKLMNPQRSTWXY123456789&#39;; vCode = &#39;&#39; for (var i = 0; i &lt; 4; i++) { var txt = str[randomNum(0, str.length)]; // æ¯æ¬¡éšæœºç”Ÿæˆçš„æ•° vCode += txt ctx.fillStyle = randomColor(50, 160); //éšæœºç”Ÿæˆå­—ä½“é¢œè‰² ctx.font = randomNum(15, 40) + &#39;px SimHei&#39;; //éšæœºç”Ÿæˆå­—ä½“å¤§å° var x = 10 + i * 25; var y = randomNum(25, 45); var deg = randomNum(-45, 45); //ä¿®æ”¹åæ ‡åŸç‚¹å’Œæ—‹è½¬è§’åº¦ ctx.translate(x, y); ctx.rotate(deg * Math.PI / 180); ctx.fillText(txt, 0, 0); //æ¢å¤åæ ‡åŸç‚¹å’Œæ—‹è½¬è§’åº¦ ctx.rotate(-deg * Math.PI / 180); ctx.translate(-x, -y); } /* *ç»˜åˆ¶å¹²æ‰°çº¿* */ for (var i = 0; i &lt; 4; i++) { ctx.strokeStyle = randomColor(40, 180); ctx.beginPath(); ctx.moveTo(randomNum(0, width), randomNum(0, height)); ctx.lineTo(randomNum(0, width), randomNum(0, height)); ctx.stroke(); } /**ç»˜åˆ¶å¹²æ‰°ç‚¹**/ for (var i = 0; i &lt; 20; i++) { ctx.fillStyle = randomColor(0, 255); ctx.beginPath(); ctx.arc(randomNum(0, width), randomNum(0, height), 1, 0, 2 * Math.PI); ctx.fill(); } console.log(&quot;éšæœºç”Ÿæˆçš„éªŒè¯ç æ˜¯:::&quot;, vCode); } let text = document.getElementById(&#39;text&#39;) text.onblur = function(e) { console.log(text.value,&#39;value&#39;) if(text.value == vCode) { } else { alert(&#39;è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç &#39;) } } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; çº¯csså®ç°éœ“è™¹ç¯æ•ˆæœ&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; .light { position: relative; padding: 25px 30px; color: #03e9f4; font-size: 24px; text-transform: uppercase; transition: 0.5s; letter-spacing: 4px; cursor: pointer; overflow: hidden; width: 200px; height: 100px; } .light:hover { background-color: #03e9f4; color: #050801; box-shadow: 0 0 5px #03e9f4, 0 0 25px #03e9f4, 0 0 50px #03e9f4, 0 0 200px #03e9f4; } .light div { position: absolute; } .light div:nth-child(1){ width: 100%; height: 2px; top: 0; left: -100%; background: linear-gradient(to right,transparent,#03e9f4); animation: animate1 2s linear infinite; } .light div:nth-child(2){ width: 2px; height: 100%; top: -100%; right: 0; background: linear-gradient(to bottom,transparent,#03e9f4); animation: animate2 2s linear infinite; animation-delay: 0.5s; } .light div:nth-child(3){ width: 100%; height: 2px; bottom: 0; right: -100%; background: linear-gradient(to left,transparent,#03e9f4); animation: animate3 2s linear infinite; animation-delay: 1s; } .light div:nth-child(4){ width: 2px; height: 100%; bottom: -100%; left: 0; background: linear-gradient(to top,transparent,#03e9f4); animation: animate4 2s linear infinite; animation-delay: 1.5s; } @keyframes animate1 { 0% { left: -100%; } 50%,100% { left: 100%; } } @keyframes animate2 { 0% { top: -100%; } 50%,100% { top: 100%; } } @keyframes animate3 { 0% { right: -100%; } 50%,100% { right: 100%; } } @keyframes animate4 { 0% { bottom: -100%; } 50%,100% { bottom: 100%; } } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;light&quot;&gt; &lt;div&gt;&lt;/div&gt; &lt;div&gt;&lt;/div&gt; &lt;div&gt;&lt;/div&gt; &lt;div&gt;&lt;/div&gt; Neon Button &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; canvaså®ç°åˆ®åˆ®ä¹&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;img src=&quot;./ç”·1.jpg&quot; width=&quot;400&quot; id=&quot;img&quot; alt=&quot;&quot; /&gt; &lt;input type=&quot;text&quot; name=&quot;&quot; id=&quot;txt&quot; /&gt; &lt;!-- &lt;canvas&gt;&lt;/canvas&gt; --&gt; &lt;script&gt; const oImg = document.getElementById(&quot;img&quot;) const txt = document.getElementById(&quot;txt&quot;) //oImg.readyState å›¾ç‰‡åŠ è½½çŠ¶æ€ if (oImg.readyState === &quot;complete&quot;) { draw() //trueè¡¨ç¤ºå·²ç»åŠ è½½å®Œæˆ æ‰§è¡Œdraw()æ–¹æ³• } else { //å›¾ç‰‡åŠ è½½å®Œæˆæ‰§è¡Œdrawæ–¹æ³• oImg.onload = draw } function draw() { //ç­‰å›¾ç‰‡åŠ è½½å®Œæˆåå†æ·»åŠ canvasç”»å¸ƒåœ¨ä¸Šé¢ let can = document.createElement(&quot;canvas&quot;) //åˆ›å»ºä¸€ä¸ªcanvasç”»å¸ƒ can.width = oImg.width //ç­‰äºå›¾ç‰‡çš„å®½é«˜ can.height = oImg.height can.style.position = &quot;absolute&quot; //canvasç”»å¸ƒè®¾ç½®æµ®åŠ¨ä¼šæ¼‚æµ®åœ¨å›¾ç‰‡ä¸Š can.style.left = oImg.offsetLeft + &quot;px&quot; //ä¿å­˜ä¸ç”»å¸ƒä½ç½®ä¸€è‡´ can.style.top = oImg.offsetTop + &quot;px&quot; //æ‰¾åˆ°å›¾ç‰‡çš„çˆ¶çº§ï¼šparentNode åœ¨oImgå­å…ƒç´ å‰é¢æ·»åŠ canvasæ ‡ç­¾ï¼šinsertBefore oImg.parentNode.insertBefore(can, oImg) //åœ¨imgå‰é¢å»æ’å…¥canvasæ ‡ç­¾ let ctx = can.getContext(&quot;2d&quot;) ctx.fillStyle = &quot;#bbb&quot; //åˆ®åˆ®ä¹çš„é¢œè‰² ctx.fillRect(0, 0, oImg.width, oImg.height) //å¡«å……å®½åº¦ //åˆæˆ:å¤„ç†åˆæˆå›¾ç‰‡çš„é€æ˜æ ·å¼ï¼› //æ‹–æ‹½çš„æ—¶å€™ï¼Œcanvaså›¾å±‚æ˜¾ç¤ºé€æ˜ï¼›destination-outï¼šæ–°å›¾å½¢ä¸åŸå›¾å½¢é‡å éƒ¨åˆ†é€æ˜ ctx.globalCompositeOperation = &quot;destination-out&quot; ctx.strokeStyle = &quot;#eee&quot; //è§¦ç¬”çš„é¢œè‰² éšä¾¿ å› ä¸ºå®ƒç»ˆç©¶å˜æˆé€æ˜ ctx.lineWidth = 30 //æ‹–åŠ¨æ—¶å¼€å§‹ç”»çº¿çš„çº¿å®½ ctx.lineCap = &quot;round&quot; //è¿™ä¸¤æ­¥æ˜¯æŠŠç”»ç¬”å˜æˆåœ†å½¢ //æŒ‰ä¸‹ï¼Œç§»åŠ¨ï¼ŒæŠ¬èµ·äº‹ä»¶ can.onmousedown = function (e) { e = e || window.event //å…¼å®¹ä½ç‰ˆæœ¬IEæµè§ˆå™¨ //e.pageXè·ç¦»æ–‡æ¡£å³è¾¹ç¼˜ï¼› offsetLeftï¼šcanvasç”»å¸ƒè·ç¦»æ–‡æ¡£çš„å³è¾¹è·ç¦» let x = e.pageX - can.offsetLeft //å¾—åˆ°çš„xæ˜¯åœ¨canvasä¸Šçš„åæ ‡å€¼ let y = e.pageY - can.offsetTop ctx.beginPath() // ctx.moveTo( x,y )//ä»å“ªé‡Œå¼€å§‹æ¥ç”» ctx.arc(x, y, 15, 0, 6.3, false) //ç‚¹ç¬¬ä¸€ä¸‹æ˜¯ç”»ä¸€ä¸ªåœ† ctx.fill() //æŒ‰ä¸‹åæ‹–æ‹½ can.onmousemove = function (e) { //æ‹–åŠ¨æ—¶ä¸€ç›´æ‰§è¡Œä¸‹é¢ e = e || window.event //å…¼å®¹ä½ç‰ˆæœ¬IEæµè§ˆå™¨ ctx.beginPath() //æ‹–åŠ¨æ—¶å¼€å§‹ç”»çº¿ ctx.moveTo(x, y) //èµ·å§‹ç‚¹ ctx.lineTo(e.pageX - can.offsetLeft, e.pageY - can.offsetTop) //ç§»åŠ¨çš„è¿‡ç¨‹ //æ¯æ¬¡ç§»åŠ¨çš„æ—¶å€™ï¼Œæ ·å¼æ‰€åœ¨çš„åæ ‡ï¼› x = e.pageX - can.offsetLeft //ç¬¬äºŒæ¬¡æ¸²æŸ“åˆ®å›¾ç‰‡æ•ˆæœçš„èµ·å§‹ç‚¹åº”è¯¥åœ¨ä¸Šä¸€æ¬¡çš„ç»ˆæ­¢ç‚¹ y = e.pageY - can.offsetTop ctx.stroke() //å¼¹å‡ºå›¾å½¢å¹¶æ¢å¤ç”»å¸ƒ } document.onmouseup = function () { //æŠ¬èµ·åå°†äº‹ä»¶æ³¨é”€ can.onmousemove = null this.onmouseup = null check() //å®Œæˆåé€šè¿‡åƒç´ è®¡ç®—åˆ®è¿‡çš„çš„ç™¾åˆ†æ¯” } } function check() { //è·å–ç”»å¸ƒçš„åƒç´ åˆ—è¡¨ let data = ctx.getImageData(0, 0, can.width, can.height).data let n = 0 //è®¡ç®—é€æ˜åƒç´ çš„ä¸ªæ•° for (let i = 0; i &lt; data.length; i += 4) { //æ„Ÿè§‰è¿™ä¸€æ­¥æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ //RGBA if ( data[i] == 0 &amp;&amp; data[i + 1] == 0 &amp;&amp; data[i + 2] == 0 &amp;&amp; data[i + 3] == 0 ) { n++ } } let f = (n * 100) / (can.width * can.height) //ç®—å‡ºæ‰€åˆ®çš„é¢ç§¯çš„å æ¯”ï¼› txt.value = `åˆ®å¼€é¢ç§¯:${f.toFixed(2)}%` //åˆ®å¼€é¢ç§¯çš„æ¯”ä¾‹ if (f &gt; 30) { //å¦‚æœæ‰€åˆ®çš„é¢ç§¯å¤§äº30% åˆ™å°†canvasç”»å¸ƒæ•´ä½“æ¸…é™¤fillRect ctx.beginPath() ctx.fillRect(0, 0, can.width, can.height) txt.value = &quot;åˆ®å¼€é¢ç§¯å¤§äº30%ï¼Œå…¨éƒ¨æ˜¾ç¤º&quot; } } } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; swiperè½®æ’­å›¾ç»„ä»¶ æ‹–æ‹½ã€å›å¼¹ç‰©æ–™æ•ˆæœæ˜¯å‚ç…§å¼€æºé¡¹ç›®swiper.jsåšçš„`javascript/** è½®æ’­ç»„ä»¶ @param {object} params é…ç½®ä¼ å‚ @param {string} params.el ç»„ä»¶èŠ‚ç‚¹ class|id| @param {number} params.moveTime è¿‡æ¸¡æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰é»˜è®¤ 300 @param {number} params.interval è‡ªåŠ¨æ’­æ”¾é—´éš”ï¼ˆæ¯«ç§’ï¼‰é»˜è®¤ 3000 @param {boolean} params.loop æ˜¯å¦éœ€è¦å›è·¯ @param {boolean} params.vertical æ˜¯å¦å‚ç›´æ»šåŠ¨ @param {boolean} params.autoPaly æ˜¯å¦éœ€è¦è‡ªåŠ¨æ’­æ”¾ @param {boolean} params.pagination æ˜¯å¦éœ€è¦åº•éƒ¨åœ†ç‚¹ @param {(index: number) =&gt; void} params.slideCallback æ»‘åŠ¨/åˆ‡æ¢ç»“æŸå›è°ƒ @author https://github.com/Hansen-hjs @description ç§»åŠ¨ç«¯swiperç»„ä»¶ï¼Œå¦‚æœéœ€è¦å…¼å®¹pcè‡ªè¡Œä¿®æ”¹å¯¹åº”çš„touchåˆ°mouseäº‹ä»¶å³å¯ã€‚ç°æˆæ•ˆæœé¢„è§ˆï¼šhttps://huangjingsheng.gitee.io/hjs/cv/demo/face/*/function swiper(params) { /** css class å‘½ååˆ—è¡¨ @dec [â€œæ»‘åŠ¨åˆ—è¡¨â€,â€æ»‘åŠ¨itemâ€,â€åœ†ç‚¹å®¹å™¨â€,â€åº•éƒ¨åœ†ç‚¹â€,â€åœ†ç‚¹é«˜äº®â€]/const classNames = [â€œ.swiper_listâ€, â€œ.swiper_itemâ€, â€œ.swiper_paginationâ€, â€œ.swiper_dotâ€, â€œ.swiper_dot_activeâ€];/** æ»‘åŠ¨ç»“æŸå‡½æ•° /const slideEnd = params.slideCallback || function() {};/** ç»„ä»¶èŠ‚ç‚¹ @type {HTMLElement}*/let node = null;/** itemåˆ—è¡¨å®¹å™¨ @type {HTMLElement}*/let nodeItem = null;/** itemèŠ‚ç‚¹åˆ—è¡¨ @type {Array}*/let nodeItems = [];/** åœ†ç‚¹å®¹å™¨ @type {HTMLElement}*/let nodePagination = null;/** åœ†ç‚¹èŠ‚ç‚¹åˆ—è¡¨ @type {Array}/let nodePaginationItems = [];/** æ˜¯å¦éœ€è¦åº•éƒ¨åœ†ç‚¹ /let pagination = false;/ æ˜¯å¦éœ€è¦å›è·¯ */let isLoop = false;/ æ–¹å‘ X =&gt; true | Y =&gt; false /let direction = false;/** æ˜¯å¦éœ€è¦è‡ªåŠ¨æ’­æ”¾ /let autoPaly = false;/ è‡ªåŠ¨æ’­æ”¾é—´éš”ï¼ˆæ¯«ç§’ï¼‰é»˜è®¤ 3000 */let interval = 3000;/ è¿‡æ¸¡æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰é»˜è®¤ 300 */let moveTime = 300; /** è®¾ç½®åŠ¨ç”» */ function startAnimation() { nodeItem.style.transition = `${moveTime / 1000}s all`; } /** å…³é—­åŠ¨ç”» */ function stopAnimation() { nodeItem.style.transition = &quot;0s all&quot;; } /** * å±æ€§æ ·å¼æ»‘åŠ¨ * @param {number} n ç§»åŠ¨çš„è·ç¦» */ function slideStyle(n) { let x = 0, y = 0; if (direction) { y = n; } else { x = n; } nodeItem.style.transform = `translate3d(${x}px, ${y}px, 0px)`; } /** * äº‹ä»¶å¼€å§‹ * @param {number} width æ»šåŠ¨å®¹å™¨çš„å®½åº¦ * @param {number} height æ»šåŠ¨å®¹å™¨çš„é«˜åº¦ */ function main(width, height) { /** * åŠ¨ç”»å¸§ * @type {requestAnimationFrame} */ const animation = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; /** è§¦æ‘¸å¼€å§‹æ—¶é—´ */ let startTime = 0; /** è§¦æ‘¸ç»“æŸæ—¶é—´ */ let endTime = 0; /** å¼€å§‹çš„è·ç¦» */ let startDistance = 0; /** ç»“æŸçš„è·ç¦» */ let endDistance = 0; /** ç»“æŸè·ç¦»çŠ¶æ€ */ let endState = 0; /** ç§»åŠ¨çš„è·ç¦» */ let moveDistance = 0; /** åœ†ç‚¹ä½ç½® &amp;&amp; å½“å‰ item ç´¢å¼• */ let index = 0; /** åŠ¨ç”»å¸§è®¡æ•° */ let count = 0; /** loop å¸§è®¡æ•° */ let loopCount = 0; /** ç§»åŠ¨èŒƒå›´ */ let range = direction ? height : width; /** è·å–æ‹–åŠ¨è·ç¦» */ function getDragDistance() { /** æ‹–åŠ¨è·ç¦» */ let dragDistance = 0; // é»˜è®¤è¿™ä¸ªå…¬å¼ dragDistance = moveDistance + (endDistance - startDistance); // åˆ¤æ–­æœ€å¤§æ­£è´Ÿå€¼ if ((endDistance - startDistance) &gt;= range) { dragDistance = moveDistance + range; } else if ((endDistance - startDistance) &lt;= -range) { dragDistance = moveDistance - range; } // æ²¡æœ‰ loop çš„æ—¶å€™æƒ¯æ€§æ‹–æ‹½ if (!isLoop) { if ((endDistance - startDistance) &gt; 0 &amp;&amp; index === 0) { // console.log(&quot;åˆ°è¾¾æœ€åˆ&quot;); dragDistance = moveDistance + ((endDistance - startDistance) - ((endDistance - startDistance) * 0.6)); } else if ((endDistance - startDistance) &lt; 0 &amp;&amp; index === nodeItems.length - 1) { // console.log(&quot;åˆ°è¾¾æœ€å&quot;); dragDistance = moveDistance + ((endDistance - startDistance) - ((endDistance - startDistance) * 0.6)); } } return dragDistance; } /** * åˆ¤æ–­è§¦æ‘¸å¤„ç†å‡½æ•° * @param {number} slideDistance æ»‘åŠ¨çš„è·ç¦» */ function judgeTouch(slideDistance) { // è¿™é‡Œæˆ‘è®¾ç½®äº†200æ¯«ç§’çš„æœ‰æ•ˆæ‹–æ‹½é—´éš” if ((endTime - startTime) &lt; 200) return true; // è¿™é‡Œåˆ¤æ–­æ–¹å‘ï¼ˆæ­£å€¼å’Œè´Ÿå€¼ï¼‰ if (slideDistance &lt; 0) { if ((endDistance - startDistance) &lt; (slideDistance / 2)) return true; return false; } else { if ((endDistance - startDistance) &gt; (slideDistance / 2)) return true; return false; } } /** è¿”å›åŸæ¥ä½ç½® */ function backLocation() { startAnimation(); slideStyle(moveDistance); } /** * æ»‘åŠ¨ * @param {number} slideDistance æ»‘åŠ¨çš„è·ç¦» */ function slideMove(slideDistance) { startAnimation(); slideStyle(slideDistance); loopCount = 0; // åˆ¤æ–­ loop æ—¶å›åˆ°ç¬¬ä¸€å¼ æˆ–æœ€åä¸€å¼  if (isLoop &amp;&amp; index &lt; 0) { // æˆ‘è¿™é‡Œæ˜¯æƒ³è®©æ»‘å—è¿‡æ¸¡å®Œä¹‹åå†é‡ç½®ä½ç½®æ‰€ä»¥åŠ çš„å»¶è¿Ÿ (ä¹‹å‰ç”¨setTimeoutï¼Œå¿«é€Ÿæ»‘åŠ¨æœ‰é—®é¢˜ï¼Œç„¶åæ¢æˆ requestAnimationFrameè§£å†³äº†è¿™ç±»é—®é¢˜) function loopMoveMin() { loopCount += 1; if (loopCount &lt; moveTime / 1000 * 60) return animation(loopMoveMin); stopAnimation(); slideStyle(range * -(nodeItems.length - 3)); // é‡ç½®ä¸€ä¸‹ä½ç½® moveDistance = range * -(nodeItems.length - 3); } loopMoveMin(); index = nodeItems.length - 3; } else if (isLoop &amp;&amp; index &gt; nodeItems.length - 3) { function loopMoveMax() { loopCount += 1; if (loopCount &lt; moveTime / 1000 * 60) return animation(loopMoveMax); stopAnimation(); slideStyle(0); moveDistance = 0; } loopMoveMax(); index = 0; } // console.log(`ç¬¬${ index+1 }å¼ `); // è¿™é‡Œå¯ä»¥åšæ»‘åŠ¨ç»“æŸå›è°ƒ if (pagination) { nodePagination.querySelector(classNames[4]).className = classNames[3].slice(1); nodePaginationItems[index].classList.add(classNames[4].slice(1)); } } /** åˆ¤æ–­ç§»åŠ¨ */ function judgeMove() { // åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œè¿‡æ¸¡ if (endDistance &lt; startDistance) { // å¾€ä¸Šæ»‘åŠ¨ or å‘å·¦æ»‘åŠ¨ if (judgeTouch(-range)) { // åˆ¤æ–­æœ‰loopçš„æ—¶å€™ä¸éœ€è¦æ‰§è¡Œä¸‹é¢çš„äº‹ä»¶ if (!isLoop &amp;&amp; moveDistance === (-(nodeItems.length - 1) * range)) return backLocation(); index += 1; slideMove(moveDistance - range); moveDistance -= range; slideEnd(index); } else { backLocation(); } } else { // å¾€ä¸‹æ»‘åŠ¨ or å‘å³æ»‘åŠ¨ if (judgeTouch(range)) { if (!isLoop &amp;&amp; moveDistance === 0) return backLocation(); index -= 1; slideMove(moveDistance + range); moveDistance += range; slideEnd(index) } else { backLocation(); } } } /** è‡ªåŠ¨æ’­æ”¾ç§»åŠ¨ */ function autoMove() { // è¿™é‡Œåˆ¤æ–­ loop çš„è‡ªåŠ¨æ’­æ”¾ if (isLoop) { index += 1; slideMove(moveDistance - range); moveDistance -= range; } else { if (index &gt;= nodeItems.length - 1) { index = 0; slideMove(0); moveDistance = 0; } else { index += 1; slideMove(moveDistance - range); moveDistance -= range; } } slideEnd(index); } /** å¼€å§‹è‡ªåŠ¨æ’­æ”¾ */ function startAuto() { count += 1; if (count &lt; interval / 1000 * 60) return animation(startAuto); count = 0; autoMove(); startAuto(); } // åˆ¤æ–­æ˜¯å¦éœ€è¦å¼€å¯è‡ªåŠ¨æ’­æ”¾ if (autoPaly &amp;&amp; nodeItems.length &gt; 1) startAuto(); // å¼€å§‹è§¦æ‘¸ nodeItem.addEventListener(&quot;touchstart&quot;, ev =&gt; { startTime = Date.now(); count = 0; loopCount = moveTime / 1000 * 60; stopAnimation(); startDistance = direction ? ev.touches[0].clientY : ev.touches[0].clientX; }); // è§¦æ‘¸ç§»åŠ¨ nodeItem.addEventListener(&quot;touchmove&quot;, ev =&gt; { ev.preventDefault(); count = 0; endDistance = direction ? ev.touches[0].clientY : ev.touches[0].clientX; slideStyle(getDragDistance()); }); // è§¦æ‘¸ç¦»å¼€ nodeItem.addEventListener(&quot;touchend&quot;, () =&gt; { endTime = Date.now(); // åˆ¤æ–­æ˜¯å¦ç‚¹å‡» if (endState !== endDistance) { judgeMove(); } else { backLocation(); } // æ›´æ–°ä½ç½® endState = endDistance; // é‡æ–°æ‰“å¼€è‡ªåŠ¨æ’­ count = 0; }); } /** * è¾“å‡ºå›è·¯ï¼šå¦‚æœè¦å›è·¯çš„è¯å‰åå¢åŠ å…ƒç´  * @param {number} width æ»šåŠ¨å®¹å™¨çš„å®½åº¦ * @param {number} height æ»šåŠ¨å®¹å™¨çš„é«˜åº¦ */ function outputLoop(width, height) { const first = nodeItems[0].cloneNode(true), last = nodeItems[nodeItems.length - 1].cloneNode(true); nodeItem.insertBefore(last, nodeItems[0]); nodeItem.appendChild(first); nodeItems.unshift(last); nodeItems.push(first); if (direction) { nodeItem.style.top = `${-height}px`; } else { nodeItem.style.left = `${-width}px`; } } /** * è¾“å‡ºåŠ¨æ€å¸ƒå±€ * @param {number} width æ»šåŠ¨å®¹å™¨çš„å®½åº¦ * @param {number} height æ»šåŠ¨å®¹å™¨çš„é«˜åº¦ */ function outputLayout(width, height) { if (direction) { for (let i = 0; i &lt; nodeItems.length; i++) { nodeItems[i].style.height = `${height}px`; } } else { nodeItem.style.width = `${width * nodeItems.length}px`; for (let i = 0; i &lt; nodeItems.length; i++) { nodeItems[i].style.width = `${width}px`; } } } /** è¾“å‡ºåº•éƒ¨åœ†ç‚¹ */ function outputPagination() { let paginations = &quot;&quot;; nodePagination = node.querySelector(classNames[2]); // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹åˆ™åˆ›å»ºä¸€ä¸ª if (!nodePagination) { nodePagination = document.createElement(&quot;div&quot;); nodePagination.className = classNames[2].slice(1); node.appendChild(nodePagination); } for (let i = 0; i &lt; nodeItems.length; i++) { paginations += `&lt;div class=&quot;${classNames[3].slice(1)}&quot;&gt;&lt;/div&gt;`; } nodePagination.innerHTML = paginations; nodePaginationItems = [...nodePagination.querySelectorAll(classNames[3])]; nodePagination.querySelector(classNames[3]).classList.add(classNames[4].slice(1)); } /** åˆå§‹åŒ–åŠ¨æ€å¸ƒå±€ */ function initLayout() { node = document.querySelector(params.el); if (!node) return console.warn(&quot;æ²¡æœ‰å¯æ‰§è¡Œçš„èŠ‚ç‚¹ï¼&quot;); nodeItem = node.querySelector(classNames[0]); if (!nodeItem) return console.warn(`ç¼ºå°‘&quot;${classNames[0]}&quot;èŠ‚ç‚¹ï¼`); nodeItems = [...node.querySelectorAll(classNames[1])]; if (nodeItems.length == 0) return console.warn(&quot;æ»‘åŠ¨èŠ‚ç‚¹ä¸ªæ•°å¿…é¡»å¤§äº0ï¼&quot;); const moveWidth = node.offsetWidth, moveHeight = node.offsetHeight; if (pagination) outputPagination(); if (isLoop) outputLoop(moveWidth, moveHeight); outputLayout(moveWidth, moveHeight); main(moveWidth, moveHeight); } /** åˆå§‹åŒ–å‚æ•° */ function initParams() { if (typeof params !== &quot;object&quot;) return console.warn(&quot;ä¼ å‚æœ‰è¯¯&quot;); pagination = params.pagination || false; direction = params.vertical || false; autoPaly = params.autoPaly || false; isLoop = params.loop || false; moveTime = params.moveTime || 300; interval = params.interval || 3000; initLayout(); } initParams(); } ## å›¾ç‰‡æ‡’åŠ è½½ &gt;éä¼ ç»Ÿå®ç°æ–¹å¼ï¼Œæ€§èƒ½æœ€ä¼˜ ```javascript /** * æ‡’åŠ è½½ * @description å¯åŠ è½½`&lt;img&gt;`ã€`&lt;video&gt;`ã€`&lt;audio&gt;`ç­‰ä¸€äº›å¼•ç”¨èµ„æºè·¯å¾„çš„æ ‡ç­¾ * @param {object} params ä¼ å‚å¯¹è±¡ * @param {string?} params.lazyAttr è‡ªå®šä¹‰åŠ è½½çš„å±æ€§ï¼ˆå¯é€‰ï¼‰ * @param {&quot;src&quot;|&quot;background&quot;} params.loadType åŠ è½½çš„ç±»å‹ï¼ˆé»˜è®¤ä¸º`src`ï¼‰ * @param {string?} params.errorPath åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„èµ„æºè·¯å¾„ï¼Œä»…åœ¨`loadType`è®¾ç½®ä¸º`src`ä¸­å¯ç”¨ï¼ˆå¯é€‰ï¼‰ */ function lazyLoad(params) { const attr = params.lazyAttr || &quot;lazy&quot;; const type = params.loadType || &quot;src&quot;; /** æ›´æ–°æ•´ä¸ªæ–‡æ¡£çš„æ‡’åŠ è½½èŠ‚ç‚¹ */ function update() { const els = document.querySelectorAll(`[${attr}]`); for (let i = 0; i &lt; els.length; i++) { const el = els[i]; observer.observe(el); } } /** * åŠ è½½å›¾ç‰‡ * @param {HTMLImageElement} el å›¾ç‰‡èŠ‚ç‚¹ */ function loadImage(el) { const cache = el.src; // ç¼“å­˜å½“å‰`src`åŠ è½½å¤±è´¥æ—¶å€™ç”¨ el.src = el.getAttribute(attr); el.onerror = function () { el.src = params.errorPath || cache; } } /** * åŠ è½½å•ä¸ªèŠ‚ç‚¹ * @param {HTMLElement} el */ function loadElement(el) { switch (type) { case &quot;src&quot;: loadImage(el); break; case &quot;background&quot;: el.style.backgroundImage = `url(${el.getAttribute(attr)})`; break; } el.removeAttribute(attr); observer.unobserve(el); } /** * ç›‘å¬å™¨ * [MDNè¯´æ˜](https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver) */ const observer = new IntersectionObserver(function(entries) { for (let i = 0; i &lt; entries.length; i++) { const item = entries[i]; if (item.isIntersecting) { loadElement(item.target); } } }) update(); return { observer, update } } åœ¨vueä¸­ä½¿ç”¨æŒ‡ä»¤å»ä½¿ç”¨ import Vue from &quot;vue&quot;; /** æ·»åŠ ä¸€ä¸ªåŠ è½½`src`çš„æŒ‡ä»¤ */ const lazySrc = lazyLoad({ lazyAttr: &quot;vlazy&quot;, errorPath: &quot;./img/error.jpg&quot; }) Vue.directive(&quot;v-lazy&quot;, { inserted(el, binding) { el.setAttribute(&quot;vlazy&quot;, binding.value); // è·Ÿä¸Šé¢çš„å¯¹åº” lazySrc.observer.observe(el); } }) /** æ·»åŠ ä¸€ä¸ªåŠ è½½`background`çš„æŒ‡ä»¤ */ const lazyBg = lazyLoad({ lazyAttr: &quot;vlazybg&quot;, loadType: &quot;background&quot; }) Vue.directive(&quot;v-lazybg&quot;, { inserted(el, binding) { el.setAttribute(&quot;vlazybg&quot;, binding.value); // è·Ÿä¸Šé¢çš„å¯¹åº” lazyBg.observer.observe(el); } }) ä¸Šä¼ å›¾ç‰‡&lt;!-- å…ˆå‡†å¤‡å¥½ä¸€ä¸ªinputæ ‡ç­¾ï¼Œç„¶åè®¾ç½®type=&quot;file&quot;ï¼Œæœ€åæŒ‚è½½ä¸€ä¸ªonchangeäº‹ä»¶ --&gt; &lt;input class=&quot;upload-input&quot; type=&quot;file&quot; name=&quot;picture&quot; onchange=&quot;upLoadImage(this)&quot;&gt; /** * inputä¸Šä¼ å›¾ç‰‡ * @param {HTMLInputElement} el */ function upLoadImage(el) { /** ä¸Šä¼ æ–‡ä»¶ */ const file = el.files[0]; /** ä¸Šä¼ ç±»å‹æ•°ç»„ */ const types = [&quot;image/jpg&quot;, &quot;image/png&quot;, &quot;image/jpeg&quot;, &quot;image/gif&quot;]; // åˆ¤æ–­æ–‡ä»¶ç±»å‹ if (types.indexOf(file.type) &lt; 0) { file.value = null; // è¿™é‡Œä¸€å®šè¦æ¸…ç©ºå½“å‰é”™è¯¯çš„å†…å®¹ return alert(&quot;æ–‡ä»¶æ ¼å¼åªæ”¯æŒï¼šjpg å’Œ png&quot;); } // åˆ¤æ–­å¤§å° if (file.size &gt; 2 * 1024 * 1024) { file.value = null; return alert(&quot;ä¸Šä¼ çš„æ–‡ä»¶ä¸èƒ½å¤§äº2M&quot;); } const formData = new FormData(); // è¿™ä¸ªæ˜¯ä¼ ç»™åå°çš„æ•°æ® formData.append(&quot;img&quot;, file); // è¿™é‡Œ`img`æ˜¯è·Ÿåå°çº¦å®šå¥½çš„`key`å­—æ®µ console.log(formData, file); // æœ€åPOSTç»™åå°ï¼Œè¿™é‡Œæˆ‘ç”¨ä¸Šé¢çš„æ–¹æ³• ajax({ url: &quot;http://xxx.com/uploadImg&quot;, method: &quot;POST&quot;, data: {}, formData: formData, overtime: 5000, success(res) { console.log(&quot;ä¸Šä¼ æˆåŠŸ&quot;, res); }, fail(err) { console.log(&quot;ä¸Šä¼ å¤±è´¥&quot;, err); }, timeout() { console.warn(&quot;XMLHttpRequest è¯·æ±‚è¶…æ—¶ !!!&quot;); } }); } base64è½¬æ¢å’Œé™æ€é¢„è§ˆ ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶ æ‹–æ‹½æ•ˆæœå‚è€ƒä¸Šé¢swiperçš„å®ç°æ–¹å¼ï¼Œä¸‹æ‹‰ä¸­çš„æ•ˆæœæ˜¯å¯ä»¥è‡ªå·±å®šä¹‰çš„`javascript// è¿™é‡Œæˆ‘åšçš„ä¸æ˜¯ç”¨ window çš„æ»šåŠ¨äº‹ä»¶ï¼Œè€Œæ˜¯ç”¨æœ€å¤–å±‚çš„ç»‘å®šè§¦æ‘¸ä¸‹æ‹‰äº‹ä»¶å»å®ç°// å¥½å¤„æ˜¯æˆ‘ç”¨åœ¨Vueè¿™ç±»å•é¡µåº”ç”¨çš„æ—¶å€™ï¼Œç»„ä»¶é”€æ¯æ—¶ä¸ç”¨å»è§£ç»‘ window çš„ scroll äº‹ä»¶// ä½†æ˜¯æ»‘åŠ¨åˆ°åº•éƒ¨äº‹ä»¶å°±å¿…é¡»è¦ç”¨ window çš„ scroll äº‹ä»¶ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ /** ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶ @param {object} option é…ç½® @param {HTMLElement} option.el ä¸‹æ‹‰å…ƒç´ ï¼ˆå¿…é€‰ï¼‰ @param {number} option.distance ä¸‹æ‹‰è·ç¦»[px]ï¼ˆå¯é€‰ï¼‰ @param {number} option.deviation é¡¶éƒ¨å¾€ä¸‹åç§»é‡[px]ï¼ˆå¯é€‰ï¼‰ @param {string} option.loadIcon ä¸‹æ‹‰ä¸­çš„ icon htmlï¼ˆå¯é€‰ï¼‰/function dropDownRefresh(option) { const doc = document; /** æ•´ä½“èŠ‚ç‚¹ / const page = option.el; / ä¸‹æ‹‰è·ç¦» */ const distance = option.distance || 88; / é¡¶éƒ¨å¾€ä¸‹åç§»é‡ / const deviation = option.deviation || 0; /** é¡¶å±‚èŠ‚ç‚¹ / const topNode = doc.createElement(â€œdivâ€); /* ä¸‹æ‹‰æ—¶é®ç½© / const maskNode = doc.createElement(â€œdivâ€); topNode.innerHTML = &lt;div refresh-icon style=&quot;transition: .2s all;&quot;&gt;&lt;svg style=&quot;transform: rotate(90deg); display: block;&quot; t=&quot;1570593064555&quot; viewBox=&quot;0 0 1575 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;26089&quot; width=&quot;48&quot; height=&quot;48&quot;&gt;&lt;path d=&quot;M1013.76 0v339.968H484.115692V679.778462h529.644308v339.968l529.644308-485.612308v-48.600616L1013.76 0zM243.396923 679.857231h144.462769V339.968H243.396923V679.778462z m-240.797538 0h144.462769V339.968H2.599385V679.778462z&quot; fill=&quot;#000000&quot; fill-opacity=&quot;.203&quot; p-id=&quot;26090&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div refresh-loading style=&quot;display: none; animation: refresh-loading 1s linear infinite;&quot;&gt;${option.loadIcon || &#39;&lt;p style=&quot;font-size: 15px; color: #666;&quot;&gt;loading...&lt;/p&gt;&#39;}&lt;/div&gt;; topNode.style.cssText = width: 100%; height: ${distance}px; position: fixed; top: ${-distance + deviation}px; left: 0; z-index: 10; display: flex; flex-wrap: wrap; align-items: center; justify-content: center; box-sizing: border-box; margin: 0; padding: 0;; maskNode.style.cssText = â€œposition: fixed; top: 0; left: 0; width: 100%; height: 100vh; box-sizing: border-box; margin: 0; padding: 0; background-color: rgba(0,0,0,0); z-index: 999;â€; page.parentNode.insertBefore(topNode, page); /** è®¾ç½®åŠ¨ç”»æ—¶é—´ @param {number} n ç§’æ•°*/function setAnimation(n) { page.style.transition = topNode.style.transition = n + â€œs allâ€;} /** è®¾ç½®æ»‘åŠ¨è·ç¦» @param {number} n æ»‘åŠ¨çš„è·ç¦»ï¼ˆåƒç´ ï¼‰*/function setSlide(n) { page.style.transform = topNode.style.transform = translate3d(0px, ${n}px, 0px);} / ä¸‹æ‹‰æç¤º icon */const icon = topNode.querySelector(â€œ[refresh-icon]â€);/ ä¸‹æ‹‰ loading åŠ¨ç”» */const loading = topNode.querySelector(â€œ[refresh-loading]â€); return { /** ç›‘å¬å¼€å§‹åˆ·æ–° @param {Function} callback ä¸‹æ‹‰ç»“æŸå›è°ƒ @param {(n: number) =&gt; void} rangeCallback ä¸‹æ‹‰çŠ¶æ€å›è°ƒ/onRefresh(callback, rangeCallback = null) { /** é¡¶éƒ¨è·ç¦» / let scrollTop = 0; / å¼€å§‹è·ç¦» */ let startDistance = 0; / ç»“æŸè·ç¦» / let endDistance = 0; /** æœ€åç§»åŠ¨çš„è·ç¦» / let range = 0; // è§¦æ‘¸å¼€å§‹ page.addEventListener(â€œtouchstartâ€, function (e) { startDistance = e.touches[0].pageY; scrollTop = 1; setAnimation(0); }); // è§¦æ‘¸ç§»åŠ¨ page.addEventListener(â€œtouchmoveâ€, function (e) { scrollTop = doc.documentElement.scrollTop === 0 ? doc.body.scrollTop : doc.documentElement.scrollTop; // æ²¡åˆ°è¾¾é¡¶éƒ¨å°±åœæ­¢ if (scrollTop != 0) return; endDistance = e.touches[0].pageY; range = Math.floor(endDistance - startDistance); // åˆ¤æ–­å¦‚æœæ˜¯ä¸‹æ»‘æ‰æ‰§è¡Œ if (range &gt; 0) { // é˜»æ­¢æµè§ˆè‡ªå¸¦çš„ä¸‹æ‹‰æ•ˆæœ e.preventDefault(); // ç‰©ç†å›å¼¹å…¬å¼è®¡ç®—è·ç¦» range = range - (range * 0.5); // ä¸‹æ‹‰æ—¶iconæ—‹è½¬ if (range &gt; distance) { icon.style.transform = &quot;rotate(180deg)&quot;; } else { icon.style.transform = &quot;rotate(0deg)&quot;; } setSlide(range); // å›è°ƒè·ç¦»å‡½æ•° å¦‚æœæœ‰éœ€è¦ if (typeof rangeCallback === &quot;function&quot;) rangeCallback(range); } }); // è§¦æ‘¸ç»“æŸ page.addEventListener(â€œtouchendâ€, function () { setAnimation(0.3); // console.log(`ç§»åŠ¨çš„è·ç¦»ï¼š${range}, æœ€å¤§è·ç¦»ï¼š${distance}`); if (range &gt; distance &amp;&amp; range &gt; 1 &amp;&amp; scrollTop === 0) { setSlide(distance); doc.body.appendChild(maskNode); // é˜»æ­¢å¾€ä¸Šæ»‘åŠ¨ maskNode.ontouchmove = e =&gt; e.preventDefault(); // å›è°ƒæˆåŠŸä¸‹æ‹‰åˆ°æœ€å¤§è·ç¦»å¹¶æ¾å¼€å‡½æ•° if (typeof callback === &quot;function&quot;) callback(); icon.style.display = &quot;none&quot;; loading.style.display = &quot;block&quot;; } else { setSlide(0); } }); },/* ç»“æŸä¸‹æ‹‰ /end() { maskNode.parentNode.removeChild(maskNode); setAnimation(0.3); setSlide(0); icon.style.display = â€œblockâ€; loading.style.display = â€œnoneâ€;}}} ## ç›‘å¬æ»šåŠ¨åˆ°åº•éƒ¨ ```javascript /** * ç›‘å¬æ»šåŠ¨åˆ°åº•éƒ¨ * @param {object} options ä¼ å‚å¯¹è±¡ * @param {number} options.distance è·ç¦»åº•éƒ¨å¤šå°‘åƒç´ è§¦å‘ï¼ˆpxï¼‰ * @param {boolean} options.once æ˜¯å¦ä¸ºä¸€æ¬¡æ€§ï¼ˆé˜²æ­¢é‡å¤ç”¨ï¼‰ * @param {() =&gt; void} options.callback åˆ°è¾¾åº•éƒ¨å›è°ƒå‡½æ•° */ function onScrollToBottom(options) { const { distance = 0, once = false, callback = null } = options; const doc = document; /** æ»šåŠ¨äº‹ä»¶ */ function onScroll() { /** æ»šåŠ¨çš„é«˜åº¦ */ let scrollTop = doc.documentElement.scrollTop === 0 ? doc.body.scrollTop : doc.documentElement.scrollTop; /** æ»šåŠ¨æ¡é«˜åº¦ */ let scrollHeight = doc.documentElement.scrollTop === 0 ? doc.body.scrollHeight : doc.documentElement.scrollHeight; if (scrollHeight - scrollTop - distance &lt;= window.innerHeight) { if (typeof callback === &quot;function&quot;) callback(); if (once) window.removeEventListener(&quot;scroll&quot;, onScroll); } } window.addEventListener(&quot;scroll&quot;, onScroll); // å¿…è¦æ—¶å…ˆæ‰§è¡Œä¸€æ¬¡ // onScroll(); } éŸ³é¢‘æ’­æ”¾ç»„ä»¶/** * `AudioContext`éŸ³é¢‘ç»„ä»¶ * [èµ„æ–™å‚è€ƒ](https://www.cnblogs.com/Wayou/p/html5_audio_api_visualizer.html) * @description è§£å†³åœ¨ç§»åŠ¨ç«¯ç½‘é¡µä¸Šæ ‡ç­¾æ’­æ”¾éŸ³é¢‘å»¶è¿Ÿçš„æ–¹æ¡ˆ è²Œä¼¼`H5`æ¸¸æˆå¼•æ“ä¹Ÿæ˜¯ä½¿ç”¨è¿™ä¸ªå®ç° */ function audioComponent() { /** * éŸ³é¢‘ä¸Šä¸‹æ–‡ * @type {AudioContext} */ const context = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext)(); /** * @type {AnalyserNode} */ const analyser = context.createAnalyser();; /** * @type {AudioBufferSourceNode} */ let bufferNode = null; /** * @type {AudioBuffer} */ let buffer = null; /** æ˜¯å¦åŠ è½½å®Œæˆ */ let loaded = false; analyser.fftSize = 256; return { /** * åŠ è½½è·¯å¾„éŸ³é¢‘æ–‡ä»¶ * @param {string} url éŸ³é¢‘è·¯å¾„ * @param {(res: AnalyserNode) =&gt; void} callback åŠ è½½å®Œæˆå›è°ƒ */ loadPath(url, callback) { const XHR = new XMLHttpRequest(); XHR.open(&quot;GET&quot;, url, true); XHR.responseType = &quot;arraybuffer&quot;; // å…ˆåŠ è½½éŸ³é¢‘æ–‡ä»¶ XHR.onload = () =&gt; { context.decodeAudioData(XHR.response, audioBuffer =&gt; { // æœ€åç¼“å­˜éŸ³é¢‘èµ„æº buffer = audioBuffer; loaded = true; typeof callback === &quot;function&quot; &amp;&amp; callback(analyser); }); } XHR.send(null); }, /** * åŠ è½½ input éŸ³é¢‘æ–‡ä»¶ * @param {File} file éŸ³é¢‘æ–‡ä»¶ * @param {(res: AnalyserNode) =&gt; void} callback åŠ è½½å®Œæˆå›è°ƒ */ loadFile(file, callback) { const FR = new FileReader(); // å…ˆåŠ è½½éŸ³é¢‘æ–‡ä»¶ FR.onload = e =&gt; { const res = e.target.result; // ç„¶åè§£ç  context.decodeAudioData(res, audioBuffer =&gt; { // æœ€åç¼“å­˜éŸ³é¢‘èµ„æº buffer = audioBuffer; loaded = true; typeof callback === &quot;function&quot; &amp;&amp; callback(analyser); }); } FR.readAsArrayBuffer(file); }, /** æ’­æ”¾éŸ³é¢‘ */ play() { if (!loaded) return console.warn(&quot;éŸ³é¢‘æœªåŠ è½½å®Œæˆ !!!&quot;); // è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ›å»ºçš„éŸ³é¢‘å¯¹è±¡ä¸èƒ½ç¼“å­˜ä¸‹æ¥ç„¶åå¤šæ¬¡æ‰§è¡Œ start , æ‰€ä»¥æ¯æ¬¡éƒ½è¦åˆ›å»ºç„¶å start() bufferNode = context.createBufferSource(); bufferNode.connect(analyser); analyser.connect(context.destination); bufferNode.buffer = buffer; bufferNode.start(0); }, /** åœæ­¢æ’­æ”¾ */ stop() { if (!bufferNode) return console.warn(&quot;éŸ³é¢‘æœªæ’­æ”¾ !!!&quot;); bufferNode.stop(); } } } å…¨å±€ç›‘å¬å›¾ç‰‡é”™è¯¯å¹¶æ›¿æ¢åˆ°é»˜è®¤å›¾ç‰‡window.addEventListener(&quot;error&quot;, e =&gt; { /** é»˜è®¤`base64`å›¾ç‰‡ */ const defaultImg = &#39;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAACACAYAAADzsnDqAAANXElEQVR4Xu2dDYxcVRXHz3mz0FgjICBSgkZAQD5CwQ+Qz4BBBUEkUJpK0FAUYmms2O47d7oSmYbYnXfeLIXl01ojBAnSokRQQIWAIvEjkfBhUZGPEkMFDajgbjdu5x1zYVpmd2d25r1335uZzrkJIenec869//ubO/Pux3kIWlSBHBTAHGJoCFUAFDSFIBcFFLRcZNYgCpoykIsCClouMmsQBU0ZyEUBBS0XmTWIgqYM5KKAgpaLzBpEQVMGclFAQctFZg2ioCkDuSigoOUiswbJHLTR0dE5W7ZsWQAAB6rcnVMAETcj4vO+7z/QiVZkCtrIyMhB1Wr12wBwcic6pzFnKiAiq4wxpby1yRS0IAhuR8RFeXdK47VUYCERbWhZy2GFzEBbs2bNvMnJyc0O26qu3CnwJBHNd+eutafMQBseHj65UCg81LoJWqMTChBRZmPfqD+ZBVPQOoFP+zEVtPa10popFFDQUoinpu0r0E+gPVytVle1L43WjKNAoVC4YrZlpb4CjYhOiSOe1m1fAWa2D2JN1y8VtPa11JqzKKCgvS3OwzqjZfdZUdAUtOzoqvOsoCloCppLBdpYsNWvTpeCT/OlM5rOaBni9bZrBU1BU9BcKqBfnS7VjO9LZzSd0eJTk8BCQVPQEmAT30RBU9DiU5PAQkFT0BJgE99EQVPQ4lOTwEJBU9ASYBPfREFT0OJTk8BCQVPQEmAT30RBU9DiU5PAQkFT0BJgE99EQesgaMy8NxG9HH/Yes9CQesQaOVy+f2e560koiW9h038FitoHQKNmb8LABeJSNEYE8Qfut6yUNA6ABozfwoAfmZDi8gEIl5IRHf0FjrxWqugdQC0MAwfFZHj6obqT4i42Pf938Ubvt6praDlDFoQBMsQ8ZrpiCDifWNjYwtKpdJ47+DTfksVtBxBC8NwLxH5MwC8u8kQ3UhEl7Y/fL1TU0HLF7TrRaQVSIaIuHcQaq+lClpOoJXL5ZM8z/tlG8MyHkXR4mKxuL6Nuj1TRUHLCTRmfhAAPtEmGU9v3br13KGhIfs1u0MUBS0H0Jj5EgCwSZrjlHuJ6Iw4Bt1cV0HLGLTR0dFdtmzZ8gwivjcuCCJygzFmaVy7bqyvoGUMWhiGIyKyPMXg+0RUSWHfFabMfJ6IHIaIhwKA/e+w+oZp2qoUwxQEwdGImHYRdgwAziGin6doSteZhmF4eBRFi2rp+A9Q0FIMETP/FAA+k8LFNtONY2Njx61atep1B766zgUzn0tEP8yzYZ3Myu00yQszfxEAbnEo3k+I6LMO/fW1qx0CtFKptPPcuXOfBYD3uRxNRLzO9/2vuvTZr752CNCY+VsAMJTRIF5MROsy8h3b7erVq/fwPG8fz/PmAcA+iDhPRP4LAPZA58sDAwN/nzNnzstLly61/9Y1pedBC8PwCBF5IitF7SB6nnes7/t/zCrGbH5rs7X9Cj8TAOz/92izHRtF5E7P8+7rhlMqPQ8aM98FAGe3KX7Sak8R0RFJjZPYMfNpAHABAJwOALsn8VFnsxEAHkDEdZ36wPQ0aOVyeaHneXkdYLyHiM5KOeAtzZn5wwDwNQCwDzeui126ucYem/J9/x+unc/mr6dBY2b7AHBAXoKJyJXGmG9mES8Ign0R0QK2DAB2ziJGnc8XLHBENOOcXlZxexY0ZrYD3ok3r5xBRPe6HJBKpXJSFEVrAeBgl37b8PXAwMDAkuXLl9sPbKalJ0FbvXr1QQMDA3/JVJkmzhHx9UKhsN/y5ctfcxE/DMOFIpLX13+jJr8aRdEXisXifS7608xHT4IWBMEdiLgwS2Fa+HbyYlVmvgoAvt7BftSHXkZE12bVlp4DLQiCsxDxx1kJ0q5fRLzF9/0L260/vR4z311brkjqwrkdIn7e9/0fOHcMAD0HGjM/DQCHZCFGXJ8issQYc1NcuyAIRhAxzQmTuCHbrl8oFI5csWKF83XJngKNmQkAuu3y71FE9Hi7I8nMdhb8Xrv1O1DvbwBwtOvUET0DWi2lwYsdEL5VyP8Q0W6tKtm/l8vl+Z7n2eNHe7VTv0Udg4j3FwqFvyLibpOTk/sDQAgAxzrw7XzNsGdAY+ZbayvlDnR07uIhImp5P4GZ7ekSFwuxixrdtC+VSnPnzp17m6OdkstcrrP1BGj1KQ2cI+LIISIO+77fdGO/tqWUegkBEa/2fb/pkyozHwkA9qWwbc2ys3T/BUT8uKsdhJ4ALQiCxxFxviMmMnMjIp8zxtinyRmFmS1kdv8yVfE875DBwcFZb2sxs/0NmPiJuK6Bq4noG6kaXDPuetDCMLxMRNa46GzWPkTkVGOMveY3pTg8lPkcEX2wVT+Y+csA8J1W9dr4+1htVkt9cqWrQbMpDQBgs4gU2hCl01VeJ6Jdm8xmvwWAYxw0cBMR7dfKj+Mn22uJyO6/pipdDdq2nGapepif8c1EtHh6OHspRESectUMEdnFGPPGbP7CMFwrIhe7iCkizxpjDkzrq2tBi5HSIK0GTuyb/T5jZnsi42onQd7K79bw67nefxiGj4uIs9+01Wr1lJUrVz6cpg9dCxoz/x4APpamcznaVolooMnXpn0CPNlVW0RkyBgz3Mzf6OjonImJiQlX8Wp+RohoMI3PrgQtCIJLEfH6NB3L01ZEfmGMsVklp5Ra2qxXHLflLiI6p5nPSqVyQhRFj7iMKSLPGGNSHWHqOtBsSoOJiQl70eIdLsXK0peI3GaMsceupxRmtuf873Ec+yUi2reZzzAMl4vIiOOY9iu75W/D2WJ2HWjMfCMAfMW1UFn6E5GrjDErGoCWJNlMy6Yi4v6+79tTsjNKEAS3126jt/QTp0KhUDh4xYoVz8Sxqa/bVaCFYXiMiNilgJ4qzTJ9h2F4hYiUXHdGRM4zxtzZyG9Wp1vSPhB0G2iPiMgJrgcma38icpExZsaJDGa2qbPsrOa0NNvuqlQqe0ZR9E+nwd52dj4R3Z7Ud9eA5nA1O6kWie2iKDqzWCzavB9TShiGd4tIFmkVHiSiUxt8Vdu8IzPakbhjdYYiMmiMSfzbrytAq12Stde/Gq6suxAqYx8NL6wws30QsA8Erssb4+Pju5dKpa31jpn5cgC40nUw62+HAC0IAnvXMPU2RxYCt+lzMRHd3GCGsfuNdt/ReRGRY4wxdq1xewmCYAMiLnAe7C3QLjDG2CNIiUrHZ7SRkZGjqtXqY4la3yVGIkLGGHvocEphZju72Fkmi3IpEdkn9O2Fme1TYertokaNbWdHYrZOdhy0MAwfFJGWhwazGClXPhEx9H3fHjOfUjJeeF5HRNv3M8Mw3E9EnnfVp+l+PM87bHBw0N7XSFQ6Clrt7LzLnGaJRHBg1HBDPQiCcxAxq4R3jxHRR7a1vVKpnB1Fkc1DkkkZGBjYI81d1k6DZvOqvicTZfJ12jCjd6VSOTSKIptgJZNSv7YVBEEJEa/IJBDAq0S0ZxrfnQbN2WZzGhHS2orIK8aYvRv5YWZ7aHBKouK08ers38yaOTIyclC1WrW33e0x7ixKwxk7TqBOghannV1fN4qiE4vF4q+nNzTjmcaG2wQANtV9lnvDC9LmvFXQ3CFcISJ/ujtmPhEAfuUuTO6eXhsfH59XKpX+lyaygpZGvam2Tc/zM7O9TJLqmI27Zsb2dBsRzTiZEteLghZXsVnqR1F0WrFYfPNNx/UlCAJ72bfsMFSerj7t4p0LCprbIbuJiJZMd7l+/frCpk2bHnV0QWWbe3u0+nIReRIR7SWeczNIF9GwP0kkU9CSqNbERkTGd9ppp/mNEtsFQbAAETc4CreRiA6f7mt4ePgDhUKh4Tm1uHHtkzQiHk9Ez8W1bVRfQXOhYp2P2dKPMrPdKzw/bUhEPM73/d808sPMNqWXi1y7Tt+JpaClHfWZ9i+Oj48fWSqV/j39T66SvMz2HidHyyk7VJIX90PcPR6bZk90cbnXpofwff/JJjOafZPyeSmk2OHSVqXQortNEfGJycnJTw4NDTU87eogEd8GIpqRWjUMw3eKyGYA2CWpQr2YiG//QqHg5IdkUtE6bDfrtk3a1KIissoYs/0+QrlcPh0RRxGxZW6OZrr0ZGpR2xlmtlsyx3d4wDsWXkSWGmNuaNaAIAjWIeKXUjTwXwDwvIjsmgYwG7/ZBZsUbZtimtnDgI1SS2z8fQB4l6sG95ifLQBwAhE1PdjJzPbV2td1sl+IeInv+y6yDzXtRqag1WD7aO1T+6FOitnJ2PaExWzxXTwgJOzfSyKyzBjzo4T2bZtlDlrbLenzivZWu51ZMro11UjdtTbtRLOnV9fDoaC5VjSlvxyAW+t53trBwcE/pGxqLHMFLZZc+VWu5e1Y5PI1ip7n3Zo3YNsUU9DyYydRpDQvhq3trd6/Q78YNpGqatRSAX3VdUuJtEI/K6Bfnf08+jn2XUHLUex+DqWg9fPo59h3BS1Hsfs5lILWz6OfY98VtBzF7udQClo/j36OfVfQchS7n0MpaP08+jn2XUHLUex+DqWg9fPo59h3BS1Hsfs5lILWz6OfY98VtBzF7udQClo/j36OfVfQchS7n0P9H/gjHdvP/Qy/AAAAAElFTkSuQmCC&#39;; /** * @type {HTMLImageElement} */ const node = e.target; if (node.nodeName &amp;&amp; node.nodeName.toLocaleLowerCase() === &quot;img&quot;) { node.style.objectFit = &quot;cover&quot;; node.src = defaultImg; } }, true); å¤åˆ¶åŠŸèƒ½ç¿» Clipboard.js è¿™ä¸ªæ’ä»¶åº“æºç çš„æ—¶å€™æ‰¾åˆ°æ ¸å¿ƒä»£ç  setSelectionRange(start: number, end: number)ï¼Œç™¾åº¦ä¸Šæœåˆ°çš„å¤åˆ¶åŠŸèƒ½å…¨éƒ¨éƒ½å°‘äº†è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥æœåˆ°çš„å¤åˆ¶æ–‡æœ¬ä»£ç åœ¨ ios å’Œ IE ç­‰ä¸€äº›æµè§ˆå™¨ä¸Šå¤åˆ¶ä¸äº†ã€‚ /** * å¤åˆ¶æ–‡æœ¬ * @param {string} text å¤åˆ¶çš„å†…å®¹ * @param {() =&gt; void} success æˆåŠŸå›è°ƒ * @param {(tip: string) =&gt; void} fail å‡ºé”™å›è°ƒ */ function copyText(text, success = null, fail = null) { text = text.replace(/(^\\s*)|(\\s*$)/g, &quot;&quot;); if (!text) { typeof fail === &quot;function&quot; &amp;&amp; fail(&quot;å¤åˆ¶çš„å†…å®¹ä¸èƒ½ä¸ºç©ºï¼&quot;); return; } const id = &quot;the-clipboard&quot;; /** * ç²˜è´´æ¿èŠ‚ç‚¹ * @type {HTMLTextAreaElement} */ let clipboard = document.getElementById(id); if (!clipboard) { clipboard = document.createElement(&quot;textarea&quot;); clipboard.id = id; clipboard.readOnly = true clipboard.style.cssText = &quot;font-size: 15px; position: fixed; top: -1000%; left: -1000%;&quot;; document.body.appendChild(clipboard); } clipboard.value = text; clipboard.select(); clipboard.setSelectionRange(0, text.length); const state = document.execCommand(&quot;copy&quot;); if (state) { typeof success === &quot;function&quot; &amp;&amp; success(); } else { typeof fail === &quot;function&quot; &amp;&amp; fail(&quot;å¤åˆ¶å¤±è´¥&quot;); } } æ£€æµ‹ç±»å‹/** * æ£€æµ‹ç±»å‹ * @param {any} target æ£€æµ‹çš„ç›®æ ‡ * @returns {&quot;string&quot;|&quot;number&quot;|&quot;array&quot;|&quot;object&quot;|&quot;function&quot;|&quot;null&quot;|&quot;undefined&quot;} åªæšä¸¾ä¸€äº›å¸¸ç”¨çš„ç±»å‹ */ function checkType(target) { /** @type {string} */ const value = Object.prototype.toString.call(target); const result = value.match(/\\[object (\\S*)\\]/)[1]; return result.toLocaleLowerCase(); } æ ¼å¼åŒ–æ—¥æœŸï¼ˆä»£ç æå°‘ç‰ˆï¼‰/** * è·å–æŒ‡å®šæ—¥æœŸæ—¶é—´æˆ³ * @param {number} time æ¯«ç§’æ•° */ function getDateFormat(time = Date.now()) { const date = new Date(time); return `${date.toLocaleDateString()} ${date.toTimeString().slice(0, 8)}`; } jså°æ•°ç²¾åº¦è®¡ç®—/** * æ•°å­—è¿ç®—ï¼ˆä¸»è¦ç”¨äºå°æ•°ç‚¹ç²¾åº¦é—®é¢˜ï¼‰ * @param {number} a å‰é¢çš„å€¼ * @param {&quot;+&quot;|&quot;-&quot;|&quot;*&quot;|&quot;/&quot;} type è®¡ç®—æ–¹å¼ * @param {number} b åé¢çš„å€¼ * @example * ```js * // å¯é“¾å¼è°ƒç”¨ * const res = computeNumber(1.3, &quot;-&quot;, 1.2).next(&quot;+&quot;, 1.5).next(&quot;*&quot;, 2.3).next(&quot;/&quot;, 0.2).result; * console.log(res); * */function computeNumber(a, type, b) { /** * è·å–æ•°å­—å°æ•°ç‚¹çš„é•¿åº¦ * @param {number} n æ•°å­— */ function getDecimalLength(n) { const decimal = n.toString().split(&quot;.&quot;)[1]; return decimal ? decimal.length : 0; } /** * ä¿®æ­£å°æ•°ç‚¹ * @description é˜²æ­¢å‡ºç° `33.33333*100000 = 3333332.9999999995` &amp;&amp; `33.33*10 = 333.29999999999995` è¿™ç±»æƒ…å†µåšçš„å¤„ç† * @param {number} n */ const amend = (n, precision = 15) =&gt; parseFloat(Number(n).toPrecision(precision)); const power = Math.pow(10, Math.max(getDecimalLength(a), getDecimalLength(b))); let result = 0; a = amend(a * power); b = amend(b * power); switch (type) { case &quot;+&quot;: result = (a + b) / power; break; case &quot;-&quot;: result = (a - b) / power; break; case &quot;*&quot;: result = (a * b) / (power * power); break; case &quot;/&quot;: result = a / b; break; } result = amend(result); return { /** è®¡ç®—ç»“æœ */ result, /** * ç»§ç»­è®¡ç®— * @param {&quot;+&quot;|&quot;-&quot;|&quot;*&quot;|&quot;/&quot;} nextType ç»§ç»­è®¡ç®—æ–¹å¼ * @param {number} nextValue ç»§ç»­è®¡ç®—çš„å€¼ */ next(nextType, nextValue) { return computeNumber(result, nextType, nextValue); } }; } ## ä¸€è¡Œcssé€‚é…rem 750æ˜¯è®¾è®¡ç¨¿çš„å®½åº¦ï¼šä¹‹åçš„å•ä½ç›´æ¥1:1ä½¿ç”¨è®¾è®¡ç¨¿çš„å¤§å°ï¼Œå•ä½æ˜¯rem ```javascript html{ font-size: calc(100vw / 750); } å¥½ç”¨çš„æ ¼å¼åŒ–æ—¥æœŸæ–¹æ³•/** * æ ¼å¼åŒ–æ—¥æœŸ * @param {string | number | Date} value æŒ‡å®šæ—¥æœŸ * @param {string} format æ ¼å¼åŒ–çš„è§„åˆ™ * @example * ```js * formatDate(); * formatDate(1603264465956); * formatDate(1603264465956, &quot;h:m:s&quot;); * formatDate(1603264465956, &quot;Yå¹´MæœˆDæ—¥&quot;); * */function formatDate(value = Date.now(), format = â€œY-M-D h:m:sâ€) { const formatNumber = n =&gt; 0${n}.slice(-2); const date = new Date(value); const formatList = [â€œYâ€, â€œMâ€, â€œDâ€, â€œhâ€, â€œmâ€, â€œsâ€]; const resultList = []; resultList.push(date.getFullYear().toString()); resultList.push(formatNumber(date.getMonth() + 1)); resultList.push(formatNumber(date.getDate())); resultList.push(formatNumber(date.getHours())); resultList.push(formatNumber(date.getMinutes())); resultList.push(formatNumber(date.getSeconds())); for (let i = 0; i &lt; resultList.length; i++) { format = format.replace(formatList[i], resultList[i]); } return format;} ## ç½‘é¡µå®šä½ è¿™é‡Œä½¿ç”¨ç™¾åº¦å®šä½ï¼Œæ— è®ºä»£ç å°è£…ã€è°ƒç”¨æ–¹å¼è¿˜æ˜¯ä½ç½®å‡†ç¡®æ€§éƒ½æ¯”å¾®ä¿¡sdké‚£ä¸ªå¥½ç”¨å¤ªå¤šäº†ï¼ŒåŒ…æ‹¬åœ¨ä»»ä½•ç½‘é¡µç«¯ï¼› [æ–‡æ¡£è¯´æ˜](http://lbsyun.baidu.com/index.php?title=jspopularGL/guide/getkey) [è·å–ç™¾åº¦åœ°å›¾key](http://lbsyun.baidu.com/apiconsole/key#/home) ```javascript /** * æ’å…¥è„šæœ¬ * @param {string} link è„šæœ¬è·¯å¾„ * @param {Function} callback è„šæœ¬åŠ è½½å®Œæˆå›è°ƒ */ function insertScript(link, callback) { const label = document.createElement(&quot;script&quot;); label.src = link; label.onload = function () { if (label.parentNode) label.parentNode.removeChild(label); if (typeof callback === &quot;function&quot;) callback(); } document.body.appendChild(label); } /** * è·å–å®šä½ä¿¡æ¯ * @returns {Promise&lt;{ city: string, districtName: string, province: string, longitude: number, latitude: number }&gt;} */ function getLocationInfo() { /** * ä½¿ç”¨ç™¾åº¦å®šä½ * @param {(value: any) =&gt; void} callback */ function useBaiduLocation(callback) { const geolocation = new BMap.Geolocation({ maximumAge: 10 }) geolocation.getCurrentPosition(function(res) { console.log(&quot;%c ä½¿ç”¨ç™¾åº¦å®šä½ &gt;&gt;&quot;, &quot;background-color: #4e6ef2; padding: 2px 6px; color: #fff; border-radius: 2px&quot;, res); callback({ city: res.address.city, districtName: res.address.district, province: res.address.province, longitude: Number(res.longitude), latitude: Number(res.latitude) }) }) } return new Promise(function (resolve, reject) { if (!window._baiduLocation) { window._baiduLocation = function () { useBaiduLocation(resolve); } // ak=ä½ è‡ªå·±çš„key insertScript(&quot;https://api.map.baidu.com/api?v=2.0&amp;ak=66vCKv7PtNlOprFEe9kneTHEHl8DY1mR&amp;callback=_baiduLocation&quot;); } else { useBaiduLocation(resolve); } }) } è¾“å…¥ä¿ç•™æ•°å­—&lt;input type=&quot;text&quot;&gt;ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼Œå®æ—¶è¿‡æ»¤ä¿æŒæ•°å­—å€¼æ˜¾ç¤ºï¼› tipsï¼šåœ¨Firefoxä¸­è®¾ç½® &lt;input type=&quot;number&quot;&gt; ä¼šæœ‰æ ·å¼ bug /** * è¾“å…¥åªèƒ½æ˜¯æ•°å­— * @param {string | number} value è¾“å…¥çš„å€¼ * @param {boolean} decimal æ˜¯å¦è¦ä¿ç•™å°æ•° * @param {boolean} negative æ˜¯å¦å¯ä»¥ä¸ºè´Ÿæ•° */ function inputOnlyNumber(value, decimal, negative) { let result = value.toString().trim(); if (result.length === 0) return &quot;&quot;; const minus = (negative &amp;&amp; result[0] == &quot;-&quot;) ? &quot;-&quot; : &quot;&quot;; if (decimal) { result = result.replace(/[^0-9.]+/ig, &quot;&quot;); let array = result.split(&quot;.&quot;); if (array.length &gt; 1) { result = array[0] + &quot;.&quot; + array[1]; } } else { result = result.replace(/[^0-9]+/ig, &quot;&quot;); } return minus + result; } Intl.NumberFormatï¼ˆæ ¼å¼åŒ–æ•°å­—ï¼‰ ç°åœ¨JSæä¾›äº†ä¸€ä¸ªæ›´åŠ å¯ç”¨å’Œè§„èŒƒåŒ–çš„APIâ€”â€”Intl.NumberFormatã€‚å¯¹äºå¸¸ç”¨çš„è´§å¸æ ¼å¼åŒ–éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒã€‚ æ¨èä½¿ç”¨ new Intl.NumberFormat().format(123456.789); // æ˜¾ç¤ºç»“æœä¸ºï¼š123,456.789 new Intl.NumberFormat(&#39;ja-JP&#39;, { style: &#39;currency&#39;, currency: &#39;JPY&#39; }).format(12345.678); // ç»“æœæ˜¾ç¤ºä¸ºï¼š&quot;ï¿¥12,346&quot; æ­£åˆ™è¡¨è¾¾å¼ ï¼ˆå¤æ—©çš„åšæ³•ï¼‰ const number = 1234567; number.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, &#39;$1,&#39;); // ç»“æœä¸ºï¼š1,234,567 Date API const number = 123456.789; number.toLocaleString();// ç»“æœä¸ºï¼š123,456.789 åŠ å¯†base64åŠ å¯†var str = &#39;hello&#39;; var str64 = window.btoa(str); console.log(&#39;ç»base64ç¼–ç åï¼š&#39;+ str64); // ç»base64ç¼–ç åï¼šaGVsbG8= console.log(&#39;ç»base64è§£ç åï¼š&#39; + window.atob(str64)); // ç»base64è§£ç åï¼šhello ç¼–ç å’Œè§£ç å­—ç¬¦ä¸²ä½¿ç”¨JSå‡½æ•°çš„escape()å’Œunescape()ï¼Œåˆ†åˆ«æ˜¯ç¼–ç å’Œè§£ç å­—ç¬¦ä¸² var escape1 = escape(&#39;æˆ‘çš„åå­—æ˜¯ï¼šNeo&#39;); // ç¼–ç  var unescape1 = unescape(escape1); // è§£ç  console.log(escape1) // %u6211%u7684%u540D%u5B57%u662F%uFF1ANeo console.log(unescape1) // &quot;æˆ‘çš„åå­—æ˜¯ï¼šNeo&quot; lucky-canvasã€å¤§è½¬ç›˜/ä¹å®«æ ¼ã€‘æŠ½å¥–lucky-canvasã€å¤§è½¬ç›˜/ä¹å®«æ ¼ã€‘æŠ½å¥– FineBIå¤§å±FineBIå¤§å± å¤§å±æ•°æ®å±•ç¤ºæ¨¡æ¿å¤§å±æ•°æ®å±•ç¤ºæ¨¡æ¿ jsæ‹–åŠ¨æ»‘å—éªŒè¯åŠŸèƒ½&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;æ»‘å—è§£é”å°è£…jsæ–¹æ³•&lt;/title&gt; &lt;!--æ³¨ï¼šè¿™é‡Œé¦–æ¬¡ç”¨åˆ°äº†iconfontçš„è¯­æ³•ï¼Œå³çŸ¢é‡å›¾æ ‡--&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;font/iconfont.css&quot; /&gt; &lt;style&gt; * { padding: 0; margin: 0; } #box { position: relative; width: 300px; height: 40px; margin: 0 auto; margin-top: 10px; background-color: #e8e8e8; box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2); } .bgColor { position: absolute; left: 0; top: 0; width: 40px; height: 40px; background-color: lightblue; } .txt { position: absolute; width: 100%; height: 40px; line-height: 40px; font-size: 14px; color: #000; text-align: center; } .slider { position: absolute; left: 0; top: 0; width: 50px; height: 38px; border: 1px solid #ccc; background: #fff; text-align: center; cursor: move; } .slider &gt; i { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } .slider.active &gt; i { color: green; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;box&quot; onselectstart=&quot;return false;&quot;&gt; &lt;div class=&quot;bgColor&quot;&gt;&lt;/div&gt; &lt;div class=&quot;txt&quot;&gt;æ»‘åŠ¨è§£é”&lt;/div&gt; &lt;!--ç»™iæ ‡ç­¾æ·»åŠ ä¸Šç›¸åº”å­—ä½“å›¾æ ‡çš„ç±»åå³å¯--&gt; &lt;div class=&quot;slider&quot;&gt;&lt;i class=&quot;iconfont icon-double-right&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt; &lt;script&gt; //ä¸€ã€å®šä¹‰äº†ä¸€ä¸ªè·å–å…ƒç´ çš„æ–¹æ³• function getEle(selector) { return document.querySelector(selector) } //äºŒã€è·å–åˆ°éœ€è¦ç”¨åˆ°çš„DOMå…ƒç´  var box = getEle(&quot;#box&quot;), //å®¹å™¨ bgColor = getEle(&quot;.bgColor&quot;), //èƒŒæ™¯è‰² txt = getEle(&quot;.txt&quot;), //æ–‡æœ¬ slider = getEle(&quot;.slider&quot;), //æ»‘å— icon = getEle(&quot;.slider&gt;i&quot;), successMoveDistance = box.offsetWidth - slider.offsetWidth, //è§£é”éœ€è¦æ»‘åŠ¨çš„è·ç¦» downX, //ç”¨äºå­˜æ”¾é¼ æ ‡æŒ‰ä¸‹æ—¶çš„ä½ç½® isSuccess = false //æ˜¯å¦è§£é”æˆåŠŸçš„æ ‡å¿—ï¼Œé»˜è®¤ä¸æˆåŠŸ //ä¸‰ã€ç»™æ»‘å—æ·»åŠ é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ slider.onmousedown = mousedownHandler //3.1é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶çš„æ–¹æ³•å®ç° function mousedownHandler(e) { bgColor.style.transition = &quot;&quot; slider.style.transition = &quot;&quot; var e = e || window.event || e.which downX = e.clientX //åœ¨é¼ æ ‡æŒ‰ä¸‹æ—¶ï¼Œåˆ†åˆ«ç»™é¼ æ ‡æ·»åŠ ç§»åŠ¨å’Œæ¾å¼€äº‹ä»¶ document.onmousemove = mousemoveHandler document.onmouseup = mouseupHandler } //å››ã€å®šä¹‰ä¸€ä¸ªè·å–é¼ æ ‡å½“å‰éœ€è¦ç§»åŠ¨å¤šå°‘è·ç¦»çš„æ–¹æ³• function getOffsetX(offset, min, max) { if (offset &lt; min) { offset = min } else if (offset &gt; max) { offset = max } return offset } //3.1.1é¼ æ ‡ç§»åŠ¨äº‹ä»¶çš„æ–¹æ³•å®ç° function mousemoveHandler(e) { var e = e || window.event || e.which var moveX = e.clientX var offsetX = getOffsetX(moveX - downX, 0, successMoveDistance) bgColor.style.width = offsetX + &quot;px&quot; slider.style.left = offsetX + &quot;px&quot; if (offsetX == successMoveDistance) { success() } //å¦‚æœä¸è®¾ç½®æ»‘å—æ»‘åŠ¨æ—¶ä¼šå‡ºç°é—®é¢˜ï¼ˆç›®å‰è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰ e.preventDefault() } //3.1.2é¼ æ ‡æ¾å¼€äº‹ä»¶çš„æ–¹æ³•å®ç° function mouseupHandler(e) { if (!isSuccess) { bgColor.style.width = 0 + &quot;px&quot; slider.style.left = 0 + &quot;px&quot; bgColor.style.transition = &quot;width 0.8s linear&quot; slider.style.transition = &quot;left 0.8s linear&quot; } document.onmousemove = null document.onmouseup = null } //äº”ã€å®šä¹‰ä¸€ä¸ªæ»‘å—è§£é”æˆåŠŸçš„æ–¹æ³• function success() { isSuccess = true txt.innerHTML = &quot;è§£é”æˆåŠŸ&quot; bgColor.style.backgroundColor = &quot;lightgreen&quot; slider.className = &quot;slider active&quot; icon.className = &quot;iconfont icon-xuanzhong&quot; //æ»‘åŠ¨æˆåŠŸæ—¶ï¼Œç§»é™¤é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶å’Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶ slider.onmousedown = null document.onmousemove = null } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; canvaså®ç°è´ªåƒè›‡åŸæ–‡ &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;è´ªåƒè›‡&lt;/title&gt; &lt;style&gt; body { background-color: #eee; } .container { text-align: center; } .top { margin: 20px auto; width: 640px; } #score { float: left; } .main { position: absolute; left: 50%; transform: translateX(-50%); width: 642px; height: 402px; } #snake { border: 1px solid #000; width: 640px; height: 400px; display: inline-block; z-index: 99; background-color: rgba(0, 0, 0, .1); } #mask { background-color: rgba(0, 0, 0, .5); position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 100; display: block; color: #fff; line-height: 400px; text-align: center; font-size: 30px; cursor: pointer; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;top&quot;&gt; &lt;span id=&quot;score&quot;&gt;Score: 0&lt;/span&gt; &lt;button id=&quot;restart&quot;&gt;é‡æ–°å¼€å§‹&lt;/button&gt; &lt;button id=&quot;stop&quot;&gt;æš‚åœ&lt;/button&gt; &lt;button id=&quot;continue&quot;&gt;ç»§ç»­&lt;/button&gt; &lt;/div&gt; &lt;div class=&quot;main&quot;&gt; &lt;canvas id=&quot;snake&quot; width=&quot;640&quot; height=&quot;400&quot;&gt;&lt;/canvas&gt; &lt;div id=&quot;mask&quot;&gt;å¼€å§‹&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;script&gt; let greedySnake = null let score = document.querySelector(&#39;#score&#39;) let restart = document.querySelector(&#39;#restart&#39;) let stop = document.querySelector(&#39;#stop&#39;) let conti = document.querySelector(&#39;#continue&#39;) let mask = document.querySelector(&#39;#mask&#39;) restart.onclick = () =&gt; { if (!greedySnake.isStart) return greedySnake.start() } stop.onclick = () =&gt; { if (greedySnake.isStop || !greedySnake.isStart) return greedySnake.stop() } conti.onclick = () =&gt; { if (!greedySnake.isStop || !greedySnake.isStart) return greedySnake.continue() } mask.onclick = () =&gt; { if (!greedySnake.isStart) { greedySnake.start() } else { greedySnake.continue() } } // å¤§å°ä¸º64 * 40 class GreedySnake { constructor() { this.canvas = document.querySelector(&#39;#snake&#39;) this.ctx = this.canvas.getContext(&#39;2d&#39;) this.maxX = 64 // æœ€å¤§è¡Œ this.maxY = 40 // æœ€å¤§åˆ— this.itemWidth = 10 // æ¯ä¸ªç‚¹çš„å¤§å° this.direction = &#39;right&#39;// up down right left æ–¹å‘ this.speed = 150 // ms é€Ÿåº¦ this.isStop = false // æ˜¯å¦æš‚åœ this.isOver = false // æ˜¯å¦ç»“æŸ this.isStart = false // æ˜¯å¦å¼€å§‹ this.score = 0 // åˆ†æ•° this.timer = null // ç§»åŠ¨å®šæ—¶å™¨ this.j = 1 this.canChange = true this.grid = new Array() for (let i = 0; i &lt; this.maxX; i++) { for (let j = 0; j &lt; this.maxY; j++) { this.grid.push([i, j]) } } this.drawGridLine() this.getDirection() } // å¼€å§‹ start() { if (this.timer) { clearTimeout(this.timer) } if (!this.isStart) { this.isStart = true } this.score = 0 this.speed = 150 this.isStop = false this.isOver = false this.direction = &#39;right&#39; this.createSnake() this.createFood() this.draw() this.move() mask.style.display = &#39;none&#39; } // åˆ›å»ºè›‡ä¸»ä½“ createSnake() { this.snake = [ [4, 25], [3, 25], [2, 25], [1, 25], [0, 25] ] } // ç§»åŠ¨ move() { if (this.isStop) return let [x, y] = this.snake[0] switch(this.direction) { case &#39;left&#39;: x-- break case &#39;right&#39;: x++ break case &#39;up&#39;: y-- break case &#39;down&#39;: y++ break } // å¦‚æœä¸‹ä¸€æ­¥ä¸æ˜¯é£Ÿç‰©çš„ä½ç½® if (x !== this.food[0] || y !== this.food[1]) { this.snake.pop() } else { this.createFood() } if (this.over([x, y])) { this.isOver = true mask.style.display = &#39;block&#39; mask.innerHTML = &#39;ç»“æŸ&#39; return } if (this.completed()) { mask.style.display = &#39;block&#39; mask.innerHTML = &#39;æ­å–œæ‚¨ï¼Œæ¸¸æˆé€šå…³&#39; return } this.snake.unshift([x, y]) this.draw() this.canChange = true this.timer = setTimeout(() =&gt; this.move(), this.speed) } // æš‚åœæ¸¸æˆ stop() { if (this.isOver) return this.isStop = true mask.style.display = &#39;block&#39; mask.innerHTML = &#39;æš‚åœ&#39; } // ç»§ç»­æ¸¸æˆ continue() { if (this.isOver) return this.isStop = false this.move() mask.style.display = &#39;none&#39; } getDirection() { // ä¸Š38 ä¸‹40 å·¦37 å³39 ä¸èƒ½å¾€ç›¸åçš„æ–¹å‘èµ° document.onkeydown = (e) =&gt; { // åœ¨è´ªåƒè›‡ç§»åŠ¨çš„é—´éš”å†…ä¸èƒ½è¿ç»­æ”¹å˜ä¸¤æ¬¡æ–¹å‘ if (!this.canChange) return switch(e.keyCode) { case 37: if (this.direction !== &#39;right&#39;) { this.direction = &#39;left&#39; this.canChange = false } break case 38: if (this.direction !== &#39;down&#39;) { this.direction = &#39;up&#39; this.canChange = false } break case 39: if (this.direction !== &#39;left&#39;) { this.direction = &#39;right&#39; this.canChange = false } break case 40: if (this.direction !== &#39;up&#39;) { this.direction = &#39;down&#39; this.canChange = false } break case 32: // ç©ºæ ¼æš‚åœä¸ç»§ç»­ if (!this.isStop) { this.stop() } else { this.continue() } break } } } createPos() { let [x, y] = this.grid[(Math.random() * this.grid.length) | 0] for (let i = 0; i &lt; this.snake.length; i++) { if (this.snake[i][0] == x &amp;&amp; this.snake[i][1] == y) { return this.createPos() } } return [x, y] } // ç”Ÿæˆé£Ÿç‰© createFood() { this.food = this.createPos() // æ›´æ–°åˆ†æ•° score.innerHTML = &#39;Score: &#39;+ this.score++ if (this.speed &gt; 50) { this.speed-- } } // ç»“æŸ over([x, y]) { if (x &lt; 0 || x &gt;= this.maxX || y &lt; 0 || y &gt;= this.maxY) { return true } if (this.snake.some(v =&gt; v[0] === x &amp;&amp; v[1] === y)) { return true } } // å®Œæˆ completed() { if (this.snake.length == this.maxX * this.maxY) { return true } } // ç½‘æ ¼çº¿ drawGridLine() { for (let i = 1; i &lt; this.maxY; i++) { this.ctx.moveTo(0, i * this.itemWidth) this.ctx.lineTo(this.canvas.width, i * this.itemWidth) } for (let i = 1; i &lt; this.maxX; i++) { this.ctx.moveTo(i * this.itemWidth, 0) this.ctx.lineTo(i * this.itemWidth, this.canvas.height) } this.ctx.lineWidth = 1 this.ctx.strokeStyle = &#39;#ddd&#39; this.ctx.stroke() } // ç»˜åˆ¶ draw() { // æ¸…ç©ºç”»å¸ƒ this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height) this.drawGridLine() this.ctx.fillStyle=&quot;#000&quot; this.ctx.fillRect( this.food[0] * this.itemWidth + this.j, this.food[1] * this.itemWidth + this.j, this.itemWidth - this.j * 2, this.itemWidth - + this.j * 2 ) this.j ^= 1 this.ctx.fillStyle=&quot;green&quot; this.ctx.fillRect( this.snake[0][0] * this.itemWidth + 0.5, this.snake[0][1] * this.itemWidth + 0.5, this.itemWidth - 1, this.itemWidth - 1 ) this.ctx.fillStyle=&quot;red&quot; for (let i = 1; i &lt; this.snake.length; i++) { this.ctx.fillRect( this.snake[i][0] * this.itemWidth + 0.5, this.snake[i][1] * this.itemWidth + 0.5, this.itemWidth - 1, this.itemWidth - 1 ) } } } greedySnake = new GreedySnake() &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; canvaså®ç°å¸¦ç¬”é”‹æ‰‹å†™ç¬”è®°&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt; &lt;title&gt;canvas æ‰‹å†™æ¯›ç¬”å­—æ•ˆæœ&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; #canvasId { background-color: #ffffcc; } &lt;/style&gt; &lt;/head&gt; &lt;body style=&quot;touch-action: none&quot;&gt; &lt;canvas id=&quot;canvasId&quot; width=&quot;800&quot; height=&quot;720&quot;&gt;&lt;/canvas&gt;&lt;br /&gt; &lt;script&gt; Array.prototype.clone = function () { return [].concat(this) //æˆ–è€… return this.concat(); } class Point { constructor(x, y, time) { this.x = x this.y = y this.isControl = false this.time = Date.now() this.lineWidth = 0 this.isAdd = false } } class Line { constructor() { this.points = new Array() this.changeWidthCount = 0 this.lineWidth = 10 } } class HandwritingSelf { constructor(canvas) { this.canvas = canvas this.ctx = canvas.getContext(&quot;2d&quot;) // this.points = new Array(); this.line = new Line() this.pointLines = new Array() //Lineæ•°ç»„ this.k = 0.5 this.begin = null this.middle = null this.end = null this.preTime = null this.lineWidth = 8 this.isDown = false } down(x, y) { this.isDown = true this.line = new Line() this.line.lineWidth = this.lineWidth let currentPoint = new Point(x, y, Date.now()) this.addPoint(currentPoint) this.preTime = Date.now() } move(x, y) { // console.log(&quot;move:&quot;,x,y) if (this.isDown) { let currentPoint = new Point(x, y, Date.now()) this.addPoint(currentPoint) this.draw() } } up(x, y) { // if (e.touches.length &gt; 0) { let currentPoint = new Point(x, y, Date.now()) this.addPoint(currentPoint) // } this.draw(true) this.pointLines.push(this.line) this.begin = null this.middle = null this.end = null this.isDown = false } draw(isUp = false) { this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height) this.ctx.strokeStyle = &quot;rgba(255,20,87,1)&quot; //ç»˜åˆ¶ä¸åŒ…å«this.lineçš„çº¿æ¡ this.pointLines.forEach((line, index) =&gt; { let points = line.points this.ctx.beginPath() this.ctx.ellipse( points[0].x - 1.5, points[0].y, 6, 3, Math.PI / 4, 0, Math.PI * 2 ) this.ctx.fill() this.ctx.beginPath() this.ctx.moveTo(points[0].x, points[0].y) let lastW = line.lineWidth this.ctx.lineWidth = line.lineWidth this.ctx.lineJoin = &quot;round&quot; this.ctx.lineCap = &quot;round&quot; let minLineW = line.lineWidth / 4 let isChangeW = false let changeWidthCount = line.changeWidthCount for (let i = 1; i &lt;= points.length; i++) { if (i == points.length) { this.ctx.stroke() break } if (i &gt; points.length - changeWidthCount) { if (!isChangeW) { this.ctx.stroke() //å°†ä¹‹å‰çš„çº¿æ¡ä¸å˜çš„pathç»˜åˆ¶å®Œ isChangeW = true if (i &gt; 1 &amp;&amp; points[i - 1].isControl) continue } let w = ((lastW - minLineW) / changeWidthCount) * (points.length - i) + minLineW points[i - 1].lineWidth = w this.ctx.beginPath() //ä¸ºäº†å¼€å¯æ–°çš„è·¯å¾„ å¦åˆ™æ¯æ¬¡stroke éƒ½ä¼šæŠŠä¹‹å‰çš„è·¯å¾„åœ¨æä¸€é // this.ctx.strokeStyle = &quot;rgba(&quot;+Math.random()*255+&quot;,&quot;+Math.random()*255+&quot;,&quot;+Math.random()*255+&quot;,1)&quot;; this.ctx.lineWidth = w this.ctx.moveTo(points[i - 1].x, points[i - 1].y) //ç§»åŠ¨åˆ°ä¹‹å‰çš„ç‚¹ this.ctx.lineTo(points[i].x, points[i].y) this.ctx.stroke() //å°†ä¹‹å‰çš„çº¿æ¡ä¸å˜çš„pathç»˜åˆ¶å®Œ } else { if (points[i].isControl &amp;&amp; points[i + 1]) { this.ctx.quadraticCurveTo( points[i].x, points[i].y, points[i + 1].x, points[i + 1].y ) } else if (i &gt;= 1 &amp;&amp; points[i - 1].isControl) { //ä¸Šä¸€ä¸ªæ˜¯æ§åˆ¶ç‚¹ å½“å‰ç‚¹å·²ç»è¢«ç»˜åˆ¶ } else this.ctx.lineTo(points[i].x, points[i].y) } } }) //ç»˜åˆ¶this.lineçº¿æ¡ let points if (isUp) points = this.line.points else points = this.line.points.clone() //å½“å‰ç»˜åˆ¶çš„çº¿æ¡æœ€åå‡ ä¸ªè¡¥ç‚¹ è´å¡å°”æ–¹å¼å¢åŠ ç‚¹ let count = 0 let insertCount = 0 let i = points.length - 1 let endPoint = points[i] let controlPoint let startPoint while (i &gt;= 0) { if (points[i].isControl == true) { controlPoint = points[i] count++ } else { startPoint = points[i] } if (startPoint &amp;&amp; controlPoint &amp;&amp; endPoint) { //ä½¿ç”¨è´å¡å°”è®¡ç®—è¡¥ç‚¹ let dis = this.z_distance(startPoint, controlPoint) + this.z_distance(controlPoint, endPoint) let insertPoints = this.BezierCalculate( [startPoint, controlPoint, endPoint], Math.floor(dis / 6) + 1 ) insertCount += insertPoints.length var index = i //æ’å…¥ä½ç½® // æŠŠinsertPoints å˜æˆä¸€ä¸ªé€‚åˆspliceçš„æ•°ç»„ï¼ˆåŒ…å«spliceå‰2ä¸ªå‚æ•°çš„æ•°ç»„ï¼‰ insertPoints.unshift(index, 1) Array.prototype.splice.apply(points, insertPoints) //è¡¥å®Œç‚¹å endPoint = startPoint startPoint = null } if (count &gt;= 6) break i-- } //ç¡®å®šæœ€åçº¿å®½å˜åŒ–çš„ç‚¹æ•° let changeWidthCount = count + insertCount if (isUp) this.line.changeWidthCount = changeWidthCount //åˆ¶é€ æ¤­åœ†å¤´ this.ctx.fillStyle = &quot;rgba(255,20,87,1)&quot; this.ctx.beginPath() this.ctx.ellipse( points[0].x - 1.5, points[0].y, 6, 3, Math.PI / 4, 0, Math.PI * 2 ) this.ctx.fill() this.ctx.beginPath() this.ctx.moveTo(points[0].x, points[0].y) let lastW = this.line.lineWidth this.ctx.lineWidth = this.line.lineWidth this.ctx.lineJoin = &quot;round&quot; this.ctx.lineCap = &quot;round&quot; let minLineW = this.line.lineWidth / 4 let isChangeW = false for (let i = 1; i &lt;= points.length; i++) { if (i == points.length) { this.ctx.stroke() break } //æœ€åçš„ä¸€äº›ç‚¹çº¿å®½å˜ç»† if (i &gt; points.length - changeWidthCount) { if (!isChangeW) { this.ctx.stroke() //å°†ä¹‹å‰çš„çº¿æ¡ä¸å˜çš„pathç»˜åˆ¶å®Œ isChangeW = true if (i &gt; 1 &amp;&amp; points[i - 1].isControl) continue } //è®¡ç®—çº¿å®½ let w = ((lastW - minLineW) / changeWidthCount) * (points.length - i) + minLineW points[i - 1].lineWidth = w this.ctx.beginPath() //ä¸ºäº†å¼€å¯æ–°çš„è·¯å¾„ å¦åˆ™æ¯æ¬¡stroke éƒ½ä¼šæŠŠä¹‹å‰çš„è·¯å¾„åœ¨æä¸€é // this.ctx.strokeStyle = &quot;rgba(&quot; + Math.random() * 255 + &quot;,&quot; + Math.random() * 255 + &quot;,&quot; + Math.random() * 255 + &quot;,0.5)&quot;; this.ctx.lineWidth = w this.ctx.moveTo(points[i - 1].x, points[i - 1].y) //ç§»åŠ¨åˆ°ä¹‹å‰çš„ç‚¹ this.ctx.lineTo(points[i].x, points[i].y) this.ctx.stroke() //å°†ä¹‹å‰çš„çº¿æ¡ä¸å˜çš„pathç»˜åˆ¶å®Œ } else { if (points[i].isControl &amp;&amp; points[i + 1]) { this.ctx.quadraticCurveTo( points[i].x, points[i].y, points[i + 1].x, points[i + 1].y ) } else if (i &gt;= 1 &amp;&amp; points[i - 1].isControl) { //ä¸Šä¸€ä¸ªæ˜¯æ§åˆ¶ç‚¹ å½“å‰ç‚¹å·²ç»è¢«ç»˜åˆ¶ } else this.ctx.lineTo(points[i].x, points[i].y) } } } addPoint(p) { if (this.line.points.length &gt;= 1) { let last_point = this.line.points[this.line.points.length - 1] let distance = this.z_distance(p, last_point) if (distance &lt; 10) { return } } if (this.line.points.length == 0) { this.begin = p p.isControl = true this.pushPoint(p) } else { this.middle = p let controlPs = this.computeControlPoints( this.k, this.begin, this.middle, null ) this.pushPoint(controlPs.first) this.pushPoint(p) p.isControl = true this.begin = this.middle } } addOtherPoint(p1, p2, w1, w2) { let otherPoints = new Array() let dis = this.z_distance(p1, p2) if (dis &gt;= 25) { otherPoints.push(p1) let insertPCount = Math.floor(dis / 20) for (let j = 0; j &lt; insertPCount; j++) { let insertP = new Point( p1.x + ((j + 1) / (insertPCount + 1)) * (p2.x - p1.x), p1.y + ((j + 1) / (insertPCount + 1)) * (p2.y - p1.y) ) insertP.isAdd = true otherPoints.push(insertP) } otherPoints.push(p2) } let count = otherPoints.length if (count &gt; 0) { console.log(&quot;addOtherPoint&quot;) debugger let diffW = (w2 - w1) / (count - 1) for (let i = 1; i &lt; count; i++) { let w = w1 + diffW * i this.ctx.beginPath() this.ctx.lineWidth = w this.ctx.moveTo(otherPoints[i - 1].x, otherPoints[i - 1].y) this.ctx.lineTo(otherPoints[i].x, otherPoints[i].y) this.ctx.stroke() } } return otherPoints } pushPoint(p) { //æ’é™¤é‡å¤ç‚¹ if ( this.line.points.length &gt;= 1 &amp;&amp; this.line.points[this.line.points.length - 1].x == p.x &amp;&amp; this.line.points[this.line.points.length - 1].y == p.y ) return this.line.points.push(p) } computeControlPoints(k, begin, middle, end) { if (k &gt; 0.5 || k &lt;= 0) return let diff1 = new Point(middle.x - begin.x, middle.y - begin.y) let diff2 = null if (end) diff2 = new Point(end.x - middle.x, end.y - middle.y) // let l1 = (diff1.x ** 2 + diff1.y ** 2) ** (1 / 2) // let l2 = (diff2.x ** 2 + diff2.y ** 2) ** (1 / 2) let first = new Point(middle.x - k * diff1.x, middle.y - k * diff1.y) let second = null if (diff2) second = new Point(middle.x + k * diff2.x, middle.y + k * diff2.y) return { first: first, second: second } } // W_current = // W_previous + min( abs(k*s - W_previous), distance * K_width_unit_change) (k * s-W_previous) &gt;= 0 // W_previous - min( abs(k*s - W_previous), distance * K_width_unit_change) (k * s-W_previous) &lt; 0 // W_current å½“å‰çº¿æ®µçš„å®½åº¦ // W_previous ä¸å½“å‰çº¿æ¡ç›¸é‚»çš„å‰ä¸€æ¡çº¿æ®µçš„å®½åº¦ // distance å½“å‰çº¿æ¡çš„é•¿åº¦ // w_k è®¾å®šçš„ä¸€ä¸ªå›ºå®šé˜ˆå€¼,è¡¨ç¤º:å•ä½è·ç¦»å†…, ç¬”è¿¹çš„çº¿æ¡å®½åº¦å¯ä»¥å˜åŒ–çš„æœ€å¤§é‡. // distance * w_k å³ä¸ºå½“å‰çº¿æ®µçš„é•¿åº¦å†…, ç¬”å®½å¯ä»¥ç›¸å¯¹äºå‰ä¸€æ¡çº¿æ®µç¬”å®½çš„åŸºç¡€ä¸Š, æœ€å¤šèƒ½å¤Ÿå˜å®½æˆ–è€…å¯ä»¥å˜çª„å¤šå°‘. z_linewidth(b, e, bwidth, step) { if (e.time == b.time) return bwidth let max_speed = 2.0 let d = this.z_distance(b, e) let s = d / (e.time - b.time) //è®¡ç®—é€Ÿåº¦ console.log(&quot;s&quot;, e.time - b.time, s) s = s &gt; max_speed ? max_speed : s // let w = (max_speed - s) / max_speed; let w = 0.5 / s let max_dif = d * step console.log(w, bwidth, max_dif) if (w &lt; 0.05) w = 0.05 if (Math.abs(w - bwidth) &gt; max_dif) { if (w &gt; bwidth) w = bwidth + max_dif else w = bwidth - max_dif } // printf(&quot;d:%.4f, time_diff:%lld, speed:%.4f, width:%.4f\\n&quot;, d, e.t-b.t, s, w); return w } z_distance(b, e) { return Math.sqrt(Math.pow(e.x - b.x, 2) + Math.pow(e.y - b.y, 2)) } BezierCalculate(poss, precision) { //ç»´åº¦ï¼Œåæ ‡è½´æ•°ï¼ˆäºŒç»´åæ ‡ï¼Œä¸‰ç»´åæ ‡...ï¼‰ let dimersion = 2 //è´å¡å°”æ›²çº¿æ§åˆ¶ç‚¹æ•°ï¼ˆé˜¶æ•°ï¼‰ let number = poss.length //æ§åˆ¶ç‚¹æ•°ä¸å°äº 2 ï¼Œè‡³å°‘ä¸ºäºŒç»´åæ ‡ç³» if (number &lt; 2 || dimersion &lt; 2) return null let result = new Array() //è®¡ç®—æ¨è¾‰ä¸‰è§’ let mi = new Array() mi[0] = mi[1] = 1 for (let i = 3; i &lt;= number; i++) { let t = new Array() for (let j = 0; j &lt; i - 1; j++) { t[j] = mi[j] } mi[0] = mi[i - 1] = 1 for (let j = 0; j &lt; i - 2; j++) { mi[j + 1] = t[j] + t[j + 1] } } //è®¡ç®—åæ ‡ç‚¹ for (let i = 0; i &lt; precision; i++) { let t = i / precision let p = new Point(0, 0) p.isAdd = true result.push(p) for (let j = 0; j &lt; dimersion; j++) { let temp = 0.0 for (let k = 0; k &lt; number; k++) { temp += Math.pow(1 - t, number - k - 1) * (j == 0 ? poss[k].x : poss[k].y) * Math.pow(t, k) * mi[k] } j == 0 ? (p.x = temp) : (p.y = temp) } } return result } } //ä»¥ä¸‹ä»£ç ä¸ºé¼ æ ‡ç§»åŠ¨äº‹ä»¶éƒ¨åˆ† let handwriting = new HandwritingSelf(document.getElementById(&quot;canvasId&quot;)) // document.ontouchstart = document.onmousedown document.onpointerdown = function (e) { if (e.type == &quot;touchstart&quot;) handwriting.down(e.touches[0].pageX, e.touches[0].pageY) else handwriting.down(e.x, e.y) } // document.ontouchmove = document.onmousemove document.onpointermove = function (e) { if (e.type == &quot;touchmove&quot;) handwriting.move(e.touches[0].pageX, e.touches[0].pageY) else handwriting.move(e.x, e.y) } // document.ontouchend = document.onmouseup document.onpointerup = function (e) { if (e.type == &quot;touchend&quot;) handwriting.up(e.touches[0].pageX, e.touches[0].pageY) else handwriting.up(e.x, e.y) } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ä»£ç é›¨&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;title&gt;Code&lt;/title&gt; &lt;style&gt; body { margin: 0; overflow: hidden; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;canvas id=&quot;myCanvas&quot;&gt;&lt;/canvas&gt; &lt;script&gt; const width = (document.getElementById(&quot;myCanvas&quot;).width = 1920) //screen.availWidth; const height = (document.getElementById(&quot;myCanvas&quot;).height = 1080) //screen.availHeight; const ctx = document.getElementById(&quot;myCanvas&quot;).getContext(&quot;2d&quot;) const arr = Array(Math.ceil(width / 10)).fill(0) const str = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;.split(&quot;&quot;) function rain() { ctx.fillStyle = &quot;rgba(0,0,0,0.05)&quot; ctx.fillRect(0, 0, width, height) ctx.fillStyle = &quot;#0f0&quot; arr.forEach(function (value, index) { ctx.fillText( str[Math.floor(Math.random() * str.length)], index * 10, value + 10 ) arr[index] = value &gt;= height || value &gt; 8888 * Math.random() ? 0 : value + 10 }) } setInterval(rain, 30) &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; qqä¼é¹…&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; html, body, div, strong { margin: 0; padding: 0; } body { overflow: hidden; } .wrap { width: 600px; margin: 50px auto 0; position: relative; } /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ä¼é¹…å¤´éƒ¨â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ /* ä¸ŠåŠéƒ¨åˆ†é»‘è‰²å¤´éƒ¨ */ .headtop { width: 240px; height: 110px; background: #000; margin: 0 auto; border-top-left-radius: 120px 110px; border-top-right-radius: 120px 110px; position: relative; z-index: 999; } /* ä¸‹åŠéƒ¨åˆ†é»‘è‰²å¤´éƒ¨ */ .headbottom { width: 240px; height: 90px; background: #000; border-bottom-left-radius: 120px 90px; border-bottom-right-radius: 120px 90px; position: absolute; top: 110px; z-index: 1; } h1 { position: absolute; } /* å·¦çœ¼éƒ¨åˆ† */ .lefteye { width: 46px; height: 70px; background: #fff; border-radius: 50% 50%; position: absolute; top: 30px; left: 64px; z-index: 2; } .lefteye_in { width: 20px; height: 30px; background: #000; border-radius: 50% 50%; margin-left: 23px; margin-top: 20px; } .eyeshow { display: block; width: 8px; height: 10px; border-radius: 50% 50%; background: #fff; position: absolute; top: 26px; left: 32px; } /*å³çœ¼éƒ¨åˆ† */ .righteye { width: 46px; height: 70px; background: #fff; border-radius: 50% 50%; position: absolute; top: 30px; left: 130px; z-index: 2; } .righteye_in { width: 19px; height: 23px; background: #000; border-top-left-radius: 17px 30px; border-top-right-radius: 17px 30px; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; border: 1px solid #000; margin-left: 7px; margin-top: 16px; } .eyebai { display: block; width: 12px; height: 19px; border-top-left-radius: 5px 14px; border-top-right-radius: 8px 14px; background: #fff; margin-top: 10px; margin-left: 4px; } /*å³çœ¼éƒ¨åˆ† */ /*å˜´å·´*/ .mouth { width: 158px; height: 56px; background: #ffa600; border-radius: 50%; position: absolute; top: 106px; left: 42px; z-index: 2; } .mouth_bar { width: 126px; height: 30px; background: #000; position: absolute; top: 142px; left: 55px; z-index: 2; border-bottom-left-radius: 76px 96px; border-bottom-right-radius: 76px 96px; } .mouth_bar1 { width: 126px; height: 20px; background: #ffa600; position: absolute; z-index: 3; border-bottom-left-radius: 104px 32px; border-bottom-right-radius: 104px 32px; } /*å˜´å·´*/ /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦end ä¼é¹…å¤´éƒ¨â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦star ä¼é¹…èº«ä½“â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ /* ä¼é¹…èº«ä½“é»‘è‰²éƒ¨åˆ† */ .body { width: 276px; height: 260px; background: #000; position: absolute; top: 142px; left: 167px; border-top-left-radius: 160px 140px; border-bottom-left-radius: 160px 140px; border-top-right-radius: 160px 140px; border-bottom-right-radius: 160px 140px; z-index: 2; } /* ä¼é¹…èº«ä½“é»‘è‰²éƒ¨åˆ† */ /* çº¢è‰²å›´è„– */ .body_1 { width: 264px; height: 137px; background: #ff0000; border: 5px solid #000; border-top-left-radius: 195px 100px; border-bottom-left-radius: 237px 146px; border-top-right-radius: 195px 100px; border-bottom-right-radius: 269px 146px; position: absolute; bottom: 159px; left: 0px; } .body_2 { width: 249px; height: 139px; position: absolute; background: #000; top: -33px; left: 7px; border-radius: 50%; border: 1px #000 solid; } .body_3 { width: 241px; height: 145px; position: absolute; background: red; top: 0px; left: 5px; border-radius: 50%; } /* çº¢è‰²å›´è„– */ /* ç™½è‰²ä¼é¹…è‚šå­ */ .tummy { width: 240px; height: 240px; background: #fff; position: absolute; top: 11px; left: 17px; border-radius: 50%; } /* ç™½è‰²ä¼é¹…è‚šå­ */ /* ä¼é¹…å£è¢‹ */ .pocket { width: 58px; height: 78px; position: absolute; top: 72px; left: 19px; border: 3px solid #000; background: red; border-top-left-radius: 20px 52px; border-bottom-left-radius: 40px 40px; border-top-right-radius: 0px 0px; border-bottom-right-radius: 21px 21px; } .pocket .pocket_line1 { width: 11px; height: 43px; border-bottom-left-radius: 29px 57px; border-top-left-radius: 0px 0px; border: 9px solid #000; border-top: none; border-right: none; position: absolute; top: 0px; left: 30px; -webkit-transform: rotateZ(10deg); -moz-transform: rotateZ(10deg); -ms-transform: rotateZ(10deg); -o-transform: rotateZ(10deg); transform: rotateZ(10deg); } .pocket .pocket_line2 { width: 2px; height: 45px; border-bottom-left-radius: 11px 24px; border-top-left-radius: 10px 15px; border: 9px solid red; border-top: none; border-right: none; position: absolute; top: 0px; left: 2px; } /* ä¼é¹…å·¦å³æ‰‹ */ .lefthand, .righthand { width: 49px; height: 160px; background: #000; position: absolute; } .lefthand { top: 20px; left: -29px; border-top-left-radius: 89px 166px; border-top-right-radius: 6px 63px; border-bottom-left-radius: 85px 194px; border-bottom-right-radius: 40px 128px; -webkit-transform: rotateZ(20deg); -moz-transform: rotateZ(20deg); -ms-transform: rotateZ(20deg); -o-transform: rotateZ(20deg); transform: rotateZ(20deg); -webkit-animation: left_rotate 0.5s infinite; -moz-animation: left_rotate 0.5s infinite; -ms-animation: left_rotate 0.5s infinite; -o-animation: left_rotate 0.5s infinite; animation: left_rotate 0.5s infinite; -webkit-animation-direction: alternate; -moz-animation-direction: alternate; -ms-animation-direction: alternate; -o-animation-direction: alternate; animation-direction: alternate; } .righthand { top: 20px; left: 258px; border-top-right-radius: 89px 166px; border-bottom-right-radius: 85px 194px; border-top-left-radius: 6px 63px; border-bottom-left-radius: 40px 128px; -webkit-transform: rotateZ(-20deg); -moz-transform: rotateZ(-20deg); -ms-transform: rotateZ(-20deg); -o-transform: rotateZ(-20deg); transform: rotateZ(-20deg); -webkit-animation: right_rotate 0.5s infinite; -moz-animation: right_rotate 0.5s infinite; -ms-animation: right_rotate 0.5s infinite; -o-animation: right_rotate 0.5s infinite; animation: right_rotate 0.5s infinite; -webkit-animation-direction: alternate; -moz-animation-direction: alternate; -ms-animation-direction: alternate; -o-animation-direction: alternate; animation-direction: alternate; } /* ä¼é¹…å·¦å³æ‰‹ */ /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦end ä¼é¹…èº«ä½“â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦star ä¼é¹…è„šéƒ¨â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ .footer .left_footer, .footer .right_footer { width: 134px; height: 74px; position: absolute; background: #ffa600; border: 3px solid #000; border-radius: 50%; z-index: 1; } .footer .left_footer { top: 347px; left: 163px; } .footer .right_footer { top: 347px; left: 320px; } /* â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦end ä¼é¹…è„šéƒ¨â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ */ @keyframes left_rotate { from { -webkit-transform-origin: right 30%; -webkit-transform: rotateZ(60deg); } to { -webkit-transform-origin: right 30%; -webkit-transform: rotateZ(30deg); } } @keyframes right_rotate { from { -webkit-transform-origin: left 30%; -webkit-transform: rotateZ(-60deg); } to { -webkit-transform-origin: left 30%; -webkit-transform: rotateZ(-30deg); } } @-webkit-keyframes left_rotate { from { -webkit-transform-origin: right 30%; -webkit-transform: rotateZ(60deg); } to { -webkit-transform-origin: right 30%; -webkit-transform: rotateZ(30deg); } } @-webkit-keyframes right_rotate { from { -webkit-transform-origin: left 30%; -webkit-transform: rotateZ(-60deg); } to { -webkit-transform-origin: left 30%; -webkit-transform: rotateZ(-30deg); } } @-moz-keyframes left_rotate { from { transform-origin: right 30%; transform: rotateZ(60deg); } to { transform-origin: right 30%; transform: rotateZ(30deg); } } @-moz-keyframes right_rotate { from { transform-origin: left 30%; transform: rotateZ(-60deg); } to { transform-origin: left 30%; transform: rotateZ(-30deg); } } @-ms-keyframes left_rotate { from { transform-origin: right 30%; transform: rotateZ(60deg); } to { transform-origin: right 30%; transform: rotateZ(30deg); } } @-ms-keyframes right_rotate { from { transform-origin: left 30%; transform: rotateZ(-60deg); } to { transform-origin: left 30%; transform: rotateZ(-30deg); } } @-o-keyframes left_rotate { from { transform-origin: right 30%; transform: rotateZ(60deg); } to { transform-origin: right 30%; transform: rotateZ(30deg); } } @-o-keyframes right_rotate { from { transform-origin: left 30%; transform: rotateZ(-60deg); } to { transform-origin: left 30%; transform: rotateZ(-30deg); } } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;wrap&quot;&gt; &lt;!-- ä¼é¹…å¤´éƒ¨ --&gt; &lt;div class=&quot;headtop&quot;&gt; &lt;div class=&quot;headbottom&quot;&gt;&lt;/div&gt; &lt;!-- çœ¼ç›éƒ¨åˆ† --&gt; &lt;h1 class=&quot;lefteye&quot;&gt; &lt;p class=&quot;lefteye_in&quot;&gt; &lt;strong class=&quot;eyeshow&quot;&gt;&lt;/strong&gt; &lt;/p&gt; &lt;/h1&gt; &lt;h1 class=&quot;righteye&quot;&gt; &lt;p class=&quot;righteye_in&quot;&gt; &lt;strong class=&quot;eyebai&quot;&gt;&lt;/strong&gt; &lt;/p&gt; &lt;/h1&gt; &lt;!-- å˜´å·´éƒ¨åˆ† --&gt; &lt;h1 class=&quot;mouth&quot;&gt;&lt;/h1&gt; &lt;p class=&quot;mouth_bar&quot;&gt; &lt;strong class=&quot;mouth_bar1&quot;&gt;&lt;/strong&gt; &lt;/p&gt; &lt;/div&gt; &lt;!-- ä¼é¹…å¤´éƒ¨ --&gt; &lt;!-- ä¼é¹…èº«ä½“ --&gt; &lt;div class=&quot;body&quot;&gt; &lt;div class=&quot;tummy&quot;&gt; &lt;div class=&quot;pocket&quot;&gt; &lt;div class=&quot;pocket_line1&quot;&gt; &lt;div class=&quot;pocket_line2&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;hand&quot;&gt; &lt;div class=&quot;lefthand&quot;&gt;&lt;/div&gt; &lt;div class=&quot;righthand&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;body_1&quot;&gt; &lt;div class=&quot;body_2&quot;&gt; &lt;div class=&quot;body_3&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- ä¼é¹…èº«ä½“ --&gt; &lt;!-- ä¼é¹…è„šä¸« --&gt; &lt;div class=&quot;footer&quot;&gt; &lt;div class=&quot;left_footer&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right_footer&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;!-- ä¼é¹…è„šä¸« --&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}],"tags":[{"name":"web","slug":"web","permalink":"/tags/web/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}]},{"title":"Nodejs","slug":"nodejs","date":"2021-08-12T10:45:51.947Z","updated":"2021-08-13T01:23:02.628Z","comments":true,"path":"2021/08/12/nodejs/","link":"","permalink":"/2021/08/12/nodejs/","excerpt":"","text":"01-Node.jsåŸºç¡€ä¸€ã€Node.jsæ˜¯ä»€ä¹ˆNode.js is a JavaScript runtime built on Chromeâ€™s V8 JavaScript engine. 1ã€ ç‰¹æ€§Node.jså¯ä»¥è§£æJSä»£ç ï¼ˆæ²¡æœ‰æµè§ˆå™¨å®‰å…¨çº§åˆ«çš„é™åˆ¶ï¼‰æä¾›å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„APIï¼Œå¦‚ï¼š æ–‡ä»¶çš„è¯»å†™ï¼ˆFile Systemï¼‰ è¿›ç¨‹çš„ç®¡ç†ï¼ˆProcessï¼‰ ç½‘ç»œé€šä¿¡ï¼ˆHTTP/HTTPSï¼‰ 2ã€ä¸¾ä¾‹2.1 æµè§ˆå™¨å®‰å…¨çº§åˆ«çš„é™åˆ¶Ajaxé™åˆ¶&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;browser-safe-sandbox&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;browser-safe-sandbox&lt;/div&gt; &lt;script&gt; const xhr = new XMLHttpRequest() xhr.open(&#39;get&#39;, &#39;https://m.maoyan.com/ajax/moreClassicList?sortId=1&amp;showType=3&amp;limit=10&amp;offset=30&amp;optimus_uuid=A5518FF0AFEC11EAAB158D7AB0D05BBBD74C9789D9F649898982E6542C7DD479&amp;optimus_risk_level=71&amp;optimus_code=10&#39;, false) xhr.send() &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; æµè§ˆå™¨é¢„è§ˆbrowser-sync start --server --files **/* --directory 2.2 æ–‡ä»¶çš„è¯»å†™ï¼ˆFile Systemï¼‰const fs = require(&#39;fs&#39;) fs.readFile(&#39;./ajax.png&#39;, &#39;utf-8&#39;, (err, content) =&gt; { console.log(content) }) 2.3 è¿›ç¨‹çš„ç®¡ç†ï¼ˆProcessï¼‰function main(argv) { console.log(argv) } main(process.argv.slice(2)) è¿è¡Œ node 2.3-process.js argv1 argv2 2.4 ç½‘ç»œé€šä¿¡ï¼ˆHTTP/HTTPSï¼‰const http = require(&quot;http&quot;) http.createServer((req,res) =&gt; { res.writeHead(200, { &quot;content-type&quot;: &quot;text/plain&quot; }) res.write(&quot;hello nodejs&quot;) res.end() }).listen(3000) äºŒã€Nodeç›¸å…³å·¥å…·1ã€NVMï¼šNode Version Manager1.1 Macå®‰è£…nvmhttps://github.com/nvm-sh/nvm/blob/master/README.md 1.2 Windowså®‰è£…nvmnvm-windows nodist 1.3 å¸¸ç”¨çš„nvmå‘½ä»¤ nvm listï¼šæŸ¥çœ‹å½“å‰ç¯å¢ƒå®‰è£…äº†å“ªäº›ç‰ˆæœ¬ nvm use 14.15.0ï¼šåˆ‡æ¢nodeç‰ˆæœ¬ nvm alias default (v)14.15.0ï¼šåˆ‡æ¢nodeé»˜è®¤ç‰ˆæœ¬ 2ã€NPMï¼šNode Package Manager npm view jquery versionsï¼šæŸ¥çœ‹åŒ…çš„æ‰€æœ‰ç‰ˆæœ¬ 2.1 å…¨å±€å®‰è£…package$ npm install forever --global (-g) $ forever $ npm uninstall forever --global $ forever å…¨å±€å®‰è£…åŒ…çš„ç›®å½• Mac /Users/felix/.nvm/versions/node/nvmå„ä¸ªç‰ˆæœ¬/bin/ Windows C:\\Users\\ä½ çš„ç”¨æˆ·å\\AppData\\Roaming\\npm\\node_modules 2.2 æœ¬åœ°å®‰è£…package$ cd ~/desktop $ mkdir gp-project $ cd gp-project $ npm install underscore $ npm list (ls) 2.3 package.jsonåˆå§‹åŒ–$ pwd $ npm init -y $ ls $ cat package.json 2.4 ä½¿ç”¨package.json npm install â€”productionï¼šåªæ‹‰å–ç”Ÿäº§ç¯å¢ƒçš„åŒ… $ npm install underscore --save $ cat package.json $ npm install lodash --save-dev $ cat package.json $ rm -rf node_modules $ ls $ npm install $ npm uninstall underscore --save $ npm list | grep underscore // æŸ¥çœ‹underscoreåŒ…çš„æ ‘(ä¾èµ–å…³ç³») $ cat package.json â€œdependenciesâ€ï¼šè¿™äº›åŒ…æ˜¯ä½ çš„åº”ç”¨ç¨‹åºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰€éœ€è¦çš„ã€‚ â€œdevDepedenciesâ€ï¼šè¿™äº›åŒ…åªæ˜¯åœ¨å¼€å‘å’Œæµ‹è¯•ä¸­éœ€è¦çš„ã€‚ // package.json { ... &quot;dependencies&quot;: { // --save / -S }, &quot;devDependencies&quot;: { // --save-dev / -D } } 2.5 å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ… npm install jquery@2.2.4ï¼š å®‰è£…æŒ‡å®šç‰ˆæœ¬ npm install jquery@1 -Sï¼šå®‰è£…1æœ€é«˜çš„ç‰ˆæœ¬ $ pwd $ npm list $ npm info underscore $ npm view underscore versions $ npm install underscore@1.8.0 $ npm list $ npm uninstall underscore $ npm list 2.6 æ›´æ–°æœ¬åœ°å®‰è£…çš„åŒ… -13.4.6 major: 13ï¼ˆä¸»ç‰ˆæœ¬å·ï¼‰,minor: 4ï¼ˆæ¬¡ç‰ˆæœ¬å·ï¼‰ï¼Œpatchï¼š6ï¼ˆè¡¥ä¸ï¼Œå•æ•°ä¸ç¨³å®šï¼ŒåŒæ•°ç¨³å®šï¼‰ npm outdatedï¼šæŸ¥çœ‹å“ªäº›åŒ…è¿‡æœŸ npm updateï¼šæ›´æ–°æ‰€æœ‰çš„åŒ… $ npm info underscore $ npm view underscore versions // æŸ¥çœ‹underscoreåŒ…æ‰€æœ‰çš„ç‰ˆæœ¬ $ npm install underscore@1.4.4 --save-dev // å®‰è£…1.4.4çš„underscoreåˆ°å¼€å‘ç¯å¢ƒ $ npm list | grep gulp // æŸ¥çœ‹gulpåŒ…çš„ä¾èµ–å…³ç³» $ npm outdated //~2.0.0è¡¨ç¤ºpatch, ^2.0.0è¡¨ç¤ºminor * è¡¨ç¤ºxxæœ€æ–°ç‰ˆæœ¬ $ npm list | grep gulp $ npm update { &quot;dependencies&quot;: { &quot;jquery&quot;: &quot;^1.12.4&quot;, // ^é”å®šä¸»ç‰ˆæœ¬å· &quot;jquery&quot;: &quot;~1.12.4&quot;, // ~é”å®šä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å· jquery: &quot;1.12.4&quot;, // å…¨éƒ¨é”å®š jquery: &quot;*&quot; // æœ€æ–°ç‰ˆæœ¬ } } 2.7 æ¸…é™¤ç¼“å­˜ npm cache clean --force 2.8 ä¸Šä¼ è‡ªå·±çš„åŒ…2.8.1 ç¼–å†™æ¨¡å—ä¿å­˜ä¸ºindex.js exports.sayHello = function(){ return &#39;Hello World&#39;; } 2.8.2 åˆå§‹åŒ–æè¿°æ–‡ä»¶ npm init package.json { &quot;name&quot;: &quot;gp19-npm&quot;, &quot;version&quot;: &quot;1.0.1&quot;, &quot;description&quot;: &quot;gp19 self module&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: { &quot;test&quot;: &quot;make test&quot; }, &quot;repository&quot;: { &quot;type&quot;: &quot;Git&quot;, &quot;url&quot;: &quot;git+https://github.com/lurongtao/gp19-npm.git&quot; }, &quot;keywords&quot;: [ &quot;demo&quot; ], &quot;author&quot;: &quot;Felixlu&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;bugs&quot;: { &quot;url&quot;: &quot;https://github.com/lurongtao/gp19-npm/issues&quot; }, &quot;homepage&quot;: &quot;https://github.com/lurongtao/gp19-npm#readme&quot;, } 2.8.3 æ³¨å†Œnpmä»“åº“è´¦å· npm adduser https://www.npmjs.com ä¸Šé¢çš„è´¦å· felix_lurt/qqmko09ijn $ npm adduser 2.8.4 ä¸Šä¼ åŒ… npm publish å‘ï¼š403 Forbidden æŸ¥çœ‹npmæºï¼šnpm config get registry åˆ‡æ¢npmæºæ–¹æ³•ä¸€ï¼šnpm config set registry http://registry.npmjs.org åˆ‡æ¢npmæºæ–¹æ³•äºŒï¼šnrm use npm 2.8.5 å®‰è£…åŒ… npm install gp19-npm 2.8.6 å¸è½½åŒ…æŸ¥çœ‹å½“å‰é¡¹ç›®å¼•ç”¨äº†å“ªäº›åŒ… ï¼š npm ls å¸è½½åŒ…ï¼š npm unpublish --force 2.8.7 ä½¿ç”¨å¼•å…¥åŒ…var hello = require(&#39;gp19-npm&#39;) hello.sayHello() 2.9 npmè„šæœ¬Nodeå¼€å‘ç¦»ä¸å¼€npmï¼Œè€Œè„šæœ¬åŠŸèƒ½æ˜¯npmæœ€å¼ºå¤§ã€æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚ 2.9.1 ä»€ä¹ˆæ˜¯npmè„šæœ¬ï¼Ÿnpmå…è®¸åœ¨package.jsonæ–‡ä»¶é‡Œé¢ï¼Œä½¿ç”¨scriptså­—æ®µå®šä¹‰è„šæœ¬å‘½ä»¤ã€‚ { // ... &quot;scripts&quot;: { &quot;builds&quot;: &quot;node build.js&quot; } } 2.9.2 æ‰§è¡Œé¡ºåºå¦‚æœnpmè„šæœ¬é‡Œé¢éœ€è¦æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚ scripts1.js var x = 0 console.log(x) scripts2.js var y = 0 console.log(y) &quot;scripts&quot; : { &quot;script1&quot;: &quot;node script1.js&quot;, &quot;script2&quot;: &quot;ndoe script2.js&quot; } å¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;ç¬¦å·ã€‚ $ npm run script1 &amp; npm run script2 å¦‚æœæ˜¯ç»§å‘æ‰§è¡Œï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;&amp;ç¬¦å·ã€‚ $ npm run script1 &amp;&amp; npm run script2 2.9.3 ç®€å†™å½¢å¼å¸¸ç”¨çš„npmè„šæœ¬ç®€å†™å½¢å¼ npm start æ˜¯ npm run start 2.9.4 å˜é‡npmè„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨npmçš„å†…éƒ¨å˜é‡ã€‚ é¦–å…ˆï¼Œé€šè¿‡npm _package_å‰ç¼€ï¼Œnpmè„šæœ¬å¯ä»¥æ‹¿åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªpackage.jsonã€‚ æ³¨æ„ï¼šä¸€å®šè¦åœ¨npmè„šæœ¬ä¸­è¿è¡Œï¼ˆå¦‚ï¼šnpm run viewï¼‰æ‰å¯ä»¥ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡ŒJSï¼ˆå¦‚ï¼šnode view.jsï¼‰æ˜¯æ‹¿ä¸åˆ°çš„ { &quot;name&quot;: &quot;foo&quot;, &quot;version&quot;: &quot;1.2.5&quot;, &quot;scripts&quot;: { &quot;view&quot;: &quot;node view.js&quot; } } é‚£ä¹ˆï¼Œå˜é‡npm_package_nameè¿”å›fooï¼Œå˜é‡npm_package_versionè¿”å›1.2.5ã€‚ // view.js console.log(process.env.npm_package_name); // foo console.log(process.env.npm_package_version); // 1.2.5 ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¯å¢ƒå˜é‡process.envå¯¹è±¡ï¼Œæ‹¿åˆ°package.jsonçš„å­—æ®µå€¼ã€‚å¦‚æœæ˜¯Bashè„šæœ¬ï¼Œå¯ä»¥ç”¨$npm_package_nameå’Œ $npm_package_versionå–åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚ npmpackageå‰ç¼€ä¹Ÿæ”¯æŒåµŒå¥—çš„package.jsonå­—æ®µã€‚ &quot;repository&quot;: { &quot;type&quot;: &#39;git&#39;, &quot;url&quot;: &quot;xxx&quot; }, &quot;scripts&quot;: { &quot;view&quot;: &quot;echo $npm_package_repository_type&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œrepositoryå­—æ®µçš„typeå±æ€§ï¼Œå¯ä»¥é€šè¿‡npm_package_repository_typeå–åˆ°ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ &quot;scripts&quot;: { &quot;install&quot;: &quot;foo.js&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_scripts_installå˜é‡çš„å€¼ç­‰äºfoo.jsã€‚ ç„¶åï¼Œnpmè„šæœ¬è¿˜å¯ä»¥é€šè¿‡npmconfigå‰ç¼€ï¼Œæ‹¿åˆ°npmçš„é…ç½®å˜é‡ï¼Œå³npm config get xxxå‘½ä»¤è¿”å›çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“å‰æ¨¡å—çš„å‘å‹æ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡npm_config_tagå–åˆ°ã€‚ &quot;view&quot;: &quot;echo $npm_config_tag&quot;, æ³¨æ„ï¼Œpackage.jsoné‡Œé¢çš„configå¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚ { &quot;name&quot;: &quot;foo&quot;, &quot;config&quot;: {&quot;port&quot;: &quot;8080&quot;}, &quot;scripts&quot;: {&quot;start&quot;: &quot;node server.js&quot;} } ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_config_portå˜é‡è¿”å›çš„æ˜¯8080ã€‚è¿™ä¸ªå€¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•è¦†ç›–ã€‚ $ npm config set foo:port 80 æœ€åï¼Œenvå‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚ â€œenvâ€:â€envâ€ 2.10 npmå®‰è£…gitä¸Šå‘å¸ƒçš„åŒ…# è¿™æ ·é€‚åˆå®‰è£…å…¬å¸å†…éƒ¨çš„gitæœåŠ¡å™¨ä¸Šçš„é¡¹ç›® npm install git+https://git@github.com:lurongtao/gp-project.git # æˆ–è€…ä»¥sshçš„æ–¹å¼ npm install git+ssh://git@github.com:lurongtao/gp-project.git 2.11 cross-envä½¿ç”¨2.11.1 cross-envæ˜¯ä»€ä¹ˆè¿è¡Œè·¨å¹³å°è®¾ç½®å’Œä½¿ç”¨ç¯å¢ƒå˜é‡çš„è„šæœ¬ 2.11.2 å‡ºç°åŸå› å½“æ‚¨ä½¿ç”¨NODE_ENV=productionï¼Œæ¥è®¾ç½®ç¯å¢ƒå˜é‡æ—¶ï¼Œå¤§å¤šæ•°Windowså‘½ä»¤æç¤ºå°†ä¼šé˜»å¡ï¼ˆæŠ¥é”™ï¼‰ã€‚ï¼ˆå¼‚å¸¸æ˜¯Windowsä¸Šçš„Bashï¼Œå®ƒä½¿ç”¨æœ¬æœºBashã€‚ï¼‰æ¢è¨€ä¹‹ï¼ŒWindowsä¸æ”¯æŒNOE_ENV=productionçš„è®¾ç½®æ–¹å¼ã€‚ 2.11.3 è§£å†³cross-envä½¿å¾—æ‚¨å¯ä»¥ä½¿ç”¨å•ä¸ªå‘½ä»¤ï¼Œè€Œä¸å¿…æ‹…å¿ƒä¸ºå¹³å°æ­£ç¡®è®¾ç½®æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚è¿™ä¸ªè¿·ä½ çš„åŒ…ï¼ˆcross-envï¼‰èƒ½å¤Ÿæä¾›ä¸€ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡çš„scriptsï¼Œè®©ä½ èƒ½å¤Ÿä»¥Unixæ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨Windowsä¸Šä¹Ÿèƒ½å…¼å®¹è¿è¡Œã€‚ 2.11.4 å®‰è£…npm install --save-dev cross-env 2.11.5 ä½¿ç”¨{ &quot;scripts&quot;: { &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config build/webpack.config.js&quot; } } NODE_ENVç¯å¢ƒå˜é‡å°†ç”±cross-envè®¾ç½®ï¼Œæ‰“å°process.env.NODE_ENV === &#39;production&#39; 3ã€NRMï¼šnpm registry manager3.1 æ‰‹å·¥åˆ‡æ¢æº3.1.1 æŸ¥çœ‹å½“å‰æºnpm config get registry 3.1.2 åˆ‡æ¢æ·˜å®æºnpm config set registry https://registry.npm.taobao.org 3.2 NRMç®¡ç†æºNRMæ˜¯npmçš„é•œåƒæºç®¡ç†å·¥å…·ï¼Œæœ‰æ—¶å€™å›½å¤–èµ„æºå¤ªæ…¢ï¼Œä½¿ç”¨è¿™ä¸ªå°±å¯ä»¥å¿«é€Ÿåœ°åœ¨npmæºé—´åˆ‡æ¢ã€‚ 3.2.1 å®‰è£…nrmåœ¨å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤ï¼Œnpm install -g nrmï¼Œå…¨å±€å®‰è£…nrmã€‚ 3.2.2 ä½¿ç”¨nrmæ‰§è¡Œå‘½ä»¤nrm lsæŸ¥çœ‹å¯é€‰çš„æºã€‚å…¶ä¸­ï¼Œå¸¦*çš„æ˜¯å½“å‰ä½¿ç”¨çš„æºï¼Œä¸Šé¢è¾“å‡ºè¡¨æ˜å½“å‰æºæ˜¯å®˜æ–¹æºã€‚ 3.2.3 åˆ‡æ¢nrmå¦‚æœè¦åˆ‡æ¢åˆ°taobaoæºï¼Œæ‰§è¡Œå‘½ä»¤nrm use taobaoã€‚ 3.2.4 æµ‹è¯•é€Ÿåº¦ä½ è¿˜å¯ä»¥é€šè¿‡nrm testæµ‹è¯•ç›¸åº”æºçš„å“åº”æ—¶é—´ã€‚ 4ã€ NPXï¼šnpm package extentionnpmä»5.2ç‰ˆå¼€å§‹ï¼Œå¢åŠ äº†npxå‘½ä»¤ã€‚å®ƒæœ‰å¾ˆå¤šç”¨å¤„ï¼Œæœ¬æ–‡ä»‹ç»è¯¥å‘½ä»¤çš„ä¸»è¦ä½¿ç”¨åœºæ™¯ã€‚ Nodeè‡ªå¸¦npmæ¨¡å—ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨npxå‘½ä»¤ã€‚ä¸‡ä¸€ä¸èƒ½ç”¨ï¼Œå°±è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚ $ npm install -g npx 4.1 è°ƒç”¨é¡¹ç›®å®‰è£…çš„æ¨¡å—npxæƒ³è¦è§£å†³çš„ä¸»è¦é—®é¢˜ï¼Œå°±æ˜¯è°ƒç”¨é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å—ã€‚æ¯”å¦‚ï¼Œé¡¹ç›®å†…éƒ¨å®‰è£…äº†Mochaã€‚ $ npm install -D mocha ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨Mochaï¼Œåªèƒ½åœ¨é¡¹ç›®è„šæœ¬å’Œpackage.jsonçš„scriptså­—æ®µé‡Œé¢ï¼Œå¦‚æœæƒ³åœ¨å‘½ä»¤è¡Œä¸‹è°ƒç”¨ï¼Œå¿…é¡»åƒä¸‹é¢è¿™æ ·ã€‚ # é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ $ node-modules/.bin/mocha --version npxå°±æ˜¯æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®©é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å—ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œåªè¦åƒä¸‹é¢è¿™æ ·è°ƒç”¨å°±è¡Œäº†ã€‚ $ npx mocha --version npxçš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå€’node_modules/.binè·¯å¾„å’Œç¯å¢ƒå˜é‡$PATHé‡Œé¢ï¼Œæ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ã€‚ ç”±äºnpxä¼šæ£€æŸ¥ç¯å¢ƒå˜é‡$PATHï¼Œæ‰€ä»¥ç³»ç»Ÿå‘½ä»¤ä¹Ÿå¯ä»¥è°ƒç”¨ã€‚ # ç­‰åŒäº ls $ npx ls æ³¨æ„ï¼ŒBashå†…ç½®çš„å‘½ä»¤ä¸åœ¨$PATHé‡Œé¢ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ã€‚æ¯”å¦‚cd æ˜¯Bashå‘½ä»¤ï¼Œå› æ­¤å°±ä¸èƒ½ç”¨npx cdã€‚ 4.2 é¿å…å…¨å±€å®‰è£…æ¨¡å—é™¤äº†è°ƒç”¨é¡¹ç›®å†…éƒ¨æ¨¡å—ï¼Œnpxè¿˜èƒ½é¿å…å…¨å±€å®‰è£…çš„æ¨¡å—ã€‚æ¯”å¦‚ï¼Œcreate-react-appè¿™ä¸ªæ¨¡å—æ˜¯å…¨å±€å®‰è£…ï¼Œnpxå¯ä»¥è¿è¡Œå®ƒï¼Œè€Œä¸”ä¸è¿›è¡Œå…¨å±€å®‰è£…ã€‚ $ npx create-react-app my-react-app ä¸Šé¢ä»£ç è¿è¡Œæ—¶ï¼Œnpxå°†create-react-appä¸‹è½½åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä½¿ç”¨ä»¥åå†åˆ é™¤ã€‚æ‰€ä»¥ï¼Œä»¥åå†æ¬¡æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œä¼šé‡æ–°ä¸‹è½½create-react-appã€‚ æ³¨æ„ï¼Œåªè¦npxåé¢çš„æ¨¡å—æ— æ³•åœ¨æœ¬åœ°å‘ç°ï¼Œå°±ä¼šä¸‹è½½åŒåæ¨¡å—ã€‚æ¯”å¦‚ï¼Œæœ¬åœ°æ²¡æœ‰å®‰è£…http-serveræ¨¡å—ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½è¯¥æ¨¡å—ï¼Œåœ¨å½“å‰ç›®å½•å¯åŠ¨ä¸€ä¸ªWebæœåŠ¡ã€‚ $ npx http-server 4.3 â€“noâ€“installå‚æ•°å’Œâ€“ignore-existingå‚æ•°å¦‚æœæƒ³è®©npxå¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨â€“no-installå‚æ•°ã€‚å¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚ $ npx --no-install http-server åè¿‡æ¥ï¼Œå¦‚æœå¿½ç•¥æœ¬åœ°çš„åŒåæ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨â€“ignore-existingå‚æ•°ã€‚æ¯”å¦‚ï¼Œæœ¬åœ°å·²ç»å®‰è£…äº†http-serverï¼Œä½†è¿˜æ˜¯æƒ³ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå°±ç”¨è¿™ä¸ªå‚æ•°ã€‚ $ npx --ignore-existing http-server 5ã€nodeçš„æµè§ˆç«¯è°ƒè¯• node --inspect --inspect-brk server.js 6ã€nodeè¿›ç¨‹ç®¡ç†å·¥å…· supervisor nodemon npm install nodemon nodemon server.js forever pm2 ä¸‰ã€æ¨¡å—/åŒ…ä¸CommonJS1ã€æ¨¡å—/åŒ…åˆ†ç±»Node.jsæœ‰ä¸‰ç±»æ¨¡å—ï¼Œå³å†…ç½®çš„æ¨¡å—ã€ç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€è‡ªå®šä¹‰çš„æ¨¡å—ã€‚ 1.1 å†…ç½®çš„æ¨¡å—Node.jså†…ç½®æ¨¡å—åˆå«æ ¸å¿ƒæ¨¡å—ï¼ŒNode.jså®‰è£…å®Œæˆå¯ç›´æ¥ä½¿ç”¨ã€‚å¦‚ï¼š const path = require(&#39;path&#39;) var extname = path.extname(&#39;index.html&#39;) console.log(extname) 1.2 ç¬¬ä¸‰æ–¹çš„Node.jsæ¨¡å—ç¬¬ä¸‰æ–¹çš„Node.jsæ¨¡å—æŒ‡çš„æ˜¯ä¸ºäº†å®ç°æŸäº›åŠŸèƒ½ï¼Œå‘å¸ƒçš„npmjs.orgä¸Šçš„æ¨¡å—ï¼ŒæŒ‰ç…§ä¸€å®šçš„å¼€æºåè®®ä¾›ç¤¾ç¾¤ä½¿ç”¨ã€‚å¦‚ï¼š npm install chalk const chalk = require(&#39;chalk&#39;) console.log(chalk.blue(&#39;Hello world!&#39;)) 1.3 è‡ªå®šä¹‰çš„Node.jsæ¨¡å—è‡ªå®šä¹‰çš„Node.jsæ¨¡å—ï¼Œä¹Ÿå«æ–‡ä»¶æ¨¡å—ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ä¾›è‡ªå·±ä½¿ç”¨çš„æ¨¡å—ã€‚åŒæ—¶ï¼Œè¿™ç±»æ¨¡å—å‘å¸ƒåˆ°npmjs.orgä¸Šå°±æˆäº†å¼€æºçš„ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚ è‡ªå®šä¹‰æ¨¡å—æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ã€é€Ÿåº¦ç›¸æ¯”æ ¸å¿ƒæ¨¡å—ç¨å¾®æ…¢ä¸€äº›ï¼Œä½†æ˜¯ç”¨çš„éå¸¸å¤šã€‚ 1.3.1 æ¨¡å—å®šä¹‰ã€æ¥å£æš´éœ²å’Œå¼•ç”¨æ¥å£æˆ‘ä»¬å¯ä»¥æŠŠå…¬å…±çš„åŠŸèƒ½æŠ½ç¦»æˆä¸ºä¸€ä¸ªå•ç‹¬çš„jsæ–‡ä»¶ä½œä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé»˜è®¤æƒ…å†µä¸‹é¢è¿™ä¸ªæ¨¡å—é‡Œé¢çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå¤–é¢æ˜¯æ²¡æ³•è®¿é—®çš„ã€‚å¦‚æœè¦è®©å¤–éƒ¨å¯ä»¥è®¿é—®æ¨¡å—é‡Œé¢çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå°±å¿…é¡»åœ¨æ¨¡å—é‡Œé¢é€šè¿‡exportsæˆ–è€…module.exportsæš´éœ²å±æ€§æˆ–è€…æ–¹æ³•ã€‚ m1.js const name = &#39;gp19&#39; const sayName = () =&gt; { console.log(name) } console.log(&#39;module 1&#39;) // æ¥å£æš´éœ²æ–¹æ³•ä¸€ï¼š module.exports = { say: sayName } // æ¥å£æš´éœ²æ–¹æ³•äºŒï¼š exports.say = sayName // é”™è¯¯ï¼ exports = { say: sayName } main.js const m1 = require(&#39;./m1&#39;) m1.say() 1.3.2 æ¨¡å—çš„å¾ªç¯å¼•ç”¨ç”±äºexportsä½¿ç”¨æ–¹å¼ä¸å¯¹ï¼Œä¼šåœ¨ä¸¤ä¸ªä¸åŒjså¾ªç¯å¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œå¯¼è‡´å…¶ä¸­ä¸€ä¸ªjsæ— æ³•è·å–å¦å¤–ä¸€ä¸ªjsçš„æ–¹æ³•ï¼Œä»è€Œå¯¼è‡´æ‰§è¡ŒæŠ¥é”™ã€‚å¦‚ï¼š a.js exports.done = false const b = require(&#39;./b.js&#39;) console.log(&#39;in a, b.done = %j&#39;, b.done) exports.done = true console.log(&#39;a done&#39;) b.js console.log(&#39;b starting&#39;) exports.done = false const a = require(&#39;./a.js&#39;) console.log(&#39;in b, a.done= %j&#39;, a.done) exports.done = true console.log(&#39;b done&#39;) main.js console.log(&#39;main starting&#39;) const a = require(&#39;./a.js&#39;) const b = require(&#39;./b.js&#39;) console.log(&#39;in main, a.done = %j, b.done = %j&#39;, a.done, b.done) main.jsé¦–å…ˆä¼šload a.jsï¼Œæ­¤æ—¶æ‰§è¡Œåˆ°const b = require(&#39;./b.js&#39;);çš„æ—¶å€™ï¼Œç¨‹åºä¼šè½¬å»loadb.js, åœ¨b.jsä¸­æ‰§è¡Œåˆ°const a = require(&#39;./a.js&#39;); ä¸ºäº†é˜²æ­¢æ— é™å¾ªç¯ï¼Œå°†a.jsexportsçš„æœªå®Œæˆå‰¯æœ¬è¿”å›åˆ°b.jsæ¨¡å—ã€‚ç„¶åb.jså®ŒæˆåŠ è½½ï¼Œå¹¶å°†å…¶å¯¼å‡ºå¯¹è±¡æä¾›ç»™a.jsæ¨¡å—ã€‚ æˆ‘ä»¬çŸ¥é“nodeJsçš„å¯¹æ¯ä¸ªjsæ–‡ä»¶è¿›è¡Œäº†ä¸€å±‚åŒ…è£…ç§°ä¸ºmoduleï¼Œmoduleä¸­æœ‰ä¸€ä¸ªå±æ€§exportsï¼Œå½“è°ƒç”¨require(&#39;a.js&#39;)çš„æ—¶å€™å…¶å®è¿”å›çš„æ˜¯module.exportså¯¹è±¡ï¼Œmodule.exportsåˆå§‹åŒ–ä¸ºä¸€ä¸ª{}ç©ºçš„objectï¼Œæ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ‰§è¡Œåˆ°b.jsä¸­const a = require(&#39;./a.js&#39;);æ—¶ä¸ä¼šloadæ–°çš„a module, è€Œæ˜¯å°†å·²ç»loadä½†æ˜¯è¿˜æœªå®Œæˆçš„a moduleçš„exportså±æ€§è¿”å›ç»™b moduleï¼Œæ‰€ä»¥b.jsæ‹¿åˆ°çš„æ˜¯a moduleçš„exportså¯¹è±¡ï¼Œå³ï¼š{done:false}, è™½ç„¶åœ¨a.jsä¸­exports.doneè¢«ä¿®æ”¹æˆäº†trueï¼Œä½†æ˜¯ç”±äºæ­¤æ—¶a.jsæœªloadå®Œæˆï¼Œæ‰€ä»¥åœ¨b.jsè¾“å‡ºçš„a moduleçš„å±æ€§doneä¸ºfalseï¼Œè€Œåœ¨main.jsä¸­è¾“å‡ºçš„a moduleçš„å±æ€§doneä¸ºtrue. Nodejsé€šè¿‡ä¸Šé¢è¿™ç§è¿”å›æœªå®Œæˆexportså¯¹è±¡æ¥è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ å››ã€å¸¸ç”¨å†…ç½®æ¨¡å—è¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„å†…ç½®æ¨¡å—ï¼šurlï¼Œquerystringï¼Œhttpï¼Œeventsï¼Œfsï¼Œstreamï¼Œreadlineï¼Œcryptoï¼Œzlib 1ã€url1.1 parse è¦è§£æçš„å†…å®¹ï¼Œæ˜¯å¦æŸ¥è¯¢å­—ç¬¦ä¸² url.parse(urlString[,parseQueryString[,slashesDenoteHost]]) const url = require(&#39;url&#39;) const urlString = &#39;https://www.baidu.com:443/ad/index.html?id=8&amp;name=mouse#tag=110&#39; const parsedStr = url.parse(urlString) console.log(parsedStr) =&gt; Url { protocol: &#39;https:&#39;, slashes: true, auth: null, host: &#39;www.baidu.com:443&#39;, port: &#39;443&#39;, hostname: &#39;www.baidu.com&#39;, hash: &#39;#tag=110&#39;, search: &#39;?id=8&amp;name=mouse&#39;, query: [Object: null prototype] { id: &#39;8&#39;, name: &#39;mouse&#39; }, pathname: &#39;/ad/index.html&#39;, path: &#39;/ad/index.html?id=8&amp;name=mouse&#39;, href: &#39;https://www.baidu.com:443/ad/index.html?id=8&amp;name=mouse#tag=110&#39; } 1.2 format å°†ä¸€ä¸ªè§£æåçš„URLå¯¹è±¡ã€è½¬æˆã€ä¸€ä¸ªæ ¼å¼åŒ–çš„URLå­—ç¬¦ä¸²ã€‚ url.format(urlObject) const url = require(&#39;url&#39;) const urlObject = { protocol: &#39;https:&#39;, slashes: true, auth: null, host: &#39;www.baidu.com:443&#39;, port: &#39;443&#39;, hostname: &#39;www.baidu.com&#39;, hash: &#39;#tag=110&#39;, search: &#39;?id=8&amp;name=mouse&#39;, query: { id: &#39;8&#39;, name: &#39;mouse&#39; }, pathname: &#39;/ad/index.html&#39;, path: &#39;/ad/index.html?id=8&amp;name=mouse&#39;, href: &#39;https://www.baidu.com:443/ad/index.html?id=8&amp;name=mouse#tag=110&#39; } const parsedObj = url.format(urlObject) console.log(parsedObj) =&gt; &#39;https://www.baidu.com:443/ad/index.html?id=8&amp;name=mouse#tag=110&#39; 1.3 resolve ç”¨äºæ‹¼æ¥URLï¼ˆæ›¿æ¢ åŸŸååé¢ç¬¬ä¸€ä¸ª/åçš„å†…å®¹,å¦‚æœå‡ºç°.å°±å‘ä¸Šè¿”å›ä¸€çº§ä¹‹åå†æ‹¼æ¥ï¼Œä¸¤ä¸ª..å°±å‘ä¸Šåä¸¤çº§å†æ‹¼æ¥ï¼‰ url.resolve(from, to) const url = require(&#39;url&#39;) var a = url.resolve(&#39;/one/two/three&#39;, &#39;four&#39;) var b = url.resolve(&#39;http://example.com/&#39;, &#39;/one&#39;) var c = url.resolve(&#39;http://example.com/one&#39;, &#39;/two&#39;); var d = url.resolve(&#39;http://example.com/one/ddd/ddd/ddd&#39;, &#39;./two&#39;); var e = url.resolve(&#39;http://example.com/one/ddd/ddd/ddd&#39;, &#39;../two&#39;); var f = url.resolve(&#39;http://example.com/one/ddd/ddd/ddd&#39;, &#39;.../two&#39;); console.log(a +&quot;,&quot;+ b +&quot;,&quot;+ c+&#39;,&#39;+d+&#39;,&#39;+e+&#39;,&#39;+f); =&gt; /one/two/four, http://example.com/one, http://example.com/two, http://example.com/one/ddd/ddd/two, http://example.com/one/ddd/two http://example.com/one/ddd/ddd/.../two 2ã€querystring2.1 parse å°†å­—ç¬¦ä¸²è½¬æˆå¯¹è±¡ã€‚è¯´ç™½äº†å…¶å®å°±æ˜¯æŠŠurlä¸Šå¸¦çš„å‚æ•°ä¸²è½¬æˆæ•°ç»„å¯¹è±¡ã€‚ querystring.parse(str[, sep[, eq[, options]]]) strï¼šæ¬²è½¬æ¢çš„å­—ç¬¦ä¸² sepï¼šè®¾ç½®åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º&amp; eqï¼šè®¾ç½®èµ‹å€¼ç¬¦ï¼Œé»˜è®¤ä¸º= [options]maxKeysï¼šå¯æ¥å—å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œé»˜è®¤ä¸º1000 const querystring = require(&#39;querystring&#39;) var qs = &#39;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge&#39; var parsed = querystring.parse(qs) console.log(parsed) =&gt; { foo: &#39;bar&#39;, baz: [&#39;qux&#39;, &#39;quux&#39;], corge: &#39;&#39; } 2.2 stringify å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²é‡Œå¤šä¸ªå‚æ•°å°†ç”¨ â€˜&amp;â€™ åˆ†éš”ï¼Œå°†ç”¨ â€˜=â€™ èµ‹å€¼ã€‚ querystring.stringify(obj[, sep[, eq[, options]]]) objï¼šæ¬²è½¬æ¢çš„å¯¹è±¡ sepï¼šè®¾ç½®åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º&amp; eqï¼šè®¾ç½®èµ‹å€¼ç¬¦ï¼Œé»˜è®¤ä¸º= const querystring = require(&#39;querystring&#39;) var qo = { foo: &#39;bar&#39;, baz: [&#39;qux&#39;, &#39;quux&#39;], corge: &#39;&#39; } var parsed = querystring.stringify(qo) console.log(parsed) ==&gt; &#39;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=&#39; const querystring = require(&#39;querystring&#39;) var qo = {foo: &#39;bar&#39;, baz: &#39;qux&#39;} var parsed =querystring.stringify(qo, &#39;;&#39;, &#39;:&#39;) console.log(parsed) ==&gt; &#39;foo:bar;baz:qux&#39; 2.3 escape/unescape ä»¥é’ˆå¯¹ç½‘å€æŸ¥è¯¢å­—ç¬¦ä¸²çš„ç‰¹å®šè¦æ±‚ä¼˜åŒ–çš„æ–¹å¼å¯¹ç»™å®šçš„ str æ‰§è¡Œç½‘å€ç™¾åˆ†æ¯”ç¼–ç  querystring.escape() æ–¹æ³•è¢« querystring.stringify() ä½¿ç”¨ï¼Œé€šå¸¸ä¸ä¼šè¢«ç›´æ¥ä½¿ç”¨ã€‚ å¯¼å‡ºå®ƒä¸»è¦æ˜¯ä¸ºäº†å…è®¸åº”ç”¨ç¨‹åºä»£ç åœ¨å¿…è¦æ—¶é€šè¿‡å°† querystring.escape åˆ†é…ç»™æ›¿ä»£å‡½æ•°æ¥æä¾›æ›¿æ¢çš„ç™¾åˆ†æ¯”ç¼–ç å®ç°ã€‚ querystring.escape(str) const querystring = require(&#39;querystring&#39;) var str = &#39;id=3&amp;city=åŒ—äº¬&amp;url=https://www.baidu.com&#39; var escaped = querystring.escape(str) console.log(escaped) ==&gt; &#39;id%3D3%26city%3D%E5%8C%97%E4%BA%AC%26url%3Dhttps%3A%2F%2Fwww.baidu.com&#39; åœ¨ç»™å®šçš„ str ä¸Šæ‰§è¡Œç½‘å€ç™¾åˆ†æ¯”ç¼–ç å­—ç¬¦çš„è§£ç ã€‚ querystring.unescape() æ–¹æ³•è¢« querystring.parse() ä½¿ç”¨ï¼Œé€šå¸¸ä¸ä¼šè¢«ç›´æ¥ä½¿ç”¨ã€‚ å¯¼å‡ºå®ƒä¸»è¦æ˜¯ä¸ºäº†å…è®¸åº”ç”¨ç¨‹åºä»£ç åœ¨å¿…è¦æ—¶é€šè¿‡å°† querystring.unescape åˆ†é…ç»™æ›¿ä»£å‡½æ•°æ¥æä¾›æ›¿ä»£çš„è§£ç å®ç°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œquerystring.unescape() æ–¹æ³•å°†å°è¯•ä½¿ç”¨ JavaScript å†…ç½®çš„ decodeURIComponent() æ–¹æ³•è¿›è¡Œè§£ç ã€‚ å¦‚æœå¤±è´¥ï¼Œåˆ™å°†ä½¿ç”¨æ›´å®‰å…¨çš„ä¸ä¼šå› æ ¼å¼é”™è¯¯çš„ç½‘å€è€ŒæŠ›å‡ºé”™è¯¯çš„åŒç±»æ–¹æ³•ã€‚ querystring.unescape(str) const querystring = require(&#39;querystring&#39;) var str = &#39;id%3D3%26city%3D%E5%8C%97%E4%BA%AC%26url%3Dhttps%3A%2F%2Fwww.baidu.com&#39; var unescaped = querystring.unescape(str) console.log(unescaped) ==&gt; &#39;id=3&amp;city=åŒ—äº¬&amp;url=https://www.baidu.com&#39; 3ã€http/https3.1 getvar http = require(&#39;http&#39;) var https = require(&#39;https&#39;) // 1ã€æ¥å£ 2ã€è·¨åŸŸ const server = http.createServer((request, response) =&gt; { var url = request.url.substr(1) var data = &#39;&#39; response.writeHeader(200, { &#39;content-type&#39;: &#39;application/json;charset=utf-8&#39;, &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39; }) //response.write(&#39;&lt;div&gt;hello&lt;/div&gt;&#39;) //response.end() // æˆ– //response.end(&#39;&lt;div&gt;hello&lt;/div&gt;&#39;) https.get(`https://m.lagou.com/listmore.json${url}`, (res) =&gt; { res.on(&#39;data&#39;, (chunk) =&gt; { data += chunk }) res.on(&#39;end&#39;, () =&gt; { response.end(JSON.stringify({ ret: true, data })) }) }) }) server.listen(8080, () =&gt; { console.log(&#39;localhost:8080&#39;) }) 3.2 post:æœåŠ¡å™¨æäº¤ï¼ˆæ”»å‡»ï¼‰const https = require(&#39;https&#39;) const querystring = require(&#39;querystring&#39;) const postData = querystring.stringify({ province: &#39;ä¸Šæµ·&#39;, city: &#39;ä¸Šæµ·&#39;, district: &#39;å®å±±åŒº&#39;, address: &#39;åŒæµæ”¯è·¯199å·æ™ºæ…§ä¸ƒç«‹æ–¹3å·æ¥¼2-4å±‚&#39;, latitude: 43.0, longitude: 160.0, message: &#39;æ±‚è´­ä¸€æ¡å°é±¼&#39;, contact: &#39;13666666&#39;, type: &#39;sell&#39;, time: 1571217561 }) const options = { protocol: &#39;http:&#39;, hostname: &#39;localhost&#39;, method: &#39;POST&#39;, port: 3000, path: &#39;/index.php/trade/add_item&#39;, headers: { &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;, &#39;Content-Length&#39;: Buffer.byteLength(postData) } } const server = http.createServer((req, res) =&gt; { const request = http.request(options, result =&gt; { }) req.write(postData) req.end() res.end() }) server.listen(8080, ()=&gt; { console.log(&#39;localhost:8080&#39;) }) //function doPost() { // let data // let req = https.request(options, (res) =&gt; { // res.on(&#39;data&#39;, chunk =&gt; data += chunk) // res.on(&#39;end&#39;, () =&gt; { // console.log(data) // }) // }) // req.write(postData) // req.end() //} // setInterval(() =&gt; { // doPost() // }, 1000) 3.3 è·¨åŸŸï¼šJSONPconst http = require(&#39;http&#39;) const url = require(&#39;url&#39;) const app = http.createServer((req, res) =&gt; { let urlObj = url.parse(req.url, true) switch (urlObj.pathname) { case &#39;/api/user&#39;: res.end(`${urlObj.query.cb}({&quot;name&quot;: &quot;gp145&quot;})`) break default: res.end(&#39;404.&#39;) break } }) app.listen(8080, () =&gt; { console.log(&#39;localhost:8080&#39;) }) 3.4 è·¨åŸŸï¼šCORSconst http = require(&#39;http&#39;) const url = require(&#39;url&#39;) const querystring = require(&#39;querystring&#39;) const app = http.createServer((req, res) =&gt; { let data = &#39;&#39; let urlObj = url.parse(req.url, true) res.writeHead(200, { &#39;content-type&#39;: &#39;application/json;charset=utf-8&#39;, &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39; }) req.on(&#39;data&#39;, (chunk) =&gt; { data += chunk }) req.on(&#39;end&#39;, () =&gt; { responseResult(querystring.parse(data)) }) function responseResult(data) { switch (urlObj.pathname) { case &#39;/api/login&#39;: res.end(JSON.stringify({ message: data })) break default: res.end(&#39;404.&#39;) break } } }) app.listen(8080, () =&gt; { console.log(&#39;localhost:8080&#39;) }) 3.5 è·¨åŸŸï¼šmiddleware(http-proxy-middware)const http = require(&#39;http&#39;) const proxy = require(&#39;http-proxy-middleware&#39;) http.createServer((req, res) =&gt; { let url = req.url res.writeHead(200, { &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39; }) if (/^\\/api/.test(url)) { let apiProxy = proxy(&#39;/api&#39;, { target: &#39;https://m.lagou.com&#39;, changeOrigin: true, pathRewrite: { &#39;^/api&#39;: &#39;&#39; } }) // http-proy-middleware åœ¨Node.jsä¸­ä½¿ç”¨çš„æ–¹æ³• apiProxy(req, res) } else { switch (url) { case &#39;/index.html&#39;: res.end(&#39;index.html&#39;) break case &#39;/search.html&#39;: res.end(&#39;search.html&#39;) break default: res.end(&#39;[404]page not found.&#39;) } } }).listen(8080) 3.6 çˆ¬è™«const https = require(&#39;https&#39;) const http = require(&#39;http&#39;) const cheerio = require(&#39;cheerio&#39;) http.createServer((request, response) =&gt; { response.writeHead(200, { &#39;content-type&#39;: &#39;application/json;charset=utf-8&#39; }) const options = { protocol: &#39;https:&#39;, hostname: &#39;maoyan.com&#39;, port: 443, path: &#39;/&#39;, method: &#39;GET&#39; } const req = https.request(options, (res) =&gt; { let data = &#39;&#39; res.on(&#39;data&#39;, (chunk) =&gt; { data += chunk }) res.on(&#39;end&#39;, () =&gt; { filterData(data) }) }) function filterData(data) { let $ = cheerio.load(data) let $movieList = $(&#39;.movie-item&#39;) let movies = [] $movieList.each((index, value) =&gt; { movies.push({ title: $(value).find(&#39;.movie-title&#39;).attr(&#39;title&#39;), score: $(value).find(&#39;.movie-score i&#39;).text(), }) }) response.end(JSON.stringify(movies)) } req.end() }).listen(9000) 4ã€Eventsconst EventEmitter = require(&#39;events&#39;) class MyEventEmitter extends EventEmitter {} const event = new MyEventEmitter() event.on(&#39;play&#39;, (movie) =&gt; { console.log(movie) }) event.emit(&#39;play&#39;, &#39;æˆ‘å’Œæˆ‘çš„ç¥–å›½&#39;) event.emit(&#39;play&#39;, &#39;ä¸­å›½æœºé•¿&#39;) 5ã€File Systemconst fs = require(&#39;fs&#39;) const fsP = require(&#39;fs&#39;).promises // åˆ›å»ºæ–‡ä»¶å¤¹ fs.mkdir(&#39;./logs&#39;, (err) =&gt; { console.log(&#39;done.&#39;) }) // æ–‡ä»¶å¤¹æ”¹å fs.rename(&#39;./logs&#39;, &#39;./log&#39;, () =&gt; { console.log(&#39;done&#39;) }) // åˆ é™¤æ–‡ä»¶å¤¹ fs.rmdir(&#39;./log&#39;, () =&gt; { console.log(&#39;done.&#39;) }) // å†™å†…å®¹åˆ°æ–‡ä»¶é‡Œ fs.writeFile( &#39;./logs/log1.txt&#39;, &#39;hello&#39;, // é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•° (err) =&gt; { if (err) { console.log(err.message) } else { console.log(&#39;æ–‡ä»¶åˆ›å»ºæˆåŠŸ&#39;) } } ) // ç»™æ–‡ä»¶è¿½åŠ å†…å®¹ fs.appendFile(&#39;./logs/log1.txt&#39;, &#39;\\nworld&#39;, () =&gt; { console.log(&#39;done.&#39;) }) // è¯»å–æ–‡ä»¶å†…å®¹ fs.readFile(&#39;./logs/log1.txt&#39;, &#39;utf-8&#39;, (err, data) =&gt; { console.log(data) }) // åˆ é™¤æ–‡ä»¶ fs.unlink(&#39;./logs/log1.txt&#39;, (err) =&gt; { console.log(&#39;done.&#39;) }) // æ‰¹é‡å†™æ–‡ä»¶ for (var i = 0; i &lt; 10; i++) { fs.writeFile(`./logs/log-${i}.txt`, `log-${i}`, (err) =&gt; { console.log(&#39;done.&#39;) }) } // è¯»å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯ fs.readdir(&#39;./&#39;, (err, data) =&gt; { data.forEach((value, index) =&gt; { fs.stat(`./${value}`, (err, stats) =&gt; { // console.log(value + &#39;:&#39; + stats.size) console.log(value + &#39; is &#39; + (stats.isDirectory() ? &#39;directory&#39; : &#39;file&#39;)) }) }) }) // åŒæ­¥è¯»å–æ–‡ä»¶ try { const content = fs.readFileSync(&#39;./logs/log-1.txt&#39;, &#39;utf-8&#39;) console.log(content) console.log(0) } catch (e) { console.log(e.message) } console.log(1) // å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼šæ–¹æ³•ä¸€ fs.readFile(&#39;./logs/log-0.txt&#39;, &#39;utf-8&#39;, (err, content) =&gt; { console.log(content) console.log(0) }) console.log(1) // å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼šæ–¹æ³•äºŒ fs.readFile(&#39;./logs/log-0.txt&#39;, &#39;utf-8&#39;).then(result =&gt; { console.log(result) }) // å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼šæ–¹æ³•ä¸‰ function getFile() { return new Promise((resolve) =&gt; { fs.readFile(&#39;./logs/log-0.txt&#39;, &#39;utf-8&#39;, (err, data) =&gt; { resolve(data) }) }) } ;(async () =&gt; { console.log(await getFile()) })() // å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼šæ–¹æ³•å›› const fsp = fsP.readFile(&#39;./logs/log-1.txt&#39;, &#39;utf-8&#39;).then((result) =&gt; { console.log(result) }) console.log(fsP) // watch ç›‘æµ‹æ–‡ä»¶å˜åŒ– fs.watch(&#39;./logs/log-0.txt&#39;, () =&gt; { console.log(0) }) 6ã€Streamconst fs = require(&#39;fs&#39;) const readstream = fs.createReadStream(&#39;./note.txt&#39;) const writestream = fs.createWriteStream(&#39;./note2.txt&#39;) writestream.write(readstream) 7ã€Zlibconst fs = require(&#39;fs&#39;) const zlib = require(&#39;zlib&#39;) const gzip = zlib.createGzip() const readstream = fs.createReadStream(&#39;./note.txt&#39;) const writestream = fs.createWriteStream(&#39;./note2.txt&#39;) readstream .pipe(gzip) .pipe(writestream) writestream.write(readstream) 8ã€ReadLineconst readline = require(&#39;readline&#39;) const rl = readline.createInterface({ input: process.stdin, output: process.stdout }) rl.question(&#39;What do you think of Node.js? &#39;, (answer) =&gt; { // TODO: Log the answer in a database console.log(`Thank you for your valuable feedback: ${answer}`) rl.close() }) 9ã€Cryptoconst crypto = require(&#39;crypto&#39;) const secret = &#39;abcdefg&#39; const hash = crypto.createHmac(&#39;sha256&#39;, secret) .update(&#39;I love you&#39;) .digest(&#39;hex&#39;) console.log(hash) äº”ã€è·¯ç”±var http = require(&#39;http&#39;) var fs = require(&#39;fs&#39;) http.createServer( function ( req, res ) { switch ( req.url ) { case &#39;/home&#39;: res.write(&#39;home&#39;) res.end() break case &#39;/mine&#39;: res.write(&#39;mine&#39;) res.end() break case &#39;/login&#39;: fs.readFile( &#39;./static/login.html&#39;,function ( error , data ) { if ( error ) throw error res.write( data ) res.end() }) break case &#39;/fulian.jpg&#39;: fs.readFile( &#39;./static/fulian.jpg&#39;, &#39;binary&#39;, function( error , data ) { if( error ) throw error res.write( data, &#39;binary&#39; ) res.end() }) break default: break } }).listen( 8000, &#39;localhost&#39;, function () { console.log( &#39;æœåŠ¡å™¨è¿è¡Œåœ¨ï¼š http://localhost:8000&#39; ) }) å…­ã€é™æ€èµ„æºæœåŠ¡6.1 readStaticFile/modules/readStaticFile.js // å¼•å…¥ä¾èµ–çš„æ¨¡å— var path = require(&#39;path&#39;) var fs = require(&#39;fs&#39;) var mime = require(&#39;mime&#39;) function readStaticFile(res, filePathname) { var ext = path.parse(filePathname).ext var mimeType = mime.getType(ext) // åˆ¤æ–­è·¯å¾„æ˜¯å¦æœ‰åç¼€, æœ‰çš„è¯åˆ™è¯´æ˜å®¢æˆ·ç«¯è¦è¯·æ±‚çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ if (ext) { // æ ¹æ®ä¼ å…¥çš„ç›®æ ‡æ–‡ä»¶è·¯å¾„æ¥è¯»å–å¯¹åº”æ–‡ä»¶ fs.readFile(filePathname, (err, data) =&gt; { // é”™è¯¯å¤„ç† if (err) { res.writeHead(404, { &quot;Content-Type&quot;: &quot;text/plain&quot; }) res.write(&quot;404 - NOT FOUND&quot;) res.end() } else { res.writeHead(200, { &quot;Content-Type&quot;: mimeType }) res.write(data) res.end() } }); // è¿”å› true è¡¨ç¤º, å®¢æˆ·ç«¯æƒ³è¦çš„ æ˜¯ é™æ€æ–‡ä»¶ return true } else { // è¿”å› false è¡¨ç¤º, å®¢æˆ·ç«¯æƒ³è¦çš„ ä¸æ˜¯ é™æ€æ–‡ä»¶ return false } } // å¯¼å‡ºå‡½æ•° module.exports = readStaticFile 6.2 server/server.js // å¼•å…¥ç›¸å…³æ¨¡å— var http = require(&#39;http&#39;); var url = require(&#39;url&#39;); var path = require(&#39;path&#39;); var readStaticFile = require(&#39;./modules/readStaticFile&#39;); // æ­å»º HTTP æœåŠ¡å™¨ var server = http.createServer(function(req, res) { var urlObj = url.parse(req.url); var urlPathname = urlObj.pathname; var filePathname = path.join(__dirname, &quot;/public&quot;, urlPathname); // è¯»å–é™æ€æ–‡ä»¶ readStaticFile(res, filePathname); }); // åœ¨ 3000 ç«¯å£ç›‘å¬è¯·æ±‚ server.listen(3000, function() { console.log(&quot;æœåŠ¡å™¨è¿è¡Œä¸­.&quot;); console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£:&quot;) }) 6.3 æœ€ç»ˆç›®å½•ç»“æ„ 02-ExpressåŸºäºNode.jså¹³å°ï¼Œå¿«é€Ÿã€å¼€æ”¾ã€æç®€çš„webå¼€å‘æ¡†æ¶ã€‚ $ npm install express --save ä¸€ã€ç‰¹è‰²1ã€Webåº”ç”¨Expressæ˜¯ä¸€ä¸ªåŸºäºNode.jså¹³å°çš„æç®€ã€çµæ´»çš„webåº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§Webå’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚ 2ã€APIä¸°å¯Œçš„HTTPå¿«æ·æ–¹æ³•å’Œä»»æ„æ’åˆ—ç»„åˆçš„Connectä¸­é—´ä»¶ï¼Œè®©ä½ åˆ›å»ºå¥å£®ã€å‹å¥½çš„APIå˜å¾—æ—¢å¿«é€Ÿåˆç®€å•ã€‚ 3ã€æ€§èƒ½Expressä¸å¯¹Node.jså·²æœ‰çš„ç‰¹æ€§è¿›è¡ŒäºŒæ¬¡æŠ½è±¡ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨å®ƒä¹‹ä¸Šæ‰©å±•äº†Webåº”ç”¨æ‰€éœ€çš„åŸºæœ¬æ€§èƒ½ã€‚ äºŒã€å®‰è£…é¦–å…ˆå‡å®šä½ å·²ç»å®‰è£…äº†Node.jsï¼Œæ¥ä¸‹æ¥ä¸ºä½ çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶åè¿›å…¥æ­¤ç›®å½•å¹¶å°†å…¶ä½œä¸ºå½“å‰å·¥ä½œç›®å½•ã€‚ $ mkdir myapp $ cd myapp é€šè¿‡npm initå‘½ä»¤ä¸ºä½ çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶ã€‚æ¬²äº†è§£ package.json æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ï¼Œè¯·å‚è€ƒ Specifics of npmâ€™s package.json handlingã€‚ $ npm init æ­¤å‘½ä»¤å°†è¦æ±‚ä½ è¾“å…¥å‡ ä¸ªå‚æ•°ï¼Œä¾‹å¦‚æ­¤åº”ç”¨çš„åç§°å’Œç‰ˆæœ¬ã€‚ä½ å¯ä»¥ç›´æ¥æŒ‰â€œå›è½¦â€é”®æ¥å—é»˜è®¤è®¾ç½®å³å¯ï¼Œä¸‹é¢è¿™ä¸ªé™¤å¤–ï¼š entry point: (index.js) é”®å…¥app.jsæˆ–è€…ä½ æ‰€å¸Œæœ›çš„åç§°ï¼Œè¿™æ˜¯å½“å‰åº”ç”¨çš„å…¥å£æ–‡ä»¶ã€‚å¦‚æœä½ å¸Œæœ›é‡‡ç”¨é»˜è®¤çš„index.jsæ–‡ä»¶åï¼Œåªéœ€æŒ‰â€œå›è½¦â€é”®å³å¯ã€‚ æ¥ä¸‹æ¥å®‰è£…Expresså¹¶å°†å…¶ä¿å­˜åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼š $ npm install express --save å¦‚æœåªæ˜¯ä¸´æ—¶å®‰è£…Expressï¼Œä¸æƒ³å°†å®ƒæ·»åŠ åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼Œåªéœ€ç•¥å»â€“saveå‚æ•°å³å¯ï¼š $ npm install express å®‰è£…Nodeæ¨¡å—æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†--save å‚æ•°ï¼Œé‚£ä¹ˆæ­¤æ¨¡å—å°†è¢«æ·»åŠ åˆ°package.jsonæ–‡ä»¶ä¸­dependenciesä¾èµ–åˆ—è¡¨ä¸­ã€‚ç„¶åé€šè¿‡npm install å‘½ä»¤å³å¯ ä¸‰ã€Hello Worldå®ä¾‹æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„Expressåº”ç”¨ã€‚ æ³¨æ„ï¼šè¿™é‡Œæ‰€åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæœ€æœ€ç®€å•çš„Expressåº”ç”¨ï¼Œå¹¶ä¸”ä»…ä»…åªæœ‰ä¸€ä¸ªæ–‡ä»¶ - å’Œé€šè¿‡Expressåº”ç”¨ç”Ÿæˆå™¨æ‰€åˆ›å»ºçš„åº”ç”¨å®Œå…¨ä¸ä¸€æ ·ï¼ŒExpressåº”ç”¨ç”Ÿæˆå™¨æ‰€åˆ›å»ºçš„åº”ç”¨æ¡†æ¶åŒ…å«å¤šJavaScriptæ–‡ä»¶ã€Jadeæ¨¡æ¿å’Œé’ˆå¯¹ä¸åŒç”¨é€”çš„å­ç›®å½•ã€‚ è¿›å…¥myappç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºapp.jsçš„æ–‡ä»¶ï¼Œç„¶åå°†ä¸‹åˆ—ä»£ç å¤åˆ¶è¿›å»ï¼š var express = require(&#39;express&#39;); var app = express(); app.get(&#39;/&#39;, function (req, res) { res.send(&#39;Hello World!&#39;); }); var server = app.listen(3000, function () { var host = server.address().address; var port = server.address().port; console.log(&#39;Example app listening at http://%s:%s&#39;, host, port); }); ä¸Šé¢çš„ä»£ç å¯åŠ¨ä¸€ä¸ªæœåŠ¡å¹¶ç›‘å¬ä»3000ç«¯å£è¿›å…¥çš„æ‰€æœ‰è¿æ¥è¯·æ±‚ã€‚ä»–å°†å¯¹æ‰€æœ‰(/)URLæˆ– è·¯ç”±è¿”å›â€œHello Worldï¼â€å­—ç¬¦ä¸²ã€‚å¯¹äºå…¶ä»–æ‰€æœ‰è·¯å¾„å…¨éƒ¨è¿”å› 404 Not Foundã€‚ req (è¯·æ±‚) å’Œ res (å“åº”) ä¸ Node æä¾›çš„å¯¹è±¡å®Œå…¨ä¸€è‡´ï¼Œå› æ­¤ï¼Œä½ å¯ä»¥è°ƒç”¨ req.pipe()ã€req.on(â€˜dataâ€™, callback) ä»¥åŠä»»ä½• Node æä¾›çš„æ–¹æ³•ã€‚ é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ­¤åº”ç”¨ï¼š $ node app.js ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:3000/ å¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚ å››ã€è·¯ç”±è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURlsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ è·¯ç”±æ˜¯ç”±ä¸€ä¸ªURIã€HTTPè¯·æ±‚ï¼ˆGETã€POSTç­‰ï¼‰å’Œè‹¥å¹²ä¸ªå¥æŸ„ç»„æˆï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼šapp.METHOD(path, [callback..], callback)ï¼Œ app æ˜¯ express å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼ŒMETHODæ˜¯ä¸€ä¸ª HTTP è¯·æ±‚æ–¹æ³•ï¼Œpath æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ï¼Œ callback æ˜¯å½“è·¯ç”±åŒ¹é…æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è·¯ç”±ç¤ºä¾‹ï¼š var express = require(&#39;express&#39;); var app = express(); // respond with &quot;hello world&quot; when a GET request is made to the homepage app.get(&#39;/&#39;, function(req, res) { res.send(&#39;hello world&#39;); }); 1ã€è·¯ç”±æ–¹æ³•è·¯ç”±æ–¹æ³•æºäº HTTP è¯·æ±‚æ–¹æ³•ï¼Œå’Œ express å®ä¾‹ç›¸å…³è”ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ä¸ºåº”ç”¨è·Ÿè·¯å¾„å®šä¹‰çš„ GET å’Œ POST è¯·æ±‚ï¼š // GET method route // å¯¹ç½‘ç«™é¦–é¡µçš„è®¿é—®è¿”å› &quot;Hello World!&quot; å­—æ · app.get(&#39;/&#39;, function (req, res) { res.send(&#39;Hello World!&#39;) }) // ç½‘ç«™é¦–é¡µæ¥å— POST è¯·æ±‚ app.post(&#39;/&#39;, function (req, res) { res.send(&#39;Got a POST request&#39;) }) // /user èŠ‚ç‚¹æ¥å— PUT è¯·æ±‚ app.put(&#39;/user&#39;, function (req, res) { res.send(&#39;Got a PUT request at /user&#39;) }) // /user èŠ‚ç‚¹æ¥å— DELETE è¯·æ±‚ app.delete(&#39;/user&#39;, function (req, res) { res.send(&#39;Got a DELETE request at /user&#39;) }) Express å®šä¹‰äº†å¦‚ä¸‹å’Œ HTTP è¯·æ±‚å¯¹åº”çš„è·¯ç”±æ–¹æ³•ï¼š get, post, put, head, delete, options, trace, copy, lock, mkcol, move, purge, propfind, proppatch, unlock, report, mkactivity, checkout, merge, m-search, notify, subscribe, unsubscribe, patch, search, å’Œ connectã€‚ æœ‰äº›è·¯ç”±æ–¹æ³•åä¸æ˜¯åˆè§„çš„ JavaScript å˜é‡åï¼Œæ­¤æ—¶ä½¿ç”¨æ‹¬å·è®°æ³•ï¼Œæ¯”å¦‚ï¼šapp[&#39;m-search&#39;](&#39;/&#39;, function ...) app.all()æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½•HTTPæ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ¥è‡ªâ€/secretâ€çš„è¯·æ±‚ï¼Œä¸ç®¡ä½¿ç”¨ GETã€POSTã€PUTã€DELETEæˆ–å…¶ä»–ä»»ä½•httpæ¨¡å—æ”¯æŒçš„HTTPè¯·æ±‚ï¼Œå¥æŸ„éƒ½ä¼šå¾—åˆ°æ‰§è¡Œã€‚ app.all(&#39;/secret&#39;, function (req, res, next) { console.log(&#39;Accessing the secret section ...&#39;) next(); // pass control to the next handler }) 2ã€è·¯ç”±è·¯å¾„è·¯ç”±è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•ä¸€èµ·å®šä¹‰äº†è¯·æ±‚çš„ç«¯ç‚¹ï¼Œå®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å­—ç¬¦ä¸²æ¨¡å¼æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ã€‚ Expressä½¿ç”¨path-to-regexpåŒ¹é…è·¯ç”±è·¯å¾„ï¼Œè¯·å‚è€ƒæ–‡æ¡£æŸ¥é˜…æ‰€æœ‰å®šä¹‰è·¯ç”±è·¯å¾„çš„æ–¹æ³•ã€‚Express Route Testeræ˜¯æµ‹è¯•åŸºæœ¬Expressè·¯å¾„çš„å¥½å·¥å…·ï¼Œä½†ä¸æ”¯æŒæ¨¡å¼åŒ¹é…ã€‚ æŸ¥è¯¢å­—ç¬¦ä¸²ä¸æ˜¯è·¯ç”±è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚ ä½¿ç”¨å­—ç¬¦ä¸²çš„è·¯ç”±è·¯å¾„ç¤ºä¾‹ï¼š // åŒ¹é…æ ¹è·¯å¾„çš„è¯·æ±‚ app.get(&#39;/&#39;, function (req, res) { res.send(&#39;root&#39;); }); // åŒ¹é… /about è·¯å¾„çš„è¯·æ±‚ app.get(&#39;/about&#39;, function (req, res) { res.send(&#39;about&#39;); }); // åŒ¹é… /random.text è·¯å¾„çš„è¯·æ±‚ app.get(&#39;/random.text&#39;, function (req, res) { res.send(&#39;random.text&#39;); }); ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡å¼çš„è·¯ç”±è·¯å¾„ç¤ºä¾‹ï¼š // åŒ¹é… acd å’Œ abcd app.get(&#39;/ab?cd&#39;, function(req, res) { res.send(&#39;ab?cd&#39;); }); // åŒ¹é… abcdã€abbcdã€abbbcdç­‰ app.get(&#39;/ab+cd&#39;, function(req, res) { res.send(&#39;ab+cd&#39;); }); // åŒ¹é… abcdã€abxcdã€abRABDOMcdã€ab123cdç­‰ app.get(&#39;/ab*cd&#39;, function(req, res) { res.send(&#39;ab*cd&#39;); }); // åŒ¹é… /abe å’Œ /abcde app.get(&#39;/ab(cd)?e&#39;, function(req, res) { res.send(&#39;ab(cd)?e&#39;); }); å­—ç¬¦ ?ã€+ã€* å’Œ () æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å­é›†ï¼Œ- å’Œ . åœ¨åŸºäºå­—ç¬¦ä¸²çš„è·¯å¾„ä¸­æŒ‰ç…§å­—é¢å€¼è§£é‡Šã€‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„è·¯ç”±è·¯å¾„ç¤ºä¾‹ï¼š // åŒ¹é…ä»»ä½•è·¯å¾„ä¸­å«æœ‰ a çš„è·¯å¾„ï¼š app.get(/a/, function(req, res) { res.send(&#39;/a/&#39;); }); // åŒ¹é… butterflyã€dragonflyï¼Œä¸åŒ¹é… butterflymanã€dragonfly manç­‰ app.get(/.*fly$/, function(req, res) { res.send(&#39;/.*fly$/&#39;); }); 3ã€è·¯ç”±å¥æŸ„å¯ä»¥ä¸ºè¯·æ±‚å¤„ç†æä¾›å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå…¶è¡Œä¸ºç±»ä¼¼ä¸­é—´ä»¶ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯è¿™äº›å›è°ƒå‡½æ•°æœ‰å¯èƒ½è°ƒç”¨next(&#39;route&#39;)æ–¹æ³•è€Œç•¥è¿‡å…¶ä»–è·¯ç”±å›è°ƒå‡½æ•°ã€‚å¯ä»¥åˆ©ç”¨è¯¥æœºåˆ¶ä¸ºè·¯ç”±å®šä¹‰å‰ææ¡ä»¶ï¼Œå¦‚æœåœ¨ç°æœ‰è·¯å¾„ä¸Šç»§ç»­æ‰§è¡Œæ²¡æœ‰æ„ä¹‰ï¼Œåˆ™å¯å°†æ§åˆ¶æƒäº¤ç»™å‰©ä¸‹çš„è·¯å¾„ã€‚ è·¯ç”±å¥æŸ„æœ‰å¤šç§å½¢å¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªå‡½æ•°æ•°ç»„ã€æˆ–è€…æ˜¯ä¸¤è€…æ··åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ ä½¿ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°å¤„ç†è·¯ç”±ï¼š app.get(&#39;/example/a&#39;, function(req, res) { res.send(&#39;Hello from A!&#39;) }) ä½¿ç”¨å¤šä¸ªå›è°ƒå‡½æ•°å¤„ç†è·¯ç”±ï¼ˆè®°å¾—æŒ‡å®šnextå¯¹è±¡ï¼‰ï¼š app.get(&#39;/example/b&#39;, function (req, res, next) { console.log(&#39;response will be sent by the next function ...&#39;); next(); }, function (req, res) { res.send(&#39;Hello from B!&#39;); }); ä½¿ç”¨å›è°ƒå‡½æ•°æ•°ç»„å¤„ç†è·¯ç”±ï¼š var cb0 = function (req, res, next) { console.log(&#39;CB0&#39;) next() } var cb1 = function (req, res, next) { console.log(&#39;CB1&#39;) next() } var cb2 = function (req, res) { res.send(&#39;Hello from C!&#39;) } app.get(&#39;/example/c&#39;, [cb0, cb1, cb2]) æ··åˆä½¿ç”¨å‡½æ•°å’Œå‡½æ•°æ•°ç»„å¤„ç†è·¯ç”±ï¼š var cb0 = function (req, res, next) { console.log(&#39;CB0&#39;) next() } var cb1 = function (req, res, next) { console.log(&#39;CB1&#39;) next() } app.get(&#39;/example/d&#39;, [cb0, cb1], function (req, res, next) { console.log(&#39;response will be sent by the next function ...&#39;) next() }, function (req, res) { res.send(&#39;Hello from D!&#39;) }) 4ã€å“åº”æ–¹æ³•ä¸‹è¡¨ä¸­å“åº”å¯¹è±¡(res)çš„æ–¹æ³•å‘å®¢æˆ·ç«¯è¿”å›å“åº”ï¼Œç»ˆç»“è¯·æ±‚å“åº”çš„å¾ªç¯ã€‚å¦‚æœåœ¨è·¯ç”±å¥æŸ„ä¸­ä¸€ä¸ªæ–¹æ³•ä¹Ÿä¸è°ƒç”¨ï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šä¸€ç›´æŒ‚èµ·ã€‚ æ–¹æ³• æè¿° res.download() æç¤ºä¸‹è½½æ–‡ä»¶ res.end() ç»ˆç»“å“åº”å¤„ç†æµç¨‹ res.json() å‘é€ä¸€ä¸ªJSONæ ¼å¼çš„å“åº” res.jsonp() å‘é€ä¸€ä¸ªæ”¯æŒJSONPçš„JSONæ ¼å¼çš„å“åº” res.direct() é‡å®šå‘è¯·æ±‚ res.render() æ¸²æŸ“è§†å›¾æ¨¡æ¿ res.send() å‘é€å„ç§ç±»å‹çš„å“åº” res.sendFile() ä»¥å…«ä½å­—èŠ‚æµçš„å½¢å¼å‘é€æ–‡ä»¶ res.sendStatus() è®¾ç½®å“åº”çŠ¶æ€ä»£ç ï¼Œå¹¶å°†å…¶ä»¥å­—ç¬¦ä¸²å½¢å¼ä½œä¸ºå“åº”ä½“çš„ä¸€éƒ¨åˆ†å‘é€ 5ã€app.route()å¯ä½¿ç”¨app.route()åˆ›å»ºè·¯ç”±è·¯å¾„çš„é“¾å¼è·¯ç”±å¥æŸ„ã€‚ç”±äºè·¯å¾„åœ¨ä¸€ä¸ªåœ°æ–¹æŒ‡å®šï¼Œè¿™æ ·åšæœ‰åŠ©äºåˆ›å»ºæ¨¡å—åŒ–çš„è·¯ç”±ï¼Œè€Œä¸”å‡å°‘äº†ä»£ç å†—ä½™å’Œæ‹¼å†™é”™è¯¯ã€‚ ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ç¨‹åºä½¿ç”¨app.route()å®šä¹‰äº†é“¾å¼è·¯ç”±å¥æŸ„ã€‚ app.route(&#39;/book&#39;) .get(function(req, res) { res.send(&#39;Get a random book&#39;); }) .post(function(req, res) { res.send(&#39;Add a book&#39;); }) .put(function(req, res) { res.send(&#39;Update the book&#39;); }); 6ã€express.Routerå¯ä½¿ç”¨express.Routerç±»åˆ›å»ºæ¨¡å—åŒ–ã€å¯æŒ‚è½½çš„è·¯ç”±å¥æŸ„ã€‚Routerå®ä¾‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿï¼Œå› æ­¤å¸¸ç§°å…¶ä¸ºä¸€ä¸ªâ€™mini-appâ€™ã€‚ ä¸‹é¢çš„å®ä¾‹ç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªè·¯ç”±æ¨¡å—ï¼Œå¹¶åŠ è½½ äº†ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®šä¹‰äº†ä¸€äº›è·¯ç”±ï¼Œå¹¶ä¸”å°†å®ƒä»¬æŒ‚è½½è‡³åº”ç”¨çš„è·¯å¾„ä¸Šã€‚ åœ¨appç›®å½•ä¸‹åˆ›å»ºåä¸ºbird.jsçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š var express = require(&#39;express&#39;); var router = express.Router(); // è¯¥è·¯ç”±ä½¿ç”¨çš„ä¸­é—´ä»¶ router.use(function timeLog(req, res, next) { console.log(&#39;Time: &#39;, Date.now()); next(); }); // å®šä¹‰ç½‘ç«™ä¸»é¡µçš„è·¯ç”± router.get(&#39;/&#39;, function(req, res) { res.send(&#39;Birds home page&#39;); }); // å®šä¹‰ about é¡µé¢çš„è·¯ç”± router.get(&#39;/about&#39;, function(req, res) { res.send(&#39;About birds&#39;); }); module.exports = router; ç„¶ååœ¨åº”ç”¨ä¸­åŠ è½½è·¯ç”±æ¨¡å—ï¼š var birds = require(&#39;./birds&#39;) ... app.use(&#39;/birds&#39;, birds) åº”ç”¨å³å¯å¤„ç†å‘è‡ª /birds å’Œ /birds/about çš„è¯·æ±‚ï¼Œå¹¶ä¸”è°ƒç”¨ä¸ºè¯¥è·¯ç”±æŒ‡å®šçš„ timeLog ä¸­é—´ä»¶ã€‚ äº”ã€åˆ©ç”¨Expressæ‰˜ç®¡é™æ€æ–‡ä»¶é€šè¿‡Expresså†…ç½®çš„express.staticå¯ä»¥æ–¹ä¾¿åœ°æ‰˜ç®¡é™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡ã€CSSã€JavaScriptæ–‡ä»¶ç­‰ã€‚ å°†é™æ€èµ„æºæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™express.staticä¸­é—´ä»¶å°±å¯ä»¥æä¾›é™æ€èµ„æºæ–‡ä»¶çš„è®¿é—®äº†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾åœ¨publicç›®å½•æ”¾ç½®äº†å›¾ç‰‡ã€CSSå’ŒJavaScriptæ–‡ä»¶ï¼Œä½ å°±å¯ä»¥ï¼š app.use(express.static(&#39;public&#39;)) ç°åœ¨ï¼Œpublicç›®å½•ä¸‹é¢çš„æ–‡ä»¶å°±å¯ä»¥è®¿é—®äº†ã€‚ http://localhost:3000/images/kitten.jpg http://localhost:3000/css/style.css http://localhost:3000/js/app.js http://localhost:3000/images/bg.png http://localhost:3000/hello.html æ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„éƒ½æ˜¯ç›¸å¯¹äºå­˜æ”¾ç›®å½•çš„ï¼Œå› æ­¤ï¼Œå­˜æ”¾é™æ€æ–‡ä»¶çš„ç›®å½•åä¸ä¼šå‡ºç°åœ¨URLä¸­ã€‚ å¦‚æœä½ çš„é™æ€èµ„æºå­˜æ”¾åœ¨å¤šä¸ªç›®å½•ä¸‹é¢ï¼Œä½ å¯ä»¥å¤šæ¬¡è°ƒç”¨express.staticä¸­é—´ä»¶ï¼š app.use(express.static(&#39;public&#39;)) app.use(express.static(&#39;files&#39;)) è®¿é—®é™æ€èµ„æºæ–‡ä»¶æ—¶ï¼Œexpress.staticä¸­é—´ä»¶ä¼šæ ¹æ®ç›®å½•æ·»åŠ çš„é¡ºåºæŸ¥æ‰¾æ‰€éœ€çš„æ–‡ä»¶ã€‚ å¦‚æœä½ å¸Œæœ›æ‰€æœ‰é€šè¿‡express.staticè®¿é—®çš„æ–‡ä»¶éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªâ€è™šæ‹Ÿ(virtual)â€œç›®å½•ï¼ˆå³ç›®å½•æ ¹æœ¬ä¸å­˜åœ¨ï¼‰ä¸‹é¢ï¼Œå¯ä»¥é€šè¿‡ä¸ºé™æ€èµ„æºç›®å½•æŒ‡å®šä¸€ä¸ªæŒ‚è½½è·¯å¾„çš„æ–¹å¼æ¥å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š app.use(&#39;/static&#39;, express.static(&#39;public&#39;)) ç°åœ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡å¸¦æœ‰â€/staticâ€œå‰ç¼€çš„åœ°å€æ¥è®¿é—®publicç›®å½•ä¸‹é¢çš„æ–‡ä»¶äº†ã€‚ http://localhost:3000/static/images/kitten.jpg http://localhost:3000/static/css/style.css http://localhost:3000/static/js/app.js http://localhost:3000/static/images/bg.png http://localhost:3000/static/hello.html å…­ã€ä½¿ç”¨ä¸­é—´ä»¶Expressæ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„webå¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ªExpressåº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚ ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥è®¿é—®è¯·æ±‚å¯¹è±¡ï¼ˆrequest object(req)ï¼‰ï¼Œå“åº”å¯¹è±¡(response object(res))ï¼Œå’Œwebåº”ç”¨ä¸­å¤„äºè¯·æ±‚-å“åº”å¾ªç¯æµç¨‹ä¸­çš„ä¸­é—´ä»¶ï¼Œä¸€èˆ¬è¢«å‘½åä¸ºnextçš„å˜é‡ã€‚ ä¸­é—´ä»¶çš„åŠŸèƒ½åŒ…æ‹¬ï¼š æ‰§è¡Œä»»ä½•ä»£ç  ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡ ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨next()æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚ Expressåº”ç”¨å¯ä½¿ç”¨å¦‚ä¸‹å‡ ç§ä¸­é—´ä»¶ï¼š åº”ç”¨çº§ä¸­é—´ä»¶ è·¯ç”±çº§ä¸­é—´ä»¶ é”™è¯¯å¤„ç†ä¸­é—´ä»¶ å†…ç½®ä¸­é—´ä»¶ ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ ä½¿ç”¨å¯é€‰åˆ™æŒ‚è½½è·¯å¾„ï¼Œå¯åœ¨åº”ç”¨çº§åˆ«æˆ–è·¯ç”±çº§åˆ«è£…è½½ä¸­é—´ä»¶ã€‚å¦å¤–ï¼Œä½ è¿˜å¯ä»¥åŒæ—¶è£…åœ¨ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°ï¼Œä»è€Œåœ¨ä¸€ä¸ªæŒ‚è½½ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ªå­ä¸­é—´ä»¶æ ˆã€‚ 1ã€åº”ç”¨çº§ä¸­é—´ä»¶åº”ç”¨çº§ä¸­é—´ä»¶ç»‘å®šåˆ°appå¯¹è±¡ï¼Œä½¿ç”¨app.use()å’Œapp.METHOD()ï¼Œå…¶ä¸­ï¼ŒMETHODæ˜¯éœ€è¦å¤„ç†çš„HTTPè¯·æ±‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚GET,PUT,POSTç­‰ç­‰ï¼Œå…¨éƒ¨å°å†™ã€‚ä¾‹å¦‚ï¼š var app = express() // æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶ï¼Œåº”ç”¨çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¯¥ä¸­é—´ä»¶ app.use(function (req, res, next) { console.log(&#39;Time:&#39;, Date.now()) next() }) // æŒ‚è½½è‡³ /user/:id çš„ä¸­é—´ä»¶ï¼Œä»»ä½•æŒ‡å‘ /user/:id çš„è¯·æ±‚éƒ½ä¼šæ‰§è¡Œå®ƒ app.use(&#39;/user/:id&#39;, function(req, res, next) { console.log(&#39;Request Type:&#39;, req.method) next() }) // è·¯ç”±å’Œå¥æŸ„å‡½æ•°(ä¸­é—´ä»¶ç³»ç»Ÿ)ï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚ app.get(&#39;/user/:id&#39;, function(req, res, next) { res.send(&#39;USER&#39;) }) ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†åœ¨ä¸€ä¸ªæŒ‚è½½ç‚¹è£…è½½ä¸€ç»„ä¸­é—´ä»¶ã€‚ // ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¯¹ä»»ä½•æŒ‡å‘ /user/:id çš„ HTTP è¯·æ±‚æ‰“å°å‡ºç›¸å…³ä¿¡æ¯ app.use(&#39;/user/:id&#39;, function(req, res, next) { console.log(&#39;Request URL:&#39;, req.originalUrl) next() }, function(req, res, next) { console.log(&#39;Request Type:&#39;, req.method) next() }) ä½œä¸ºä¸­é—´ä»¶ç³»ç»Ÿçš„è·¯ç”±å¥æŸ„ï¼Œä½¿å¾—ä¸ºè·¯å¾„å®šä¹‰å¤šä¸ªè·¯ç”±æˆä¸ºå¯èƒ½ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸ºæŒ‡å‘ /user/:id çš„ GET è¯·æ±‚å®šä¹‰äº†ä¸¤ä¸ªè·¯ç”±ã€‚ ç¬¬äºŒä¸ªè·¯ç”±è™½ç„¶ä¸ä¼šå¸¦æ¥ä»»ä½•é—®é¢˜ï¼Œä½†å´æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè·¯ç”±å·²ç»ç»ˆæ­¢äº†è¯·æ±‚-å“åº”å¾ªç¯ã€‚ // ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GETè¯·æ±‚ app.get(&#39;/user/:id&#39;, function(req, res, next) { console.log(&#39;ID:&#39;, req.params.id) next() }, function(req, res, next) { res.send(&#39;User Info&#39;) }) // å¤„ç† /user/:id, æ‰“å°å‡ºç”¨æˆ·id app.get(&#39;/user/:id&#39;, function(req, res, next) { res.end(req.params.id) }) å¦‚æœéœ€è¦åœ¨ä¸­é—´ä»¶æ ˆä¸­è·³è¿‡å‰©ä½™ä¸­é—´ä»¶ï¼Œè°ƒç”¨ next(&#39;route&#39;)æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªè·¯ç”±ã€‚æ³¨æ„ï¼šnext(&#39;route&#39;)åªå¯¹ä½¿ç”¨ app.VERB() æˆ– router.VERB()åŠ è½½çš„ä¸­é—´ä»¶æœ‰æ•ˆã€‚ // ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚ app.get(&#39;/user/:id&#39;, function(req, res, next) { // å¦‚æœ user id ä¸º0ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªè·¯ç”± if (req.params.id === 0) next(&#39;route&#39;) // å¦åˆ™å°†æ§åˆ¶æƒäº¤ç»™æ ˆä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ else next() }, function(req, res, next) { // æ¸²æŸ“å¸¸è§„é¡µé¢ res.render(&#39;regular&#39;) }) // å¤„ç† /user/:id, æ¸²æŸ“ä¸€ä¸ªç‰¹æ®Šé¡µé¢ app.get(&#39;/user/:id&#39;, function(req, res, next) { res.render(&#39;special&#39;) }) 2ã€è·¯ç”±çº§ä¸­é—´ä»¶è·¯ç”±çº§ä¸­é—´ä»¶å’Œåº”ç”¨çº§ä¸­é—´ä»¶ä¸€æ ·ï¼Œåªæ˜¯å®ƒç»‘å®šçš„å¯¹è±¡ä¸º express.Router()ã€‚ var router = express.Router() è·¯ç”±çº§ä½¿ç”¨router.use()æˆ–router.VERB()åŠ è½½ã€‚ ä¸Šè¿°åœ¨åº”ç”¨çº§åˆ›å»ºçš„ä¸­é—´ä»¶ç³»ç»Ÿï¼Œå¯é€šè¿‡å¦‚ä¸‹ä»£ç æ”¹å†™ä¸ºè·¯ç”±çº§ã€‚ var app = express() var router = express.Router() // æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶ï¼Œé€šè¿‡è¯¥è·¯ç”±çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¯¥ä¸­é—´ä»¶ router.use(function (req, res, next) { console.log(&#39;Time:&#39;, Date.now()) next() }) // ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œæ˜¾ç¤ºä»»ä½•æŒ‡å‘ /user/:id çš„ HTTP è¯·æ±‚çš„ä¿¡æ¯ router.use(&#39;/user/:id&#39;, function(req, res, next) { console.log(&#39;Request URL:&#39;, req.originalUrl) next() }, function (req, res, next) { console.log(&#39;Request Type:&#39;, req.method) next() }) // ä¸€ä¸ªä¸­é—´ä»¶æ ˆï¼Œå¤„ç†æŒ‡å‘ /user/:id çš„ GET è¯·æ±‚ router.get(&#39;/user/:id&#39;, function (req, res, next) { // å¦‚æœ user id ä¸º 0, è·³åˆ°ä¸‹ä¸€ä¸ªè·¯ç”± if (req.params.id == 0) next(&#39;route&#39;) // è´Ÿè´£å°†æ§åˆ¶æƒäº¤ç»™æ ˆä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ else next() // }, function (req, res, next) { // æ¸²æŸ“å¸¸è§„é¡µé¢ res.render(&#39;regular&#39;) }) // å¤„ç† /user/:idï¼Œ æ¸²æŸ“ä¸€ä¸ªç‰¹æ®Šé¡µé¢ router.get(&#39;/user/:id&#39;, function (req, res, next) { console.log(req.params.id) res.render(&#39;special&#39;) }) // å°†è·¯ç”±æŒ‚è½½è‡³åº”ç”¨ app.use(&#39;/&#39;, router) 3ã€é”™è¯¯å¤„ç†ä¸­é—´ä»¶ é”™è¯¯å¤„ç†ä¸­é—´ä»¶æœ‰4ä¸ªå‚æ•°ï¼Œå®šä¹‰é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ—¶å¿…é¡»ä½¿ç”¨è¿™4ä¸ªå‚æ•°ã€‚å³ä½¿ä¸éœ€è¦nextå¯¹è±¡ï¼Œä¹Ÿå¿…é¡»åœ¨ç­¾åä¸­å£°æ˜å®ƒï¼Œå¦åˆ™ä¸­é—´ä»¶ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªå¸¸è§„ä¸­é—´ä»¶ï¼Œä¸èƒ½å¤„ç†é”™è¯¯ã€‚ é”™è¯¯å¤„ç†ä¸­é—´ä»¶å’Œå…¶ä»–ä¸­é—´ä»¶å®šä¹‰ç±»ä¼¼ï¼Œåªæ˜¯è¦ä½¿ç”¨4ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯3ä¸ªï¼Œå…¶ç­¾åå¦‚ä¸‹ï¼š(err,req,res,next)ã€‚ app.use(function(err, req, res, next) { console.error(err.stack) res.status(500).send(&#39;Something broke!&#39;) }) 4ã€å†…ç½®ä¸­é—´ä»¶ä»4.xç‰ˆæœ¬å¼€å§‹ï¼ŒExpresså·²ç»ä¸å†ä¾èµ–Connectäº†ã€‚é™¤äº†express.staticï¼ŒExpressä»¥å‰å†…ç½®çš„ä¸­é—´ä»¶ç°åœ¨å·²ç»å…¨éƒ¨å•ç‹¬ä½œä¸ºæ¨¡å—å®‰è£…ä½¿ç”¨äº†ã€‚è¯·å‚è€ƒ ä¸­é—´ä»¶åˆ—è¡¨ã€‚ express.static(root, [options]) express.static æ˜¯ Express å”¯ä¸€å†…ç½®çš„ä¸­é—´ä»¶ã€‚å®ƒåŸºäº serve-staticï¼Œè´Ÿè´£åœ¨Expressåº”ç”¨ä¸­ææ‰˜ç®¡é™æ€èµ„æºã€‚ å‚æ•° root æŒ‡æä¾›é™æ€èµ„æºçš„æ ¹ç›®å½•ã€‚ å¯é€‰çš„ options å‚æ•°æ‹¥æœ‰å¦‚ä¸‹å±æ€§ã€‚ å±æ€§ æè¿° ç±»å‹ ç¼ºçœå€¼ dotfiles æ˜¯å¦å¯¹å¤–è¾“å‡ºæ–‡ä»¶åä»¥ç‚¹ï¼ˆ.ï¼‰å¼€å¤´çš„æ–‡ä»¶ã€‚å¯é€‰å€¼ä¸ºâ€allowâ€œï¼Œâ€denyâ€œå’Œâ€ignoreâ€œã€‚ String â€ignoreâ€œ etag æ˜¯å¦å¯ç”¨etagç”Ÿæˆ Boolean true extensions è®¾ç½®æ–‡ä»¶æ‰©å±•åå¤‡ä»½é€‰é¡¹ Array [] index å‘é€ç›®å½•ç´¢å¼•æ–‡ä»¶ï¼Œè®¾ç½®ä¸ºfalseç¦ç”¨ç›®å½•ç´¢å¼• Mixed â€œindex.htmlâ€ lastModified è®¾ç½®Last-Modifiedå¤´ä¸ºæ–‡ä»¶åœ¨æ“ä½œç³»ç»Ÿä¸Šçš„æœ€åä¿®æ”¹æ—¥æœŸã€‚å¯èƒ½å€¼ä¸ºtrueæˆ–false Boolean true maxAge ä»¥æ¯«ç§’æˆ–è€…å…¶å­—ç¬¦ä¸²æ ¼å¼è®¾ç½®Cache-Controlå¤´çš„max-ageå±æ€§ã€‚ Number 0 redirect å½“è·¯å¾„ä¸ºç›®å½•æ—¶ï¼Œé‡å®šå‘è‡³â€/â€œ Boolean true setHeaders è®¾ç½®HTTPå¤´ä»¥æä¾›æ–‡ä»¶çš„å‡½æ•° Function ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº† express.static ä¸­é—´ä»¶ï¼Œå…¶ä¸­çš„ options å¯¹è±¡ç»è¿‡äº†ç²¾å¿ƒçš„è®¾è®¡ã€‚ var options = { dotfiles: &#39;ignore&#39;, etag: false, extensions: [&#39;htm&#39;, &#39;html&#39;], index: false, maxAge: &#39;1d&#39;, redirect: false, setHeaders: function (res, path, stat) { res.set(&#39;x-timestamp&#39;, Date.now()) } } app.use(express.static(&#39;public&#39;, options)) æ¯ä¸ªåº”ç”¨å¯æœ‰å¤šä¸ªé™æ€ç›®å½•ã€‚ app.use(express.static(&#39;public&#39;)) app.use(express.static(&#39;uploads&#39;)) app.use(express.static(&#39;files&#39;)) 5ã€ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶é€šè¿‡ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ä»è€Œä¸º Express åº”ç”¨å¢åŠ æ›´å¤šåŠŸèƒ½ã€‚ å®‰è£…æ‰€éœ€åŠŸèƒ½çš„ node æ¨¡å—ï¼Œå¹¶åœ¨åº”ç”¨ä¸­åŠ è½½ï¼Œå¯ä»¥åœ¨åº”ç”¨çº§åŠ è½½ï¼Œä¹Ÿå¯ä»¥åœ¨è·¯ç”±çº§åŠ è½½ã€‚ ä¸‹é¢çš„ä¾‹å­å®‰è£…å¹¶åŠ è½½äº†ä¸€ä¸ªè§£æ cookie çš„ä¸­é—´ä»¶ï¼š cookie-parser $ npm install cookie-parser var express = require(&#39;express&#39;) var app = express() var cookieParser = require(&#39;cookie-parser&#39;) // åŠ è½½ç”¨äºè§£æ cookie çš„ä¸­é—´ä»¶ app.use(cookieParser()) ä¸ƒã€åœ¨Expressä¸­ä½¿ç”¨æ¨¡æ¿å¼•æ“éœ€è¦åœ¨åº”ç”¨ä¸­è¿›è¡Œå¦‚ä¸‹è®¾ç½®æ‰èƒ½è®©Expressæ¸²æŸ“æ¨¡æ¿æ–‡ä»¶ï¼š viewsï¼Œæ”¾æ¨¡æ¿æ–‡ä»¶çš„ç›®å½•ï¼Œæ¯”å¦‚ï¼šapp.set(&#39;views&#39;, &#39;./views&#39;) view engineï¼Œæ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚ï¼šapp.set(&#39;view engine&#39;, &#39;ejs&#39;) art-template art-template for express 4.x. 1ã€Install npm install --save art-template npm install --save express-art-template 2ã€Example var express = require(&#39;express&#39;) var app = express() // view engine setup app.engine(&#39;art&#39;, require(&#39;express-art-template&#39;)) app.set(&#39;view&#39;, { debug: process.env.NODE_ENV !== &#39;production&#39; }) app.set(&#39;views&#39;, path.join(__dirname, &#39;views&#39;)) app.set(&#39;view engine&#39;, &#39;art&#39;) // routes app.get(&#39;/&#39;, function (req, res) { res.render(&#39;index.art&#39;, { user: { name: &#39;aui&#39;, tags: [&#39;art&#39;, &#39;template&#39;, &#39;nodejs&#39;] } }) }) 03-Koa2ä¸€ã€koa2å¿«é€Ÿå¼€å§‹å› ä¸ºnode.js v7.6.0å¼€å§‹å®Œå…¨æ”¯æŒasync/awaitï¼Œä¸éœ€è¦åŠ flagï¼Œæ‰€ä»¥node.jsç¯å¢ƒéƒ½è¦7.6.0ä»¥ä¸Šnode.jsç¯å¢ƒ ç‰ˆæœ¬v7.6ä»¥ä¸Š npm ç‰ˆæœ¬3.xä»¥ä¸Š","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}],"tags":[{"name":"åç«¯","slug":"åç«¯","permalink":"/tags/åç«¯/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}]},{"title":"Hexo-Theme-Sakura","slug":"Hexo-Theme-Sakura","date":"2018-12-12T14:16:01.000Z","updated":"2021-08-12T10:44:10.293Z","comments":true,"path":"2018/12/12/Hexo-Theme-Sakura/","link":"","permalink":"/2018/12/12/Hexo-Theme-Sakura/","excerpt":"","text":"hexo-theme-sakuraä¸»é¢˜ English document åŸºäºWordPressä¸»é¢˜Sakuraä¿®æ”¹æˆHexoçš„ä¸»é¢˜ã€‚ demoé¢„è§ˆ æ­£åœ¨å¼€å‘ä¸­â€¦â€¦ äº¤æµç¾¤è‹¥ä½ æ˜¯ä½¿ç”¨è€…ï¼ŒåŠ ç¾¤QQ: 801511924 è‹¥ä½ æ˜¯åˆ›ä½œè€…ï¼ŒåŠ ç¾¤QQ: 194472590 ä¸»é¢˜ç‰¹æ€§ é¦–é¡µå¤§å±è§†é¢‘ é¦–é¡µéšæœºå°é¢ å›¾ç‰‡æ‡’åŠ è½½ valineè¯„è®º fancy-boxç›¸å†Œ pjaxæ”¯æŒï¼ŒéŸ³ä¹ä¸é—´æ–­ aplayeréŸ³ä¹æ’­æ”¾å™¨ å¤šçº§å¯¼èˆªèœå•ï¼ˆæŒ‰ç°åœ¨å¤§éƒ¨åˆ†hexoä¸»é¢˜æ¥è¯´ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸ªç‰¹æ€§äº†ï¼‰ èµèµä½œè€…å¦‚æœå–œæ¬¢hexo-theme-sakuraä¸»é¢˜ï¼Œå¯ä»¥è€ƒè™‘èµ„åŠ©ä¸€ä¸‹å“¦~éå¸¸æ„Ÿæ¿€ï¼ paypal | Alipay æ”¯ä»˜å® | WeChat Pay å¾®ä¿¡æ”¯ä»˜ æœªå®Œå–„çš„ä½¿ç”¨æ•™ç¨‹é‚£å•¥ï¼Ÿè€å®è¯´æˆ‘ç›®å‰ä¹Ÿä¸æ˜¯å¾ˆæœ‰æ¡ç†233333333~ 1ã€ä¸»é¢˜ä¸‹è½½å®‰è£…hexo-theme-sakuraå»ºè®®ä¸‹è½½å‹ç¼©åŒ…æ ¼å¼ï¼Œå› ä¸ºé™¤äº†ä¸»é¢˜å†…å®¹è¿˜æœ‰äº›sourceçš„é…ç½®å¯¹æ–°æ‰‹æ¥è¯´æ¯”è¾ƒå¤ªéº»çƒ¦ï¼Œç›´æ¥ä¸‹è½½è§£å‹å°±çœå»è¿™äº›éº»çƒ¦å’¯ã€‚ ä¸‹è½½å¥½åè§£å‹åˆ°åšå®¢æ ¹ç›®å½•ï¼ˆä¸æ˜¯ä¸»é¢˜ç›®å½•å“¦ï¼Œé‡å¤çš„é€‰æ‹©æ›¿æ¢ï¼‰ã€‚æ¥ç€åœ¨å‘½ä»¤è¡Œï¼ˆcmdã€bashï¼‰è¿è¡Œnpm iå®‰è£…ä¾èµ–ã€‚ 2ã€ä¸»é¢˜é…ç½®åšå®¢æ ¹ç›®å½•ä¸‹çš„_configé…ç½®ç«™ç‚¹ # Site title: ä½ çš„ç«™ç‚¹å subtitle: description: ç«™ç‚¹ç®€ä»‹ keywords: author: ä½œè€…å language: zh-cn timezone: éƒ¨ç½² deploy: type: git repo: github: ä½ çš„githubä»“åº“åœ°å€ # coding: ä½ çš„codingä»“åº“åœ°å€ branch: master å¤‡ä»½ ï¼ˆä½¿ç”¨hexo bå‘å¸ƒå¤‡ä»½åˆ°è¿œç¨‹ä»“åº“ï¼‰ backup: type: git message: backup my blog of https://honjun.github.io/ repository: # ä½ çš„githubä»“åº“åœ°å€,å¤‡ä»½åˆ†æ”¯å ï¼ˆå»ºè®®æ–°å»ºbackupåˆ†æ”¯ï¼‰ github: https://github.com/honjun/honjun.github.io.git,backup # coding: https://git.coding.net/hojun/hojun.git,backup ä¸»é¢˜ç›®å½•ä¸‹çš„_configé…ç½®å…¶ä¸­æ ‡æ˜ã€æ”¹ã€‘çš„æ˜¯éœ€è¦ä¿®æ”¹éƒ¨é—¨ï¼Œæ ‡æ˜ã€é€‰ã€‘æ˜¯å¯æ”¹å¯ä¸æ”¹ï¼Œæ ‡æ˜ã€éã€‘æ˜¯ä¸ç”¨æ”¹çš„éƒ¨åˆ† # site name # ç«™ç‚¹å ã€æ”¹ã€‘ prefixName: ã•ãã‚‰è˜ãã® siteName: hojun # favicon and site master avatar # ç«™ç‚¹çš„faviconå’Œå¤´åƒ è¾“å…¥å›¾ç‰‡è·¯å¾„ï¼ˆä¸‹é¢çš„é…ç½®æ˜¯éƒ½æ˜¯cdnçš„ç›¸å¯¹è·¯å¾„ï¼Œæ²¡æœ‰cdnè¯·å¡«å†™å®Œæ•´è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨jsdeliveræ­å»ºä¸€ä¸ªcdnå•¦ï¼Œå…ˆå»ä¸‹è½½æˆ‘çš„cdnæ›¿æ¢ä¸‹å›¾ç‰‡å°±è¡Œäº†ï¼Œç®€å•æ–¹ä¾¿~ï¼‰ã€æ”¹ã€‘ favicon: /images/favicon.ico avatar: /img/custom/avatar.jpg # ç«™ç‚¹url ã€æ”¹ã€‘ url: https://sakura.hojun.cn # ç«™ç‚¹ä»‹ç»ï¼ˆæˆ–è€…è¯´æ˜¯ä¸ªäººç­¾åï¼‰ã€æ”¹ã€‘ description: Live your life with passion! With some drive! # ç«™ç‚¹cdnï¼Œæ²¡æœ‰å°±ä¸ºç©º ã€æ”¹ã€‘ è‹¥æ˜¯cdnä¸ºç©ºï¼Œä¸€äº›å›¾ç‰‡åœ°å€å°±è¦å¡«å®Œæ•´åœ°å€äº†ï¼Œæ¯”å¦‚ä¹‹å‰avatarå°±è¦å¡«https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/custom/avatar.jpg cdn: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6 # å¼€å¯pjax ã€é€‰ã€‘ pjax: 1 # ç«™ç‚¹é¦–é¡µçš„å…¬å‘Šä¿¡æ¯ ã€æ”¹ã€‘ notice: hexo-Sakuraä¸»é¢˜å·²ç»å¼€æºï¼Œç›®å‰æ­£åœ¨å¼€å‘ä¸­... # æ‡’åŠ è½½çš„åŠ è½½ä¸­å›¾ç‰‡ ã€é€‰ã€‘ lazyloadImg: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg # ç«™ç‚¹èœå•é…ç½® ã€é€‰ã€‘ menus: é¦–é¡µ: { path: /, fa: fa-fort-awesome faa-shake } å½’æ¡£: { path: /archives, fa: fa-archive faa-shake, submenus: { æŠ€æœ¯: {path: /categories/æŠ€æœ¯/, fa: fa-code }, ç”Ÿæ´»: {path: /categories/ç”Ÿæ´»/, fa: fa-file-text-o }, èµ„æº: {path: /categories/èµ„æº/, fa: fa-cloud-download }, éšæƒ³: {path: /categories/éšæƒ³/, fa: fa-commenting-o }, è½¬è½½: {path: /categories/è½¬è½½/, fa: fa-book } } } æ¸…å•: { path: javascript:;, fa: fa-list-ul faa-vertical, submenus: { ä¹¦å•: {path: /tags/æ‚¦è¯»/, fa: fa-th-list faa-bounce }, ç•ªç»„: {path: /bangumi/, fa: fa-film faa-vertical }, æ­Œå•: {path: /music/, fa: fa-headphones }, å›¾é›†: {path: /tags/å›¾é›†/, fa: fa-photo } } } ç•™è¨€æ¿: { path: /comment/, fa: fa-pencil-square-o faa-tada } å‹äººå¸: { path: /links/, fa: fa-link faa-shake } èµèµ: { path: /donate/, fa: fa-heart faa-pulse } å…³äº: { path: /, fa: fa-leaf faa-wrench , submenus: { æˆ‘ï¼Ÿ: {path: /about/, fa: fa-meetup}, ä¸»é¢˜: {path: /theme-sakura/, fa: iconfont icon-sakura }, Lab: {path: /lab/, fa: fa-cogs }, } } å®¢æˆ·ç«¯: { path: /client/, fa: fa-android faa-vertical } RSS: { path: /atom.xml, fa: fa-rss faa-pulse } # Home page sort type: -1: newer firstï¼Œ1: older first. ã€éã€‘ homePageSortType: -1 # Home page article shown number) ã€éã€‘ homeArticleShown: 10 # èƒŒæ™¯å›¾ç‰‡ ã€é€‰ã€‘ bgn: 8 # startdashé¢æ¿ url, title, desc img ã€æ”¹ã€‘ startdash: - {url: /theme-sakura/, title: Sakura, desc: æœ¬ç«™ hexo ä¸»é¢˜, img: /img/startdash/sakura.md.png} - {url: http://space.bilibili.com/271849279, title: Bilibili, desc: åšä¸»çš„bç«™è§†é¢‘, img: /img/startdash/bilibili.jpg} - {url: /, title: hojunçš„ä¸‡äº‹å±‹, desc: æŠ€æœ¯æœåŠ¡, img: /img/startdash/wangshiwu.jpg} # your site build time or founded date # ä½ çš„ç«™ç‚¹å»ºç«‹æ—¥æœŸ ã€æ”¹ã€‘ siteBuildingTime: 07/17/2018 # ç¤¾äº¤æŒ‰é’®(social) url, img PCç«¯é…ç½® ã€æ”¹ã€‘ social: github: {url: http://github.com/honjun, img: /img/social/github.png} sina: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/sina.png} wangyiyun: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/wangyiyun.png} zhihu: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/zhihu.png} email: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/email.svg} wechat: {url: /#, qrcode: /img/custom/wechat.jpg, img: /img/social/wechat.png} # ç¤¾äº¤æŒ‰é’®(msocial) url, img ç§»åŠ¨ç«¯é…ç½® ã€æ”¹ã€‘ msocial: github: {url: http://github.com/honjun, fa: fa-github, color: 333} weibo: {url: http://weibo.com/mashirozx?is_all=1, fa: fa-weibo, color: dd4b39} qq: {url: https://wpa.qq.com/msgrd?v=3&amp;uin=954655431&amp;site=qq&amp;menu=yes, fa: fa-qq, color: 25c6fe} # èµèµäºŒç»´ç ï¼ˆå…¶ä¸­wechatSQæ˜¯èµèµå•é¡µé¢çš„èµèµç å›¾ç‰‡ï¼‰ã€æ”¹ã€‘ donate: alipay: /img/custom/donate/AliPayQR.jpg wechat: /img/custom/donate/WeChanQR.jpg wechatSQ: /img/custom/donate/WeChanSQ.jpg # é¦–é¡µè§†é¢‘åœ°å€ä¸ºhttps://cdn.jsdelivr.net/gh/honjun/hojun@1.2/Unbroken.mp4ï¼Œé…ç½®å¦‚ä¸‹ ã€æ”¹ã€‘ movies: url: https://cdn.jsdelivr.net/gh/honjun/hojun@1.2 # å¤šä¸ªè§†é¢‘ç”¨é€—å·éš”å¼€ï¼Œéšæœºè·å–ã€‚æ”¯æŒçš„æ ¼å¼ç›®å‰å·²çŸ¥MP4,Flvã€‚å…¶ä»–çš„å¯ä»¥è¯•ä¸‹ï¼Œä¸ä¿è¯æœ‰ç”¨ name: Unbroken.mp4 # å·¦ä¸‹è§’aplayeræ’­æ”¾å™¨é…ç½® ä¸»è¦æ”¹idå’Œserverè¿™ä¸¤é¡¹ï¼Œä¿®æ”¹è¯¦è§[aplayeræ–‡æ¡£] ã€æ”¹ã€‘ aplayer: id: 2660651585 server: netease type: playlist fixed: true mini: false autoplay: false loop: all order: random preload: auto volume: 0.7 mutex: true # Valineè¯„è®ºé…ç½®ã€æ”¹ã€‘ valine: true v_appId: GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz v_appKey: mgOpfzbkHYqU92CV4IDlAUHQ åˆ†ç±»é¡µå’Œæ ‡ç­¾é¡µé…ç½®åˆ†ç±»é¡µ æ ‡ç­¾é¡µ é…ç½®é¡¹åœ¨\\themes\\Sakura\\languages\\zh-cn.ymlé‡Œã€‚æ–°å¢ä¸€ä¸ªåˆ†ç±»æˆ–æ ‡ç­¾æœ€å¥½åŠ ä¸‹å“¦ï¼Œå½“ç„¶å«Œéº»çƒ¦å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€å¼ é»˜è®¤å›¾ç‰‡ï¼ˆå¯ä»¥æ”¹ä¸»é¢˜æˆ–è€…ç›´æ¥æŠŠ404å›¾ç‰‡æ›¿æ¢ä¸‹ï¼Œå¾æ±‚ä¸‹æ„è§è¦ä¸è¦ç»™è¿™ä¸ªåœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸ªå¼€å…³ï¼Œå¯ä»¥issueæˆ–ç¾¤é‡Œæå‡ºæ¥ï¼‰ï¼Œç°åœ¨æ˜¯æ²¡è®¾ç½®çš„è¯ä¼šä½¿ç”¨é‚£ç§å€’ç«‹å°ç‹—404å“¦ã€‚ #category # æŒ‰åˆ†ç±»ååˆ›å»º æŠ€æœ¯: #ä¸­æ–‡æ ‡é¢˜ zh: é‡ç”ŸæŠ€æœ¯åä¼š # è‹±æ–‡æ ‡é¢˜ en: Geek â€“ Only for Love # å°é¢å›¾ç‰‡ img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/coding.jpg ç”Ÿæ´»: zh: ç”Ÿæ´» en: live img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/writing.jpg #tag # æ ‡ç­¾åå³æ˜¯æ ‡é¢˜ æ‚¦è¯»: # å°é¢å›¾ç‰‡ img: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/banner/reading.jpg å•é¡µé¢å°é¢é…ç½®å¦‚ç•™è¨€æ¿é¡µé¢é¡µé¢ï¼Œä½äºsourceä¸‹çš„commentä¸‹ï¼Œæ‰“å¼€index.mdå¦‚ä¸‹ï¼š --- title: comment date: 2018-12-20 23:13:48 keywords: ç•™è¨€æ¿ description: comments: true # åœ¨è¿™é‡Œé…ç½®å•é¡µé¢å¤´éƒ¨å›¾ç‰‡ï¼Œè‡ªå®šä¹‰æ›¿æ¢å“¦~ photos: https://cdn.jsdelivr.net/gh/honjun/cdn@1.4/img/banner/comment.jpg --- å•é¡µé¢é…ç½®ç•ªç»„è®¡åˆ’é¡µ ï¼ˆè¯·ç›´æ¥åœ¨ä¸‹è½½åçš„æ–‡ä»¶ä¸­æ”¹ï¼Œä¸‹é¢çš„æ·»åŠ äº†æ³¨é‡Šå¯èƒ½ä¼šæœ‰äº›å½±å“ï¼‰ --- layout: bangumi title: bangumi comments: false date: 2019-02-10 21:32:48 keywords: description: bangumis: # ç•ªç»„å›¾ç‰‡ - img: https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg # ç•ªç»„å title: æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ± # è¿½ç•ªçŠ¶æ€ ï¼ˆè¿½ç•ªing/å·²è¿½å®Œï¼‰ status: å·²è¿½å®Œ # è¿½ç•ªè¿›åº¦ progress: 100 # ç•ªå‰§æ—¥æ–‡åç§° jp: ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã† # æ”¾é€æ—¶é—´ time: æ”¾é€æ—¶é—´: 2018-02-24 SUN. # ç•ªå‰§ä»‹ç» desc: ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚ - img: https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg title: æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ± status: å·²è¿½å®Œ progress: 50 jp: ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã† time: æ”¾é€æ—¶é—´: 2018-02-24 SUN. desc: ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚ --- å‹é“¾é¡µ ï¼ˆè¯·ç›´æ¥åœ¨ä¸‹è½½åçš„æ–‡ä»¶ä¸­æ”¹ï¼Œä¸‹é¢çš„æ·»åŠ äº†æ³¨é‡Šå¯èƒ½ä¼šæœ‰äº›å½±å“ï¼‰ --- layout: links title: links # åˆ›å»ºæ—¥æœŸï¼Œå¯ä»¥æ”¹ä¸‹ date: 2018-12-19 23:11:06 # å›¾ç‰‡ä¸Šçš„æ ‡é¢˜ï¼Œè‡ªå®šä¹‰ä¿®æ”¹ keywords: å‹äººå¸ description: # true/false å¼€å¯/å…³é—­è¯„è®º comments: true # é¡µé¢å¤´éƒ¨å›¾ç‰‡ï¼Œè‡ªå®šä¹‰ä¿®æ”¹ photos: https://cdn.jsdelivr.net/gh/honjun/cdn@1.4/img/banner/links.jpg # å‹é“¾é…ç½® links: # ç±»å‹åˆ†ç»„ - group: ä¸ªäººé¡¹ç›® # ç±»å‹ç®€ä»‹ desc: å……åˆ†è¯´æ˜è¿™å®¶ä¼™æ˜¯æ¡å’¸é±¼ &lt; (ï¿£ï¸¶ï¿£)&gt; items: # å‹é“¾é“¾æ¥ - url: https://shino.cc/fgvf # å‹é“¾å¤´åƒ img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg # å‹é“¾ç«™ç‚¹å name: Google # å‹é“¾ä»‹ç» ä¸‹é¢é›·åŒ desc: Google é•œåƒ - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ # ç±»å‹åˆ†ç»„... - group: å°ä¼™ä¼´ä»¬ desc: æ¬¢è¿äº¤æ¢å‹é“¾ ê‰‚(ËŠá—œË‹) items: - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ - url: https://shino.cc/fgvf img: https://cloud.moezx.cc/Picture/svg/landscape/fields.svg name: Google desc: Google é•œåƒ --- å†™æ–‡ç« é…ç½®ä¸»é¢˜é›†æˆäº†ä¸ªäººæ’ä»¶hexo-tag-biliå’Œhexo-tag-fancybox_imgã€‚å…¶ä¸­hexo-tag-biliç”¨æ¥åœ¨æ–‡ç« æˆ–å•é¡µé¢ä¸­æ’å…¥Bç«™å¤–é“¾è§†é¢‘ï¼Œä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š {% bili video_id [page] %} è¯¦ç»†ä½¿ç”¨æ•™ç¨‹è¯¦è§hexo-tag-biliã€‚ hexo-tag-fancybox_imgç”¨æ¥åœ¨æ–‡ç« æˆ–å•é¡µé¢ä¸­å›¾ç‰‡ï¼Œä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š {% fb_img src [caption] %} è¯¦ç»†ä½¿ç”¨æ•™ç¨‹è¯¦è§hexo-tag-fancybox_img è¿˜æœ‰å•¥ï¼Œä¸€æ—¶æƒ³ä¸èµ·æ¥â€¦â€¦To be continuedâ€¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}],"tags":[{"name":"web","slug":"web","permalink":"/tags/web/"},{"name":"æ‚¦è¯»","slug":"æ‚¦è¯»","permalink":"/tags/æ‚¦è¯»/"}],"keywords":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"/categories/æŠ€æœ¯/"}]}]}